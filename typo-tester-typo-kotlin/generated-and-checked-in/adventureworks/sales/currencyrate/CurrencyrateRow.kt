/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.sales.currencyrate

import adventureworks.customtypes.Defaulted
import adventureworks.sales.currency.CurrencyId
import java.math.BigDecimal
import java.time.LocalDateTime
import typo.kotlindsl.RowParser
import typo.kotlindsl.RowParsers
import typo.runtime.PgText
import typo.runtime.PgTypes

/** Table: sales.currencyrate
  * Currency exchange rates.
  * Primary key: currencyrateid
  */
data class CurrencyrateRow(
  /** Primary key for CurrencyRate records.
    * Default: nextval('sales.currencyrate_currencyrateid_seq'::regclass)
    */
  val currencyrateid: CurrencyrateId,
  /** Date and time the exchange rate was obtained. */
  val currencyratedate: LocalDateTime,
  /** Exchange rate was converted from this currency code.
    * Points to [adventureworks.sales.currency.CurrencyRow.currencycode]
    */
  val fromcurrencycode: CurrencyId,
  /** Exchange rate was converted to this currency code.
    * Points to [adventureworks.sales.currency.CurrencyRow.currencycode]
    */
  val tocurrencycode: CurrencyId,
  /** Average exchange rate for the day. */
  val averagerate: BigDecimal,
  /** Final exchange rate for the day. */
  val endofdayrate: BigDecimal,
  /** Default: now() */
  val modifieddate: LocalDateTime
) {
  fun id(): CurrencyrateId = currencyrateid

  fun toUnsavedRow(
    currencyrateid: Defaulted<CurrencyrateId>,
    modifieddate: Defaulted<LocalDateTime>
  ): CurrencyrateRowUnsaved = CurrencyrateRowUnsaved(currencyratedate, fromcurrencycode, tocurrencycode, averagerate, endofdayrate, currencyrateid, modifieddate)

  companion object {
    val _rowParser: RowParser<CurrencyrateRow> = RowParsers.of(CurrencyrateId.pgType, PgTypes.timestamp, CurrencyId.pgType, CurrencyId.pgType, PgTypes.numeric, PgTypes.numeric, PgTypes.timestamp, { t0, t1, t2, t3, t4, t5, t6 -> CurrencyrateRow(t0, t1, t2, t3, t4, t5, t6) }, { row -> arrayOf<Any?>(row.currencyrateid, row.currencyratedate, row.fromcurrencycode, row.tocurrencycode, row.averagerate, row.endofdayrate, row.modifieddate) })

    val pgText: PgText<CurrencyrateRow> =
      PgText.from(_rowParser.underlying)
  }
}