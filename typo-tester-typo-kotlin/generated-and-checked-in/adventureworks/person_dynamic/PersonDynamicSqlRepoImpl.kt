/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.person_dynamic

import java.sql.Connection
import java.util.Optional
import kotlin.collections.List
import typo.runtime.PgTypes
import typo.runtime.Fragment.interpolate

class PersonDynamicSqlRepoImpl() : PersonDynamicSqlRepo {
  override fun apply(
    firstName: Optional<String>,
    c: Connection
  ): List<PersonDynamicSqlRow> = interpolate(
    typo.runtime.Fragment.lit("""
      SELECT p.title, p.firstname, p.middlename, p.lastname
      FROM person.person p
      WHERE """.trimMargin()),
    PgTypes.text.opt().encode(firstName),
    typo.runtime.Fragment.lit("::text IS NULL OR p.firstname = "),
    PgTypes.text.opt().encode(firstName),
    typo.runtime.Fragment.lit("""


    """.trimMargin())
  ).query(PersonDynamicSqlRow._rowParser.all()).runUnchecked(c)
}