/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.person_detail

import adventureworks.person.businessentity.BusinessentityId
import java.sql.Connection
import java.time.LocalDateTime
import kotlin.collections.List
import typo.kotlindsl.Fragment
import typo.runtime.PgTypes

class PersonDetailSqlRepoImpl() : PersonDetailSqlRepo {
  override fun apply(
    businessentityid: /* user-picked */ BusinessentityId,
    modifiedAfter: LocalDateTime,
    c: Connection
  ): List<PersonDetailSqlRow> = Fragment.interpolate(Fragment.lit("SELECT s.businessentityid,\n       p.title,\n       p.firstname,\n       p.middlename,\n       p.lastname,\n       e.jobtitle,\n       a.addressline1,\n       a.city,\n       a.postalcode,\n       a.rowguid\nFROM sales.salesperson s\n         JOIN humanresources.employee e ON e.businessentityid = s.businessentityid\n         JOIN person.person p ON p.businessentityid = s.businessentityid\n         JOIN person.businessentityaddress bea ON bea.businessentityid = s.businessentityid\n         LEFT JOIN person.address a ON a.addressid = bea.addressid\nwhere s.businessentityid = "), Fragment.encode(BusinessentityId.pgType, businessentityid), Fragment.lit("::int4\n  and p.modifieddate > "), Fragment.encode(PgTypes.timestamp, modifiedAfter), Fragment.lit("::timestamp")).query(PersonDetailSqlRow._rowParser.all()).runUnchecked(c)
}