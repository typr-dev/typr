/**
 * File automatically generated by `typo` for its own test suite.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN
 */
package testdb.hardcoded.compositepk.person

import java.util.Optional
import testdb.hardcoded.customtypes.Defaulted
import testdb.hardcoded.customtypes.Defaulted.UseDefault
import typo.runtime.PgText
import typo.runtime.PgTypes

/** This class corresponds to a row in table `compositepk.person` which has not been persisted yet */
case class PersonRowUnsaved(
  name: Optional[String] = Optional.empty(),
  /** Default: auto-increment */
  one: Defaulted[java.lang.Long] = new UseDefault(),
  /** Default: auto-increment */
  two: Defaulted[Optional[String]] = new UseDefault()
) {
  def toRow(
    oneDefault: => java.lang.Long,
    twoDefault: => Optional[String]
  ): PersonRow = new PersonRow(one = one.getOrElse(oneDefault), two = two.getOrElse(twoDefault), name = name)
}

object PersonRowUnsaved {
  given pgText: PgText[PersonRowUnsaved] = PgText.instance((row, sb) => { PgTypes.text.opt().pgText.unsafeEncode(row.name, sb); sb.append(PgText.DELIMETER); Defaulted.pgText(using PgTypes.int8.pgText).unsafeEncode(row.one, sb); sb.append(PgText.DELIMETER); Defaulted.pgText(using PgTypes.text.opt().pgText).unsafeEncode(row.two, sb) })
}