/**
 * File automatically generated by `typo` for its own test suite.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN
 */
package testdb.hardcoded

import com.fasterxml.jackson.core.JsonGenerator
import com.fasterxml.jackson.databind.JsonSerializer
import com.fasterxml.jackson.databind.SerializerProvider
import java.io.IOException
import testdb.hardcoded.customtypes.Defaulted
import testdb.hardcoded.customtypes.Defaulted.Provided
import testdb.hardcoded.customtypes.Defaulted.UseDefault

/** Jackson serializer for Defaulted types */
class DefaultedSerializer extends JsonSerializer[Defaulted[?]] {
  @throws[IOException]
  override def serialize(
    value: Defaulted[?],
    gen: JsonGenerator,
    serializers: SerializerProvider
  ): Unit = {
    value match {
      case null => gen.writeNull()
      case u: UseDefault[?] => gen.writeString("defaulted")
      case p: Provided[?] => {
        gen.writeStartObject();
        gen.writeFieldName("provided");
        serializers.defaultSerializeValue(p.value, gen);
        gen.writeEndObject();
      }
    }
  }
}