/**
 * File automatically generated by `typo` for its own test suite.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN
 */
package testdb.hardcoded.myschema.person

import com.fasterxml.jackson.annotation.JsonProperty
import java.util.Optional
import testdb.hardcoded.customtypes.Defaulted
import testdb.hardcoded.customtypes.Defaulted.UseDefault
import testdb.hardcoded.myschema.Number
import testdb.hardcoded.myschema.Sector
import testdb.hardcoded.myschema.football_club.FootballClubId
import testdb.hardcoded.myschema.marital_status.MaritalStatusId
import typo.runtime.PgText
import typo.runtime.PgTypes

/** This class corresponds to a row in table `myschema.person` which has not been persisted yet */
case class PersonRowUnsaved(
  /** Points to [[testdb.hardcoded.myschema.football_club.FootballClubRow.id]] */
  @JsonProperty("favourite_football_club_id") favouriteFootballClubId: FootballClubId,
  name: /* max 100 chars */ String,
  @JsonProperty("nick_name") nickName: Optional[/* max 30 chars */ String] = Optional.empty(),
  @JsonProperty("blog_url") blogUrl: Optional[/* max 100 chars */ String] = Optional.empty(),
  email: /* max 254 chars */ String,
  phone: /* max 8 chars */ String,
  @JsonProperty("likes_pizza") likesPizza: java.lang.Boolean,
  @JsonProperty("work_email") workEmail: Optional[/* max 254 chars */ String] = Optional.empty(),
  /** Default: auto-increment */
  id: Defaulted[PersonId] = new UseDefault(),
  /** Default: some-value
   * Points to [[testdb.hardcoded.myschema.marital_status.MaritalStatusRow.id]]
   */
  @JsonProperty("marital_status_id") maritalStatusId: Defaulted[MaritalStatusId] = new UseDefault(),
  /** Default: one */
  @JsonProperty("favorite_number") favoriteNumber: Defaulted[Number] = new UseDefault()
) {
  def toRow(
    idDefault: => PersonId,
    maritalStatusIdDefault: => MaritalStatusId,
    favoriteNumberDefault: => Number,
    sectorDefault: => Sector
  ): PersonRow = {
    new PersonRow(
      id = id.getOrElse(idDefault),
      favouriteFootballClubId = favouriteFootballClubId,
      name = name,
      nickName = nickName,
      blogUrl = blogUrl,
      email = email,
      phone = phone,
      likesPizza = likesPizza,
      maritalStatusId = maritalStatusId.getOrElse(maritalStatusIdDefault),
      workEmail = workEmail,
      sector = sectorDefault,
      favoriteNumber = favoriteNumber.getOrElse(favoriteNumberDefault)
    )
  }
}

object PersonRowUnsaved {
  given pgText: PgText[PersonRowUnsaved] = PgText.instance((row, sb) => { FootballClubId.pgType.pgText.unsafeEncode(row.favouriteFootballClubId, sb); sb.append(PgText.DELIMETER); PgTypes.text.pgText.unsafeEncode(row.name, sb); sb.append(PgText.DELIMETER); PgTypes.text.opt().pgText.unsafeEncode(row.nickName, sb); sb.append(PgText.DELIMETER); PgTypes.text.opt().pgText.unsafeEncode(row.blogUrl, sb); sb.append(PgText.DELIMETER); PgTypes.text.pgText.unsafeEncode(row.email, sb); sb.append(PgText.DELIMETER); PgTypes.text.pgText.unsafeEncode(row.phone, sb); sb.append(PgText.DELIMETER); PgTypes.bool.pgText.unsafeEncode(row.likesPizza, sb); sb.append(PgText.DELIMETER); PgTypes.text.opt().pgText.unsafeEncode(row.workEmail, sb); sb.append(PgText.DELIMETER); Defaulted.pgText(using PersonId.pgType.pgText).unsafeEncode(row.id, sb); sb.append(PgText.DELIMETER); Defaulted.pgText(using MaritalStatusId.pgType.pgText).unsafeEncode(row.maritalStatusId, sb); sb.append(PgText.DELIMETER); Defaulted.pgText(using Number.pgType.pgText).unsafeEncode(row.favoriteNumber, sb) })
}