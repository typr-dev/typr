/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.orders;

import com.fasterxml.jackson.annotation.JsonProperty;
import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.util.Optional;
import testdb.customers.CustomersId;
import testdb.customtypes.Defaulted;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;
import typo.runtime.SqlServerTypes;

/** Table: orders Primary key: order_id */
public record OrdersRow(
    /** IDENTITY(1, 1) */
    @JsonProperty("order_id") OrdersId orderId,
    /** Points to {@link testdb.customers.CustomersRow#customerId()} */
    @JsonProperty("customer_id") CustomersId customerId,
    /** Default: (getdate()) */
    @JsonProperty("order_date") Optional<LocalDateTime> orderDate,
    @JsonProperty("total_amount") BigDecimal totalAmount) {
  /** IDENTITY(1, 1) */
  public OrdersRow withOrderId(OrdersId orderId) {
    return new OrdersRow(orderId, customerId, orderDate, totalAmount);
  }
  ;

  /** Points to {@link testdb.customers.CustomersRow#customerId()} */
  public OrdersRow withCustomerId(CustomersId customerId) {
    return new OrdersRow(orderId, customerId, orderDate, totalAmount);
  }
  ;

  /** Default: (getdate()) */
  public OrdersRow withOrderDate(Optional<LocalDateTime> orderDate) {
    return new OrdersRow(orderId, customerId, orderDate, totalAmount);
  }
  ;

  public OrdersRow withTotalAmount(BigDecimal totalAmount) {
    return new OrdersRow(orderId, customerId, orderDate, totalAmount);
  }
  ;

  public static RowParser<OrdersRow> _rowParser =
      RowParsers.of(
          OrdersId.sqlServerType,
          CustomersId.sqlServerType,
          SqlServerTypes.datetime2.opt(),
          SqlServerTypes.money,
          OrdersRow::new,
          row ->
              new Object[] {row.orderId(), row.customerId(), row.orderDate(), row.totalAmount()});
  ;

  public OrdersId id() {
    return orderId;
  }
  ;

  public OrdersRowUnsaved toUnsavedRow(Defaulted<Optional<LocalDateTime>> orderDate) {
    return new OrdersRowUnsaved(customerId, totalAmount, orderDate);
  }
  ;
}
