/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.orders;

import com.fasterxml.jackson.annotation.JsonProperty;
import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.util.Optional;
import testdb.customers.CustomersId;
import testdb.customtypes.Defaulted;
import testdb.customtypes.Defaulted.UseDefault;

/** This class corresponds to a row in table `orders` which has not been persisted yet */
public record OrdersRowUnsaved(
    /** Points to {@link testdb.customers.CustomersRow#customerId()} */
    @JsonProperty("customer_id") CustomersId customerId,
    @JsonProperty("total_amount") BigDecimal totalAmount,
    /** Default: (getdate()) */
    @JsonProperty("order_date") Defaulted<Optional<LocalDateTime>> orderDate) {
  public OrdersRowUnsaved(
      /** Points to {@link testdb.customers.CustomersRow#customerId()} */
      @JsonProperty("customer_id") CustomersId customerId,
      @JsonProperty("total_amount") BigDecimal totalAmount) {
    this(customerId, totalAmount, new UseDefault<>());
  }
  ;

  /** Points to {@link testdb.customers.CustomersRow#customerId()} */
  public OrdersRowUnsaved withCustomerId(CustomersId customerId) {
    return new OrdersRowUnsaved(customerId, totalAmount, orderDate);
  }
  ;

  public OrdersRowUnsaved withTotalAmount(BigDecimal totalAmount) {
    return new OrdersRowUnsaved(customerId, totalAmount, orderDate);
  }
  ;

  /** Default: (getdate()) */
  public OrdersRowUnsaved withOrderDate(Defaulted<Optional<LocalDateTime>> orderDate) {
    return new OrdersRowUnsaved(customerId, totalAmount, orderDate);
  }
  ;

  public OrdersRow toRow(
      java.util.function.Supplier<Optional<LocalDateTime>> orderDateDefault,
      java.util.function.Supplier<OrdersId> orderIdDefault) {
    return new OrdersRow(
        orderIdDefault.get(), customerId, orderDate.getOrElse(orderDateDefault), totalAmount);
  }
  ;
}
