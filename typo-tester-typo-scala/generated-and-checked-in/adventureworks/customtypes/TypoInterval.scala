/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes

import org.postgresql.util.PGInterval
import typo.runtime.PgRead
import typo.runtime.PgText
import typo.runtime.PgType
import typo.runtime.PgWrite

/** Interval type in PostgreSQL */
case class TypoInterval(
  years: Integer,
  months: Integer,
  days: Integer,
  hours: Integer,
  minutes: Integer,
  seconds: java.lang.Double
)

object TypoInterval {
  given pgText: PgText[TypoInterval] = PgText.textString.contramap(v => s"P${v.years}Y${v.months}M${v.days}DT${v.hours}H${v.minutes}M${v.seconds}S")

  given pgType: PgType[TypoInterval] = {
    PgType.of(
      "interval",
      PgRead.castJdbcObjectTo(classOf[PGInterval]).map((v: PGInterval) => new TypoInterval(
                                                         v.getYears,
                                                         v.getMonths,
                                                         v.getDays,
                                                         v.getHours,
                                                         v.getMinutes,
                                                         v.getSeconds
                                                       )),
      PgWrite.passObjectToJdbc[PGInterval]().contramap((v: TypoInterval) => new PGInterval(
                                                         v.years,
                                                         v.months,
                                                         v.days,
                                                         v.hours,
                                                         v.minutes,
                                                         v.seconds
                                                       )),
      TypoInterval.pgText
    )
  }

  given pgTypeArray: PgType[Array[TypoInterval]] = {
    TypoInterval.pgType.array(PgRead.castJdbcArrayTo(classOf[PGInterval]).map((xs: Array[PGInterval]) => xs.map((v: PGInterval) => new TypoInterval(
      v.getYears,
      v.getMonths,
      v.getDays,
      v.getHours,
      v.getMinutes,
      v.getSeconds
    ))), PgWrite.passObjectToJdbc[PGInterval]().array(TypoInterval.pgType.typename().as[PGInterval]()).contramap((xs: Array[TypoInterval]) => xs.map((v: TypoInterval) => new PGInterval(
      v.years,
      v.months,
      v.days,
      v.hours,
      v.minutes,
      v.seconds
    ))))
  }
}