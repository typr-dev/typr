/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes

import org.postgresql.geometric.PGpoint
import typo.runtime.PgRead
import typo.runtime.PgText
import typo.runtime.PgType
import typo.runtime.PgWrite

/** Point datatype in PostgreSQL */
case class TypoPoint(
  x: java.lang.Double,
  y: java.lang.Double
)

object TypoPoint {
  given pgText: PgText[TypoPoint] = PgText.textString.contramap(v => s"(${v.x},${v.y})")

  given pgType: PgType[TypoPoint] = {
    PgType.of(
      "point",
      PgRead.castJdbcObjectTo(classOf[PGpoint]).map((v: PGpoint) => new TypoPoint(v.x, v.y)),
      PgWrite.passObjectToJdbc[PGpoint]().contramap((v: TypoPoint) => new PGpoint(v.x, v.y)),
      TypoPoint.pgText
    )
  }

  given pgTypeArray: PgType[Array[TypoPoint]] = TypoPoint.pgType.array(PgRead.castJdbcArrayTo(classOf[PGpoint]).map((xs: Array[PGpoint]) => xs.map((v: PGpoint) => new TypoPoint(v.x, v.y))), PgWrite.passObjectToJdbc[PGpoint]().array(TypoPoint.pgType.typename().as[PGpoint]()).contramap((xs: Array[TypoPoint]) => xs.map((v: TypoPoint) => new PGpoint(v.x, v.y))))
}