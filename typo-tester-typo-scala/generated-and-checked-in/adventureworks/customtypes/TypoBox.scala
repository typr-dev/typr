/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes

import org.postgresql.geometric.PGbox
import typo.runtime.PgRead
import typo.runtime.PgText
import typo.runtime.PgType
import typo.runtime.PgWrite

/** This represents the box datatype in PostgreSQL */
case class TypoBox(
  x1: java.lang.Double,
  y1: java.lang.Double,
  x2: java.lang.Double,
  y2: java.lang.Double
)

object TypoBox {
  given pgText: PgText[TypoBox] = PgText.textString.contramap(v => s"((${v.x1},${v.y1}),(${v.x2},${v.y2}))")

  given pgType: PgType[TypoBox] = {
    PgType.of(
      "box",
      PgRead.castJdbcObjectTo(classOf[PGbox]).map((v: PGbox) => new TypoBox(
                                                    v.point(0).x,
                                                    v.point(0).y,
                                                    v.point(1).x,
                                                    v.point(1).y
                                                  )),
      PgWrite.passObjectToJdbc[PGbox]().contramap((v: TypoBox) => new PGbox(
                                                    v.x1,
                                                    v.y1,
                                                    v.x2,
                                                    v.y2
                                                  )),
      TypoBox.pgText
    )
  }

  given pgTypeArray: PgType[Array[TypoBox]] = {
    TypoBox.pgType.array(PgRead.castJdbcArrayTo(classOf[PGbox]).map((xs: Array[PGbox]) => xs.map((v: PGbox) => new TypoBox(
      v.point(0).x,
      v.point(0).y,
      v.point(1).x,
      v.point(1).y
    ))), PgWrite.passObjectToJdbc[PGbox]().array(TypoBox.pgType.typename().as[PGbox]()).contramap((xs: Array[TypoBox]) => xs.map((v: TypoBox) => new PGbox(
      v.x1,
      v.y1,
      v.x2,
      v.y2
    ))))
  }
}