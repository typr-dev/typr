/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes

import org.postgresql.geometric.PGlseg
import org.postgresql.geometric.PGpoint
import typo.runtime.PgRead
import typo.runtime.PgText
import typo.runtime.PgType
import typo.runtime.PgWrite

/** Line segment datatype in PostgreSQL */
case class TypoLineSegment(
  p1: TypoPoint,
  p2: TypoPoint
)

object TypoLineSegment {
  given pgText: PgText[TypoLineSegment] = PgText.textString.contramap(v => s"((${v.p1.x},${v.p1.y}),(${v.p2.x},${v.p2.y}))")

  given pgType: PgType[TypoLineSegment] = {
    PgType.of(
      "lseg",
      PgRead.castJdbcObjectTo(classOf[PGlseg]).map((v: PGlseg) => new TypoLineSegment(new TypoPoint(v.point(0).x, v.point(0).y), new TypoPoint(v.point(1).x, v.point(1).y))),
      PgWrite.passObjectToJdbc[PGlseg]().contramap((v: TypoLineSegment) => new PGlseg(new PGpoint(v.p1.x, v.p1.y), new PGpoint(v.p2.x, v.p2.y))),
      TypoLineSegment.pgText
    )
  }

  given pgTypeArray: PgType[Array[TypoLineSegment]] = TypoLineSegment.pgType.array(PgRead.castJdbcArrayTo(classOf[PGlseg]).map((xs: Array[PGlseg]) => xs.map((v: PGlseg) => new TypoLineSegment(new TypoPoint(v.point(0).x, v.point(0).y), new TypoPoint(v.point(1).x, v.point(1).y)))), PgWrite.passObjectToJdbc[PGlseg]().array(TypoLineSegment.pgType.typename().as[PGlseg]()).contramap((xs: Array[TypoLineSegment]) => xs.map((v: TypoLineSegment) => new PGlseg(new PGpoint(v.p1.x, v.p1.y), new PGpoint(v.p2.x, v.p2.y)))))
}