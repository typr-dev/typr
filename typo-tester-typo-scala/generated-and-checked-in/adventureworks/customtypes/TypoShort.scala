/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes

import com.fasterxml.jackson.annotation.JsonValue
import typo.dsl.Bijection
import typo.runtime.PgRead
import typo.runtime.PgText
import typo.runtime.PgType
import typo.runtime.PgTypes
import typo.runtime.PgWrite

/** Short primitive */
case class TypoShort(@JsonValue value: java.lang.Short)

object TypoShort {
  given bijection: Bijection[TypoShort, java.lang.Short] = Bijection.apply[TypoShort, java.lang.Short](_.value)(TypoShort.apply)

  given numeric: Numeric[TypoShort] = {
    new Numeric[TypoShort] {
      override def compare(x: TypoShort, y: TypoShort): Int = java.lang.Short.compare(x.value, y.value)
      override def plus(x: TypoShort, y: TypoShort): TypoShort = TypoShort((x.value + y.value).toShort)
      override def minus(x: TypoShort, y: TypoShort): TypoShort = TypoShort((x.value - y.value).toShort)
      override def times(x: TypoShort, y: TypoShort): TypoShort = TypoShort((x.value * y.value).toShort)
      override def negate(x: TypoShort): TypoShort = TypoShort((-x.value).toShort)
      override def fromInt(x: Int): TypoShort = TypoShort(x.toShort)
      override def toInt(x: TypoShort): Int = x.value.toInt
      override def toLong(x: TypoShort): Long = x.value.toLong
      override def toFloat(x: TypoShort): Float = x.value.toFloat
      override def toDouble(x: TypoShort): Double = x.value.toDouble
      def parseString(str: String): Option[TypoShort] = str.toShortOption.map(s => TypoShort(s: java.lang.Short))
      locally{val _ = parseString("1")}
    }
  }

  given pgText: PgText[TypoShort] = PgText.textShort.contramap(v => v.value)

  given pgType: PgType[TypoShort] = PgTypes.int4.bimap((v: Integer) => TypoShort(v.toShort), (v: TypoShort) => v.value.toInt).renamed("int2")

  given pgTypeArray: PgType[Array[TypoShort]] = TypoShort.pgType.array(PgRead.massageJdbcArrayTo(classOf[Array[java.lang.Short]]).map((xs: Array[java.lang.Short]) => xs.map((v: java.lang.Short) => new TypoShort(v))), PgWrite.passObjectToJdbc[java.lang.Short]().array(TypoShort.pgType.typename().as[java.lang.Short]()).contramap((xs: Array[TypoShort]) => xs.map((v: TypoShort) => v.value: java.lang.Short)))
}