/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes

import org.postgresql.geometric.PGcircle
import typo.runtime.PgRead
import typo.runtime.PgText
import typo.runtime.PgType
import typo.runtime.PgWrite

/** This represents circle datatype in PostgreSQL, consisting of a point and a radius */
case class TypoCircle(
  center: TypoPoint,
  radius: java.lang.Double
)

object TypoCircle {
  given pgText: PgText[TypoCircle] = PgText.textString.contramap(v => s"<(${v.center.x},${v.center.y}),${v.radius}>")

  given pgType: PgType[TypoCircle] = {
    PgType.of(
      "circle",
      PgRead.castJdbcObjectTo(classOf[PGcircle]).map((v: PGcircle) => new TypoCircle(new TypoPoint(v.center.x, v.center.y), v.radius)),
      PgWrite.passObjectToJdbc[PGcircle]().contramap((v: TypoCircle) => new PGcircle(v.center.x, v.center.y, v.radius)),
      TypoCircle.pgText
    )
  }

  given pgTypeArray: PgType[Array[TypoCircle]] = TypoCircle.pgType.array(PgRead.castJdbcArrayTo(classOf[PGcircle]).map((xs: Array[PGcircle]) => xs.map((v: PGcircle) => new TypoCircle(new TypoPoint(v.center.x, v.center.y), v.radius))), PgWrite.passObjectToJdbc[PGcircle]().array(TypoCircle.pgType.typename().as[PGcircle]()).contramap((xs: Array[TypoCircle]) => xs.map((v: TypoCircle) => new PGcircle(v.center.x, v.center.y, v.radius))))
}