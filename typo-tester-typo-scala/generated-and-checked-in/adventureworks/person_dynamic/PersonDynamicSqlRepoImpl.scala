/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.person_dynamic

import java.sql.Connection
import java.util.Optional
import typo.runtime.PgTypes
import typo.runtime.FragmentInterpolator.interpolate

class PersonDynamicSqlRepoImpl extends PersonDynamicSqlRepo {
  override def apply(firstName: Optional[String])(using c: Connection): java.util.List[PersonDynamicSqlRow] = {
    interpolate"""SELECT p.title, p.firstname, p.middlename, p.lastname
    FROM person.person p
    WHERE ${PgTypes.text.opt().encode(firstName)}::text IS NULL OR p.firstname = ${PgTypes.text.opt().encode(firstName)}
    """.query(PersonDynamicSqlRow.`_rowParser`.all()).runUnchecked(c)
  }
}