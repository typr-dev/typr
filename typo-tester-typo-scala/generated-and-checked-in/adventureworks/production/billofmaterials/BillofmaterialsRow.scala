/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.production.billofmaterials

import adventureworks.customtypes.Defaulted
import adventureworks.customtypes.TypoLocalDateTime
import adventureworks.customtypes.TypoShort
import adventureworks.production.product.ProductId
import adventureworks.production.unitmeasure.UnitmeasureId
import java.util.Optional
import typo.runtime.PgText
import typo.runtime.PgTypes
import typo.runtime.RowParser
import typo.runtime.RowParsers

/** Table: production.billofmaterials
 * Items required to make bicycles and bicycle subassemblies. It identifies the heirarchical relationship between a parent product and its components.
 * Primary key: billofmaterialsid
 */
case class BillofmaterialsRow(
  /** Primary key for BillOfMaterials records.
   * Default: nextval('production.billofmaterials_billofmaterialsid_seq'::regclass)
   */
  billofmaterialsid: Integer,
  /** Parent product identification number. Foreign key to Product.ProductID.
   * Points to [[adventureworks.production.product.ProductRow.productid]]
   * Constraint CK_BillOfMaterials_BOMLevel affecting columns bomlevel, perassemblyqty, productassemblyid: ((((productassemblyid IS NULL) AND (bomlevel = 0) AND (perassemblyqty = 1.00)) OR ((productassemblyid IS NOT NULL) AND (bomlevel >= 1))))
   * Constraint CK_BillOfMaterials_ProductAssemblyID affecting columns componentid, productassemblyid: ((productassemblyid <> componentid))
   */
  productassemblyid: Optional[ProductId],
  /** Component identification number. Foreign key to Product.ProductID.
   * Points to [[adventureworks.production.product.ProductRow.productid]]
   * Constraint CK_BillOfMaterials_ProductAssemblyID affecting columns componentid, productassemblyid: ((productassemblyid <> componentid))
   */
  componentid: ProductId,
  /** Date the component started being used in the assembly item.
   * Default: now()
   * Constraint CK_BillOfMaterials_EndDate affecting columns enddate, startdate: (((enddate > startdate) OR (enddate IS NULL)))
   */
  startdate: TypoLocalDateTime,
  /** Date the component stopped being used in the assembly item.
   * Constraint CK_BillOfMaterials_EndDate affecting columns enddate, startdate: (((enddate > startdate) OR (enddate IS NULL)))
   */
  enddate: Optional[TypoLocalDateTime],
  /** Standard code identifying the unit of measure for the quantity.
   * Points to [[adventureworks.production.unitmeasure.UnitmeasureRow.unitmeasurecode]]
   */
  unitmeasurecode: UnitmeasureId,
  /** Indicates the depth the component is from its parent (AssemblyID).
   * Constraint CK_BillOfMaterials_BOMLevel affecting columns bomlevel, perassemblyqty, productassemblyid: ((((productassemblyid IS NULL) AND (bomlevel = 0) AND (perassemblyqty = 1.00)) OR ((productassemblyid IS NOT NULL) AND (bomlevel >= 1))))
   */
  bomlevel: TypoShort,
  /** Quantity of the component needed to create the assembly.
   * Default: 1.00
   * Constraint CK_BillOfMaterials_BOMLevel affecting columns bomlevel, perassemblyqty, productassemblyid: ((((productassemblyid IS NULL) AND (bomlevel = 0) AND (perassemblyqty = 1.00)) OR ((productassemblyid IS NOT NULL) AND (bomlevel >= 1))))
   * Constraint CK_BillOfMaterials_PerAssemblyQty affecting columns perassemblyqty: ((perassemblyqty >= 1.00))
   */
  perassemblyqty: java.math.BigDecimal,
  /** Default: now() */
  modifieddate: TypoLocalDateTime
) {
  def id: Integer = billofmaterialsid

  def toUnsavedRow(
    billofmaterialsid: Defaulted[Integer],
    startdate: Defaulted[TypoLocalDateTime] = Defaulted.Provided(this.startdate),
    perassemblyqty: Defaulted[java.math.BigDecimal] = Defaulted.Provided(this.perassemblyqty),
    modifieddate: Defaulted[TypoLocalDateTime] = Defaulted.Provided(this.modifieddate)
  ): BillofmaterialsRowUnsaved = {
    new BillofmaterialsRowUnsaved(
      productassemblyid,
      componentid,
      enddate,
      unitmeasurecode,
      bomlevel,
      billofmaterialsid,
      startdate,
      perassemblyqty,
      modifieddate
    )
  }
}

object BillofmaterialsRow {
  val `_rowParser`: RowParser[BillofmaterialsRow] = RowParsers.of(PgTypes.int4, ProductId.pgType.opt(), ProductId.pgType, TypoLocalDateTime.pgType, TypoLocalDateTime.pgType.opt(), UnitmeasureId.pgType, TypoShort.pgType, PgTypes.numeric, TypoLocalDateTime.pgType, BillofmaterialsRow.apply, row => Array[Object](row.billofmaterialsid.asInstanceOf[Object], row.productassemblyid.asInstanceOf[Object], row.componentid.asInstanceOf[Object], row.startdate.asInstanceOf[Object], row.enddate.asInstanceOf[Object], row.unitmeasurecode.asInstanceOf[Object], row.bomlevel.asInstanceOf[Object], row.perassemblyqty.asInstanceOf[Object], row.modifieddate.asInstanceOf[Object]))

  given pgText: PgText[BillofmaterialsRow] = PgText.from(`_rowParser`)
}