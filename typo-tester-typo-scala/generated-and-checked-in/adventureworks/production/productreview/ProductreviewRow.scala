/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.production.productreview

import adventureworks.customtypes.Defaulted
import adventureworks.customtypes.TypoLocalDateTime
import adventureworks.production.product.ProductId
import adventureworks.public.Name
import java.util.Optional
import typo.runtime.PgText
import typo.runtime.PgTypes
import typo.runtime.RowParser
import typo.runtime.RowParsers

/** Table: production.productreview
 * Customer reviews of products they have purchased.
 * Primary key: productreviewid
 */
case class ProductreviewRow(
  /** Primary key for ProductReview records.
   * Default: nextval('production.productreview_productreviewid_seq'::regclass)
   */
  productreviewid: ProductreviewId,
  /** Product identification number. Foreign key to Product.ProductID.
   * Points to [[adventureworks.production.product.ProductRow.productid]]
   */
  productid: ProductId,
  /** Name of the reviewer. */
  reviewername: Name,
  /** Date review was submitted.
   * Default: now()
   */
  reviewdate: TypoLocalDateTime,
  /** Reviewer's e-mail address. */
  emailaddress: /* max 50 chars */ String,
  /** Product rating given by the reviewer. Scale is 1 to 5 with 5 as the highest rating.
   * Constraint CK_ProductReview_Rating affecting columns rating: (((rating >= 1) AND (rating <= 5)))
   */
  rating: Integer,
  /** Reviewer's comments */
  comments: Optional[/* max 3850 chars */ String],
  /** Default: now() */
  modifieddate: TypoLocalDateTime
) {
  def id: ProductreviewId = productreviewid

  def toUnsavedRow(
    productreviewid: Defaulted[ProductreviewId],
    reviewdate: Defaulted[TypoLocalDateTime] = Defaulted.Provided(this.reviewdate),
    modifieddate: Defaulted[TypoLocalDateTime] = Defaulted.Provided(this.modifieddate)
  ): ProductreviewRowUnsaved = {
    new ProductreviewRowUnsaved(
      productid,
      reviewername,
      emailaddress,
      rating,
      comments,
      productreviewid,
      reviewdate,
      modifieddate
    )
  }
}

object ProductreviewRow {
  val `_rowParser`: RowParser[ProductreviewRow] = RowParsers.of(ProductreviewId.pgType, ProductId.pgType, Name.pgType, TypoLocalDateTime.pgType, PgTypes.text, PgTypes.int4, PgTypes.text.opt(), TypoLocalDateTime.pgType, ProductreviewRow.apply, row => Array[Object](row.productreviewid.asInstanceOf[Object], row.productid.asInstanceOf[Object], row.reviewername.asInstanceOf[Object], row.reviewdate.asInstanceOf[Object], row.emailaddress.asInstanceOf[Object], row.rating.asInstanceOf[Object], row.comments.asInstanceOf[Object], row.modifieddate.asInstanceOf[Object]))

  given pgText: PgText[ProductreviewRow] = PgText.from(`_rowParser`)
}