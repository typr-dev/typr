/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.production.productproductphoto

import adventureworks.customtypes.Defaulted
import adventureworks.customtypes.TypoLocalDateTime
import adventureworks.production.product.ProductId
import adventureworks.production.productphoto.ProductphotoId
import adventureworks.public.Flag
import typo.runtime.PgText
import typo.runtime.RowParser
import typo.runtime.RowParsers

/** Table: production.productproductphoto
 * Cross-reference table mapping products and product photos.
 * Composite primary key: productid, productphotoid
 */
case class ProductproductphotoRow(
  /** Product identification number. Foreign key to Product.ProductID.
   * Points to [[adventureworks.production.product.ProductRow.productid]]
   */
  productid: ProductId,
  /** Product photo identification number. Foreign key to ProductPhoto.ProductPhotoID.
   * Points to [[adventureworks.production.productphoto.ProductphotoRow.productphotoid]]
   */
  productphotoid: ProductphotoId,
  /** 0 = Photo is not the principal image. 1 = Photo is the principal image.
   * Default: false
   */
  primary: Flag,
  /** Default: now() */
  modifieddate: TypoLocalDateTime
) {
  def compositeId: ProductproductphotoId = new ProductproductphotoId(productid, productphotoid)

  def id: ProductproductphotoId = this.compositeId

  def toUnsavedRow(
    primary: Defaulted[Flag] = Defaulted.Provided(this.primary),
    modifieddate: Defaulted[TypoLocalDateTime] = Defaulted.Provided(this.modifieddate)
  ): ProductproductphotoRowUnsaved = {
    new ProductproductphotoRowUnsaved(
      productid,
      productphotoid,
      primary,
      modifieddate
    )
  }
}

object ProductproductphotoRow {
  val `_rowParser`: RowParser[ProductproductphotoRow] = RowParsers.of(ProductId.pgType, ProductphotoId.pgType, Flag.pgType, TypoLocalDateTime.pgType, ProductproductphotoRow.apply, row => Array[Object](row.productid.asInstanceOf[Object], row.productphotoid.asInstanceOf[Object], row.primary.asInstanceOf[Object], row.modifieddate.asInstanceOf[Object]))

  def apply(
    compositeId: ProductproductphotoId,
    primary: Flag,
    modifieddate: TypoLocalDateTime
  ): ProductproductphotoRow = {
    new ProductproductphotoRow(
      compositeId.productid,
      compositeId.productphotoid,
      primary,
      modifieddate
    )
  }

  given pgText: PgText[ProductproductphotoRow] = PgText.from(`_rowParser`)
}