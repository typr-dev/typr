/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public.flaff

import adventureworks.public.ShortText
import anorm.ParameterMetaData
import anorm.ToParameterValue
import anorm.ToStatement
import typr.dsl.ForeignKey
import typr.dsl.Path
import typr.dsl.RelationStructure
import typr.dsl.SqlExpr
import typr.dsl.SqlExpr.CompositeIn
import typr.dsl.SqlExpr.CompositeIn.TuplePart
import typr.dsl.SqlExpr.Const.As.as
import typr.dsl.SqlExpr.FieldLike
import typr.dsl.SqlExpr.IdField
import typr.dsl.SqlExpr.OptField

trait FlaffFields {
  def code: IdField[ShortText, FlaffRow]
  def anotherCode: IdField[String, FlaffRow]
  def someNumber: IdField[Int, FlaffRow]
  def specifier: IdField[ShortText, FlaffRow]
  def parentspecifier: OptField[ShortText, FlaffRow]
  def fkFlaff: ForeignKey[FlaffFields, FlaffRow] =
    ForeignKey[FlaffFields, FlaffRow]("public.flaff_parent_fk", Nil)
      .withColumnPair(code, _.code)
      .withColumnPair(anotherCode, _.anotherCode)
      .withColumnPair(someNumber, _.someNumber)
      .withColumnPair(parentspecifier, _.specifier)
  def compositeIdIs(compositeId: FlaffId): SqlExpr[Boolean] =
    code.isEqual(compositeId.code).and(anotherCode.isEqual(compositeId.anotherCode)).and(someNumber.isEqual(compositeId.someNumber)).and(specifier.isEqual(compositeId.specifier))
  def compositeIdIn(compositeIds: Array[FlaffId]): SqlExpr[Boolean] =
    new CompositeIn(compositeIds)(TuplePart[FlaffId](code)(_.code)(using as[Array[ShortText]](ToParameterValue(null, ShortText.arrayToStatement), adventureworks.arrayParameterMetaData(ShortText.parameterMetadata)), implicitly), TuplePart[FlaffId](anotherCode)(_.anotherCode)(using as[Array[String]](ToParameterValue(null, ToStatement.arrayToParameter(ParameterMetaData.StringParameterMetaData)), adventureworks.arrayParameterMetaData(ParameterMetaData.StringParameterMetaData)), implicitly), TuplePart[FlaffId](someNumber)(_.someNumber)(using as[Array[Int]](ToParameterValue(null, adventureworks.IntArrayToStatement), adventureworks.arrayParameterMetaData(ParameterMetaData.IntParameterMetaData)), implicitly), TuplePart[FlaffId](specifier)(_.specifier)(using as[Array[ShortText]](ToParameterValue(null, ShortText.arrayToStatement), adventureworks.arrayParameterMetaData(ShortText.parameterMetadata)), implicitly))

}

object FlaffFields {
  lazy val structure: RelationStructure[FlaffFields, FlaffRow] =
    new Impl(List())

  private final class Impl(val _path: List[Path])
    extends RelationStructure[FlaffFields, FlaffRow] {

    override lazy val fields: FlaffFields = new FlaffFields {
      override def code = IdField[ShortText, FlaffRow](_path, "code", None, Some("text"), x => x.code, (row, value) => row.copy(code = value))
      override def anotherCode = IdField[String, FlaffRow](_path, "another_code", None, None, x => x.anotherCode, (row, value) => row.copy(anotherCode = value))
      override def someNumber = IdField[Int, FlaffRow](_path, "some_number", None, Some("int4"), x => x.someNumber, (row, value) => row.copy(someNumber = value))
      override def specifier = IdField[ShortText, FlaffRow](_path, "specifier", None, Some("text"), x => x.specifier, (row, value) => row.copy(specifier = value))
      override def parentspecifier = OptField[ShortText, FlaffRow](_path, "parentspecifier", None, Some("text"), x => x.parentspecifier, (row, value) => row.copy(parentspecifier = value))
    }

    override lazy val columns: List[FieldLike[?, FlaffRow]] =
      List[FieldLike[?, FlaffRow]](fields.code, fields.anotherCode, fields.someNumber, fields.specifier, fields.parentspecifier)

    override def copy(path: List[Path]): Impl =
      new Impl(path)
  }
}
