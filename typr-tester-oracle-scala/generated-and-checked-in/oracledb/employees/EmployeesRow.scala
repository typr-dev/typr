/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package oracledb.employees

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDateTime
import java.util.Optional
import oracledb.MoneyT
import oracledb.customtypes.Defaulted
import oracledb.departments.DepartmentsId
import typr.runtime.OracleTypes
import typr.runtime.RowParser
import typr.runtime.RowParsers

/** Table: EMPLOYEES
 * Composite primary key: EMP_NUMBER, EMP_SUFFIX
 */
case class EmployeesRow(
  @JsonProperty("EMP_NUMBER") empNumber: java.math.BigDecimal,
  @JsonProperty("EMP_SUFFIX") empSuffix: String,
  /** Points to [[oracledb.departments.DepartmentsRow.deptCode]] */
  @JsonProperty("DEPT_CODE") deptCode: String,
  /** Points to [[oracledb.departments.DepartmentsRow.deptRegion]] */
  @JsonProperty("DEPT_REGION") deptRegion: String,
  @JsonProperty("EMP_NAME") empName: String,
  @JsonProperty("SALARY") salary: Optional[MoneyT],
  /** Default: SYSDATE  */
  @JsonProperty("HIRE_DATE") hireDate: LocalDateTime
) {
  def compositeId: EmployeesId = new EmployeesId(empNumber, empSuffix)

  def id: EmployeesId = this.compositeId

  def extractDepartmentsId: DepartmentsId = new DepartmentsId(deptCode = deptCode, deptRegion = deptRegion)

  def toUnsavedRow(hireDate: Defaulted[LocalDateTime] = Defaulted.Provided(this.hireDate)): EmployeesRowUnsaved = {
    new EmployeesRowUnsaved(
      empNumber,
      empSuffix,
      deptCode,
      deptRegion,
      empName,
      salary,
      hireDate
    )
  }
}

object EmployeesRow {
  val `_rowParser`: RowParser[EmployeesRow] = RowParsers.of(OracleTypes.number, OracleTypes.varchar2, OracleTypes.varchar2, OracleTypes.varchar2, OracleTypes.varchar2, MoneyT.oracleType.opt(), OracleTypes.date, EmployeesRow.apply, row => Array[Any](row.empNumber, row.empSuffix, row.deptCode, row.deptRegion, row.empName, row.salary, row.hireDate))

  def apply(
    compositeId: EmployeesId,
    deptCode: String,
    deptRegion: String,
    empName: String,
    salary: Optional[MoneyT],
    hireDate: LocalDateTime
  ): EmployeesRow = {
    new EmployeesRow(
      compositeId.empNumber,
      compositeId.empSuffix,
      deptCode,
      deptRegion,
      empName,
      salary,
      hireDate
    )
  }
}