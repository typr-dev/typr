/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.order_history

import java.time.LocalDateTime
import kotlin.collections.List
import testdb.orders.OrdersFields
import testdb.orders.OrdersId
import testdb.orders.OrdersRow
import typr.dsl.FieldsExpr
import typr.dsl.Path
import typr.dsl.SqlExpr.FieldLike
import typr.kotlindsl.ForeignKey
import typr.kotlindsl.RelationStructure
import typr.kotlindsl.SqlExpr.Field
import typr.kotlindsl.SqlExpr.IdField
import typr.kotlindsl.SqlExpr.OptField
import typr.runtime.MariaTypes
import typr.runtime.RowParser

interface OrderHistoryFields : FieldsExpr<OrderHistoryRow> {
  abstract fun changeReason(): OptField<String, OrderHistoryRow>

  abstract fun changedBy(): OptField<String, OrderHistoryRow>

  abstract override fun columns(): List<FieldLike<*, OrderHistoryRow>>

  abstract fun createdAt(): Field<LocalDateTime, OrderHistoryRow>

  fun fkOrders(): ForeignKey<OrdersFields, OrdersRow> = ForeignKey.of<OrdersFields, OrdersRow>("fk_oh_order").withColumnPair<OrdersId>(orderId(), OrdersFields::orderId)

  abstract fun historyId(): IdField<OrderHistoryId, OrderHistoryRow>

  abstract fun metadata(): OptField<String, OrderHistoryRow>

  abstract fun newStatus(): Field<String, OrderHistoryRow>

  abstract fun orderId(): Field<OrdersId, OrderHistoryRow>

  abstract fun previousStatus(): OptField<String, OrderHistoryRow>

  override fun rowParser(): RowParser<OrderHistoryRow> = OrderHistoryRow._rowParser.underlying

  companion object {
    data class Impl(val _path: List<Path>) : OrderHistoryFields, RelationStructure<OrderHistoryFields, OrderHistoryRow> {
      override fun historyId(): IdField<OrderHistoryId, OrderHistoryRow> = IdField<OrderHistoryId, OrderHistoryRow>(_path, "history_id", OrderHistoryRow::historyId, null, null, { row, value -> row.copy(historyId = value) }, OrderHistoryId.pgType)

      override fun orderId(): Field<OrdersId, OrderHistoryRow> = Field<OrdersId, OrderHistoryRow>(_path, "order_id", OrderHistoryRow::orderId, null, null, { row, value -> row.copy(orderId = value) }, OrdersId.pgType)

      override fun previousStatus(): OptField<String, OrderHistoryRow> = OptField<String, OrderHistoryRow>(_path, "previous_status", OrderHistoryRow::previousStatus, null, null, { row, value -> row.copy(previousStatus = value) }, MariaTypes.text)

      override fun newStatus(): Field<String, OrderHistoryRow> = Field<String, OrderHistoryRow>(_path, "new_status", OrderHistoryRow::newStatus, null, null, { row, value -> row.copy(newStatus = value) }, MariaTypes.text)

      override fun changedBy(): OptField<String, OrderHistoryRow> = OptField<String, OrderHistoryRow>(_path, "changed_by", OrderHistoryRow::changedBy, null, null, { row, value -> row.copy(changedBy = value) }, MariaTypes.varchar)

      override fun changeReason(): OptField<String, OrderHistoryRow> = OptField<String, OrderHistoryRow>(_path, "change_reason", OrderHistoryRow::changeReason, null, null, { row, value -> row.copy(changeReason = value) }, MariaTypes.varchar)

      override fun metadata(): OptField<String, OrderHistoryRow> = OptField<String, OrderHistoryRow>(_path, "metadata", OrderHistoryRow::metadata, null, null, { row, value -> row.copy(metadata = value) }, MariaTypes.longtext)

      override fun createdAt(): Field<LocalDateTime, OrderHistoryRow> = Field<LocalDateTime, OrderHistoryRow>(_path, "created_at", OrderHistoryRow::createdAt, null, null, { row, value -> row.copy(createdAt = value) }, MariaTypes.datetime)

      override fun _path(): List<Path> = _path

      override fun columns(): List<FieldLike<*, OrderHistoryRow>> = listOf(this.historyId().underlying, this.orderId().underlying, this.previousStatus().underlying, this.newStatus().underlying, this.changedBy().underlying, this.changeReason().underlying, this.metadata().underlying, this.createdAt().underlying)

      override fun withPaths(_path: List<Path>): RelationStructure<OrderHistoryFields, OrderHistoryRow> = Impl(_path)
    }

    val structure: Impl = Impl(emptyList<typr.dsl.Path>())
  }
}