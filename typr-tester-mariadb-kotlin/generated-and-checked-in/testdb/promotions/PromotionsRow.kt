/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.promotions

import com.fasterxml.jackson.annotation.JsonProperty
import java.math.BigDecimal
import java.time.LocalDateTime
import testdb.customtypes.Defaulted
import typr.data.maria.MariaSet
import typr.kotlindsl.KotlinDbTypes
import typr.kotlindsl.RowParser
import typr.kotlindsl.RowParsers
import typr.kotlindsl.nullable
import typr.runtime.MariaTypes

/** Table: promotions
  * Primary key: promotion_id
  */
data class PromotionsRow(
  /** 
    * AUTO_INCREMENT
    */
  @JsonProperty("promotion_id") val promotionId: PromotionsId,
  /**  */
  val code: String,
  /**  */
  val name: String,
  /** 
    * Default: NULL
    */
  val description: String?,
  /**  */
  @JsonProperty("discount_type") val discountType: String,
  /**  */
  @JsonProperty("discount_value") val discountValue: BigDecimal,
  /** 
    * Default: NULL
    */
  @JsonProperty("min_order_amount") val minOrderAmount: BigDecimal?,
  /** 
    * Default: NULL
    */
  @JsonProperty("max_uses") val maxUses: Long?,
  /** 
    * Default: 0
    */
  @JsonProperty("uses_count") val usesCount: Long,
  /** 
    * Default: NULL
    */
  @JsonProperty("max_uses_per_customer") val maxUsesPerCustomer: Short?,
  /** 
    * Default: NULL
    */
  @JsonProperty("applicable_to") val applicableTo: MariaSet?,
  /** Complex eligibility rules
    * Default: NULL
    */
  @JsonProperty("rules_json") val rulesJson: String?,
  /**  */
  @JsonProperty("valid_from") val validFrom: LocalDateTime,
  /**  */
  @JsonProperty("valid_to") val validTo: LocalDateTime,
  /** 
    * Default: 1
    */
  @JsonProperty("is_active") val isActive: Boolean,
  /** 
    * Default: current_timestamp()
    */
  @JsonProperty("created_at") val createdAt: LocalDateTime
) {
  fun id(): PromotionsId = promotionId

  fun toUnsavedRow(
    description: Defaulted<String?>,
    minOrderAmount: Defaulted<BigDecimal?>,
    maxUses: Defaulted<Long?>,
    usesCount: Defaulted<Long>,
    maxUsesPerCustomer: Defaulted<Short?>,
    applicableTo: Defaulted<MariaSet?>,
    rulesJson: Defaulted<String?>,
    isActive: Defaulted<Boolean>,
    createdAt: Defaulted<LocalDateTime>
  ): PromotionsRowUnsaved = PromotionsRowUnsaved(code, name, discountType, discountValue, validFrom, validTo, description, minOrderAmount, maxUses, usesCount, maxUsesPerCustomer, applicableTo, rulesJson, isActive, createdAt)

  companion object {
    val _rowParser: RowParser<PromotionsRow> = RowParsers.of(PromotionsId.pgType, MariaTypes.varchar, MariaTypes.varchar, MariaTypes.text.nullable(), MariaTypes.text, KotlinDbTypes.MariaTypes.numeric, KotlinDbTypes.MariaTypes.numeric.nullable(), KotlinDbTypes.MariaTypes.intUnsigned.nullable(), KotlinDbTypes.MariaTypes.intUnsigned, KotlinDbTypes.MariaTypes.tinyintUnsigned.nullable(), MariaTypes.set.nullable(), MariaTypes.longtext.nullable(), MariaTypes.datetime, MariaTypes.datetime, KotlinDbTypes.MariaTypes.bool, MariaTypes.datetime, { t0, t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12, t13, t14, t15 -> PromotionsRow(t0, t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12, t13, t14, t15) }, { row -> arrayOf<Any?>(row.promotionId, row.code, row.name, row.description, row.discountType, row.discountValue, row.minOrderAmount, row.maxUses, row.usesCount, row.maxUsesPerCustomer, row.applicableTo, row.rulesJson, row.validFrom, row.validTo, row.isActive, row.createdAt) })
  }
}