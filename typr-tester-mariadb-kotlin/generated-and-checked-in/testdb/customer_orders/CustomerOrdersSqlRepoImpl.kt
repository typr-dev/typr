/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.customer_orders

import java.sql.Connection
import kotlin.collections.List
import testdb.customers.CustomersId
import typr.kotlindsl.Fragment
import typr.kotlindsl.nullable
import typr.runtime.MariaTypes

class CustomerOrdersSqlRepoImpl() : CustomerOrdersSqlRepo {
  override fun apply(
    customerId: /* user-picked */ CustomersId,
    orderStatus: String?,
    c: Connection
  ): List<CustomerOrdersSqlRow> = Fragment.interpolate(Fragment.lit("-- Query customers with their orders\nSELECT c.customer_id,\n       c.email,\n       c.first_name,\n       c.last_name,\n       c.tier,\n       o.order_id,\n       o.order_number,\n       o.order_status,\n       o.total_amount,\n       o.ordered_at\nFROM customers c\nLEFT JOIN orders o ON c.customer_id = o.customer_id\nWHERE c.customer_id = "), Fragment.encode(CustomersId.pgType, customerId), Fragment.lit("\n  AND ("), Fragment.encode(MariaTypes.text.nullable(), orderStatus), Fragment.lit(" IS NULL OR o.order_status = "), Fragment.encode(MariaTypes.text.nullable(), orderStatus), Fragment.lit(")\n")).query(CustomerOrdersSqlRow._rowParser.all()).runUnchecked(c)
}