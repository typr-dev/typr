/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.production.location

import adventureworks.customtypes.Defaulted
import adventureworks.public.Name
import java.time.LocalDateTime
import typo.runtime.PgText
import typo.runtime.PgTypes
import typo.runtime.RowParser
import typo.runtime.RowParsers

/** Table: production.location
 * Product inventory and manufacturing locations.
 * Primary key: locationid
 */
case class LocationRow(
  /** Primary key for Location records.
   * Default: nextval('production.location_locationid_seq'::regclass)
   */
  locationid: LocationId,
  /** Location description. */
  name: Name,
  /** Standard hourly cost of the manufacturing location.
   * Default: 0.00
   * Constraint CK_Location_CostRate affecting columns costrate: ((costrate >= 0.00))
   */
  costrate: java.math.BigDecimal,
  /** Work capacity (in hours) of the manufacturing location.
   * Default: 0.00
   * Constraint CK_Location_Availability affecting columns availability: ((availability >= 0.00))
   */
  availability: java.math.BigDecimal,
  /** Default: now() */
  modifieddate: LocalDateTime
) {
  def id: LocationId = locationid

  def toUnsavedRow(
    locationid: Defaulted[LocationId],
    costrate: Defaulted[java.math.BigDecimal] = Defaulted.Provided(this.costrate),
    availability: Defaulted[java.math.BigDecimal] = Defaulted.Provided(this.availability),
    modifieddate: Defaulted[LocalDateTime] = Defaulted.Provided(this.modifieddate)
  ): LocationRowUnsaved = {
    new LocationRowUnsaved(
      name,
      locationid,
      costrate,
      availability,
      modifieddate
    )
  }
}

object LocationRow {
  val `_rowParser`: RowParser[LocationRow] = RowParsers.of(LocationId.pgType, Name.pgType, PgTypes.numeric, PgTypes.numeric, PgTypes.timestamp, LocationRow.apply, row => Array[Any](row.locationid, row.name, row.costrate, row.availability, row.modifieddate))

  given pgText: PgText[LocationRow] = PgText.from(`_rowParser`)
}