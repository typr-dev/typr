/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.order_items

import com.fasterxml.jackson.annotation.JsonProperty
import java.math.BigDecimal
import testdb.customtypes.Defaulted
import typr.kotlindsl.KotlinDbTypes
import typr.kotlindsl.RowParser
import typr.kotlindsl.RowParsers
import typr.runtime.DuckDbTypes

/** Table: order_items
  * Composite primary key: order_id, product_id
  */
data class OrderItemsRow(
  @JsonProperty("order_id") val orderId: Int,
  @JsonProperty("product_id") val productId: Int,
  /** Default: 1 */
  val quantity: Int,
  @JsonProperty("unit_price") val unitPrice: BigDecimal
) {
  fun compositeId(): OrderItemsId = OrderItemsId(orderId, productId)

  fun id(): OrderItemsId = this.compositeId()

  fun toUnsavedRow(quantity: Defaulted<Int>): OrderItemsRowUnsaved = OrderItemsRowUnsaved(orderId, productId, unitPrice, quantity)

  companion object {
    val _rowParser: RowParser<OrderItemsRow> = RowParsers.of(KotlinDbTypes.DuckDbTypes.integer, KotlinDbTypes.DuckDbTypes.integer, KotlinDbTypes.DuckDbTypes.integer, DuckDbTypes.numeric, { t0, t1, t2, t3 -> OrderItemsRow(t0, t1, t2, t3) }, { row -> arrayOf<Any?>(row.orderId, row.productId, row.quantity, row.unitPrice) })

    fun apply(
      compositeId: OrderItemsId,
      quantity: Int,
      unitPrice: BigDecimal
    ): OrderItemsRow = OrderItemsRow(compositeId.orderId, compositeId.productId, quantity, unitPrice)
  }
}