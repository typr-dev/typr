/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.insert_order_with_items

import java.math.BigDecimal
import java.sql.Connection
import java.time.LocalDate
import testdb.customers.CustomersId
import typr.kotlindsl.Fragment
import typr.kotlindsl.KotlinDbTypes
import typr.kotlindsl.nullable
import typr.runtime.DuckDbTypes

class InsertOrderWithItemsSqlRepoImpl() : InsertOrderWithItemsSqlRepo {
  override fun apply(
    orderId: Int,
    customerId: /* user-picked */ CustomersId,
    orderDate: LocalDate?,
    totalAmount: BigDecimal?,
    status: String?,
    c: Connection
  ): Int = Fragment.interpolate(Fragment.lit("-- Insert a new order and return the generated data\n-- Tests: INSERT with RETURNING, multiple columns, foreign keys, DEFAULT values\n\nINSERT INTO orders (order_id, customer_id, order_date, total_amount, status)\nVALUES (\n    CAST("), Fragment.encode(KotlinDbTypes.DuckDbTypes.integer, orderId), Fragment.lit(" AS INTEGER),\n    CAST("), Fragment.encode(CustomersId.duckDbType, customerId), Fragment.lit(" AS INTEGER),\n    CAST("), Fragment.encode(DuckDbTypes.date.nullable(), orderDate), Fragment.lit(" AS DATE),\n    CAST("), Fragment.encode(DuckDbTypes.numeric.nullable(), totalAmount), Fragment.lit(" AS DECIMAL),\n    CAST("), Fragment.encode(DuckDbTypes.text.nullable(), status), Fragment.lit(" AS VARCHAR)\n)\nRETURNING\n    order_id,\n    customer_id,\n    order_date,\n    total_amount,\n    status")).update().runUnchecked(c)
}