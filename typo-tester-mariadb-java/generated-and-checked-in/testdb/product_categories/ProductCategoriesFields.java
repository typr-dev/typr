/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.product_categories;

import java.util.List;
import java.util.Optional;
import testdb.categories.CategoriesFields;
import testdb.categories.CategoriesId;
import testdb.categories.CategoriesRow;
import testdb.products.ProductsFields;
import testdb.products.ProductsId;
import testdb.products.ProductsRow;
import typo.dsl.ForeignKey;
import typo.dsl.Path;
import typo.dsl.SqlExpr;
import typo.dsl.SqlExpr.CompositeIn;
import typo.dsl.SqlExpr.CompositeIn.Part;
import typo.dsl.SqlExpr.Field;
import typo.dsl.SqlExpr.FieldLike;
import typo.dsl.SqlExpr.IdField;
import typo.dsl.Structure.Relation;
import typo.runtime.MariaTypes;

public interface ProductCategoriesFields {
  final class Impl extends Relation<ProductCategoriesFields, ProductCategoriesRow> {
    Impl(List<Path> path) {
      super(path);
    }

    @Override
    public ProductCategoriesFields fields() {
      return new ProductCategoriesFields() {
               @Override
               public IdField<ProductsId, ProductCategoriesRow> productId() {
                 return new IdField<ProductsId, ProductCategoriesRow>(_path, "product_id", ProductCategoriesRow::productId, Optional.empty(), Optional.empty(), (row, value) -> row.withProductId(value), ProductsId.pgType);
               };
               @Override
               public IdField<CategoriesId, ProductCategoriesRow> categoryId() {
                 return new IdField<CategoriesId, ProductCategoriesRow>(_path, "category_id", ProductCategoriesRow::categoryId, Optional.empty(), Optional.empty(), (row, value) -> row.withCategoryId(value), CategoriesId.pgType);
               };
               @Override
               public Field<Boolean, ProductCategoriesRow> isPrimary() {
                 return new Field<Boolean, ProductCategoriesRow>(_path, "is_primary", ProductCategoriesRow::isPrimary, Optional.empty(), Optional.empty(), (row, value) -> row.withIsPrimary(value), MariaTypes.bool);
               };
               @Override
               public Field<Short, ProductCategoriesRow> sortOrder() {
                 return new Field<Short, ProductCategoriesRow>(_path, "sort_order", ProductCategoriesRow::sortOrder, Optional.empty(), Optional.empty(), (row, value) -> row.withSortOrder(value), MariaTypes.smallint);
               };
             };
    };

    @Override
    public List<FieldLike<?, ProductCategoriesRow>> columns() {
      return List.of(this.fields().productId(), this.fields().categoryId(), this.fields().isPrimary(), this.fields().sortOrder());
    };

    @Override
    public Impl copy(List<Path> path) {
      return new Impl(path);
    };
  };

  static Relation<ProductCategoriesFields, ProductCategoriesRow> structure() {
    return new Impl(List.of());
  };

  IdField<ProductsId, ProductCategoriesRow> productId();

  IdField<CategoriesId, ProductCategoriesRow> categoryId();

  Field<Boolean, ProductCategoriesRow> isPrimary();

  Field<Short, ProductCategoriesRow> sortOrder();

  default ForeignKey<CategoriesFields, CategoriesRow> fkCategories() {
    return ForeignKey.<CategoriesFields, CategoriesRow>of("fk_pc_category").withColumnPair(categoryId(), CategoriesFields::categoryId);
  };

  default ForeignKey<ProductsFields, ProductsRow> fkProducts() {
    return ForeignKey.<ProductsFields, ProductsRow>of("fk_pc_product").withColumnPair(productId(), ProductsFields::productId);
  };

  default SqlExpr<Boolean> compositeIdIs(ProductCategoriesId compositeId) {
    return SqlExpr.all(productId().isEqual(compositeId.productId()), categoryId().isEqual(compositeId.categoryId()));
  };

  default SqlExpr<Boolean> compositeIdIn(List<ProductCategoriesId> compositeIds) {
    return new CompositeIn(List.of(new Part<ProductsId, ProductCategoriesId, ProductCategoriesRow>(productId(), ProductCategoriesId::productId, ProductsId.pgType), new Part<CategoriesId, ProductCategoriesId, ProductCategoriesRow>(categoryId(), ProductCategoriesId::categoryId, CategoriesId.pgType)), compositeIds);
  };
}