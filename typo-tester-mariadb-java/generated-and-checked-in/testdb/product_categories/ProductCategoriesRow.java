/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.product_categories;

import com.fasterxml.jackson.annotation.JsonProperty;
import testdb.categories.CategoriesId;
import testdb.customtypes.Defaulted;
import testdb.products.ProductsId;
import typo.runtime.MariaTypes;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;

/** Table: product_categories Composite primary key: product_id, category_id */
public record ProductCategoriesRow(
    /** Points to {@link testdb.products.ProductsRow#productId()} */
    @JsonProperty("product_id") ProductsId productId,
    /** Points to {@link testdb.categories.CategoriesRow#categoryId()} */
    @JsonProperty("category_id") CategoriesId categoryId,
    /** Default: 0 */
    @JsonProperty("is_primary") Boolean isPrimary,
    /** Default: 0 */
    @JsonProperty("sort_order") Short sortOrder) {
  /** Points to {@link testdb.products.ProductsRow#productId()} */
  public ProductCategoriesRow withProductId(ProductsId productId) {
    return new ProductCategoriesRow(productId, categoryId, isPrimary, sortOrder);
  }
  ;

  /** Points to {@link testdb.categories.CategoriesRow#categoryId()} */
  public ProductCategoriesRow withCategoryId(CategoriesId categoryId) {
    return new ProductCategoriesRow(productId, categoryId, isPrimary, sortOrder);
  }
  ;

  /** Default: 0 */
  public ProductCategoriesRow withIsPrimary(Boolean isPrimary) {
    return new ProductCategoriesRow(productId, categoryId, isPrimary, sortOrder);
  }
  ;

  /** Default: 0 */
  public ProductCategoriesRow withSortOrder(Short sortOrder) {
    return new ProductCategoriesRow(productId, categoryId, isPrimary, sortOrder);
  }
  ;

  public static RowParser<ProductCategoriesRow> _rowParser =
      RowParsers.of(
          ProductsId.pgType,
          CategoriesId.pgType,
          MariaTypes.bool,
          MariaTypes.smallint,
          ProductCategoriesRow::new,
          row ->
              new Object[] {row.productId(), row.categoryId(), row.isPrimary(), row.sortOrder()});
  ;

  public static ProductCategoriesRow apply(
      ProductCategoriesId compositeId, Boolean isPrimary, Short sortOrder) {
    return new ProductCategoriesRow(
        compositeId.productId(), compositeId.categoryId(), isPrimary, sortOrder);
  }
  ;

  public ProductCategoriesId compositeId() {
    return new ProductCategoriesId(productId, categoryId);
  }
  ;

  public ProductCategoriesId id() {
    return this.compositeId();
  }
  ;

  public ProductCategoriesRowUnsaved toUnsavedRow(
      Defaulted<Boolean> isPrimary, Defaulted<Short> sortOrder) {
    return new ProductCategoriesRowUnsaved(productId, categoryId, isPrimary, sortOrder);
  }
  ;
}
