/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.product_categories;

import com.fasterxml.jackson.annotation.JsonProperty;
import testdb.categories.CategoriesId;
import testdb.customtypes.Defaulted;
import testdb.customtypes.Defaulted.UseDefault;
import testdb.products.ProductsId;
import typo.runtime.MariaText;
import typo.runtime.MariaTypes;

/** This class corresponds to a row in table `product_categories` which has not been persisted yet */
public record ProductCategoriesRowUnsaved(
  /** 
    * Points to {@link testdb.products.ProductsRow#productId()}
    */
  @JsonProperty("product_id") ProductsId productId,
  /** 
    * Points to {@link testdb.categories.CategoriesRow#categoryId()}
    */
  @JsonProperty("category_id") CategoriesId categoryId,
  /** Default: 0

    */
  @JsonProperty("is_primary") Defaulted<Boolean> isPrimary,
  /** Default: 0

    */
  @JsonProperty("sort_order") Defaulted<Short> sortOrder
) {
  public ProductCategoriesRowUnsaved(
    /** 
      * Points to {@link testdb.products.ProductsRow#productId()}
      */
    @JsonProperty("product_id") ProductsId productId,
    /** 
      * Points to {@link testdb.categories.CategoriesRow#categoryId()}
      */
    @JsonProperty("category_id") CategoriesId categoryId
  ) {
    this(productId, categoryId, new UseDefault<>(), new UseDefault<>());
  };

  /** 
    * Points to {@link testdb.products.ProductsRow#productId()}
    */
  public ProductCategoriesRowUnsaved withProductId(ProductsId productId) {
    return new ProductCategoriesRowUnsaved(productId, categoryId, isPrimary, sortOrder);
  };

  /** 
    * Points to {@link testdb.categories.CategoriesRow#categoryId()}
    */
  public ProductCategoriesRowUnsaved withCategoryId(CategoriesId categoryId) {
    return new ProductCategoriesRowUnsaved(productId, categoryId, isPrimary, sortOrder);
  };

  /** Default: 0

    */
  public ProductCategoriesRowUnsaved withIsPrimary(Defaulted<Boolean> isPrimary) {
    return new ProductCategoriesRowUnsaved(productId, categoryId, isPrimary, sortOrder);
  };

  /** Default: 0

    */
  public ProductCategoriesRowUnsaved withSortOrder(Defaulted<Short> sortOrder) {
    return new ProductCategoriesRowUnsaved(productId, categoryId, isPrimary, sortOrder);
  };

  static public MariaText<ProductCategoriesRowUnsaved> mariaText =
    MariaText.instance((row, sb) -> {
      ProductsId.pgType.mariaText().unsafeEncode(row.productId, sb);
      sb.append(MariaText.DELIMETER);
      CategoriesId.pgType.mariaText().unsafeEncode(row.categoryId, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.bool.mariaText()).unsafeEncode(row.isPrimary, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.smallint.mariaText()).unsafeEncode(row.sortOrder, sb);
    });

  public ProductCategoriesRow toRow(
    java.util.function.Supplier<Boolean> isPrimaryDefault,
    java.util.function.Supplier<Short> sortOrderDefault
  ) {
    return new ProductCategoriesRow(productId, categoryId, isPrimary.getOrElse(isPrimaryDefault), sortOrder.getOrElse(sortOrderDefault));
  };
}