/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.price_tiers;

import com.fasterxml.jackson.annotation.JsonProperty;
import java.math.BigDecimal;
import testdb.customtypes.Defaulted;
import typo.runtime.MariaText;
import typo.runtime.MariaTypes;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;

/** Table: price_tiers
  * Primary key: tier_id
  */
public record PriceTiersRow(
  /** 
    * AUTO_INCREMENT
    */
  @JsonProperty("tier_id") PriceTiersId tierId,
  /**  */
  String name,
  /** 
    * Default: 1
    */
  @JsonProperty("min_quantity") Long minQuantity,
  /**  */
  @JsonProperty("discount_type") String discountType,
  /**  */
  @JsonProperty("discount_value") BigDecimal discountValue
) {
  /** 
    * AUTO_INCREMENT
    */
  public PriceTiersRow withTierId(PriceTiersId tierId) {
    return new PriceTiersRow(tierId, name, minQuantity, discountType, discountValue);
  };

  /**  */
  public PriceTiersRow withName(String name) {
    return new PriceTiersRow(tierId, name, minQuantity, discountType, discountValue);
  };

  /** 
    * Default: 1
    */
  public PriceTiersRow withMinQuantity(Long minQuantity) {
    return new PriceTiersRow(tierId, name, minQuantity, discountType, discountValue);
  };

  /**  */
  public PriceTiersRow withDiscountType(String discountType) {
    return new PriceTiersRow(tierId, name, minQuantity, discountType, discountValue);
  };

  /**  */
  public PriceTiersRow withDiscountValue(BigDecimal discountValue) {
    return new PriceTiersRow(tierId, name, minQuantity, discountType, discountValue);
  };

  static RowParser<PriceTiersRow> _rowParser = RowParsers.of(PriceTiersId.pgType, MariaTypes.varchar, MariaTypes.intUnsigned, MariaTypes.text, MariaTypes.decimal, PriceTiersRow::new, row -> new Object[]{row.tierId(), row.name(), row.minQuantity(), row.discountType(), row.discountValue()});;

  static public MariaText<PriceTiersRow> mariaText =
    MariaText.from(_rowParser);

  public PriceTiersId id() {
    return tierId;
  };

  public PriceTiersRowUnsaved toUnsavedRow(Defaulted<Long> minQuantity) {
    return new PriceTiersRowUnsaved(name, discountType, discountValue, minQuantity);
  };
}