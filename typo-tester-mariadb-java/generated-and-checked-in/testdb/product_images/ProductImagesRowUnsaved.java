/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.product_images;

import com.fasterxml.jackson.annotation.JsonProperty;
import java.util.Optional;
import testdb.customtypes.Defaulted;
import testdb.customtypes.Defaulted.UseDefault;
import testdb.products.ProductsId;
import typo.runtime.MariaText;
import typo.runtime.MariaTypes;

/** This class corresponds to a row in table `product_images` which has not been persisted yet */
public record ProductImagesRowUnsaved(
  /** 
    * Points to {@link testdb.products.ProductsRow#productId()}
    */
  @JsonProperty("product_id") ProductsId productId,
  /**  */
  @JsonProperty("image_url") String imageUrl,
  /** Default: NULL

    */
  @JsonProperty("thumbnail_url") Defaulted<Optional<String>> thumbnailUrl,
  /** Default: NULL

    */
  @JsonProperty("alt_text") Defaulted<Optional<String>> altText,
  /** Default: 0

    */
  @JsonProperty("sort_order") Defaulted<Short> sortOrder,
  /** Default: 0

    */
  @JsonProperty("is_primary") Defaulted<Boolean> isPrimary,
  /** Default: NULL
    * Optional embedded image data
    */
  @JsonProperty("image_data") Defaulted<Optional<byte[]>> imageData
) {
  public ProductImagesRowUnsaved(
    /** 
      * Points to {@link testdb.products.ProductsRow#productId()}
      */
    @JsonProperty("product_id") ProductsId productId,
    /**  */
    @JsonProperty("image_url") String imageUrl
  ) {
    this(productId, imageUrl, new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>());
  };

  /** 
    * Points to {@link testdb.products.ProductsRow#productId()}
    */
  public ProductImagesRowUnsaved withProductId(ProductsId productId) {
    return new ProductImagesRowUnsaved(productId, imageUrl, thumbnailUrl, altText, sortOrder, isPrimary, imageData);
  };

  /**  */
  public ProductImagesRowUnsaved withImageUrl(String imageUrl) {
    return new ProductImagesRowUnsaved(productId, imageUrl, thumbnailUrl, altText, sortOrder, isPrimary, imageData);
  };

  /** Default: NULL

    */
  public ProductImagesRowUnsaved withThumbnailUrl(Defaulted<Optional<String>> thumbnailUrl) {
    return new ProductImagesRowUnsaved(productId, imageUrl, thumbnailUrl, altText, sortOrder, isPrimary, imageData);
  };

  /** Default: NULL

    */
  public ProductImagesRowUnsaved withAltText(Defaulted<Optional<String>> altText) {
    return new ProductImagesRowUnsaved(productId, imageUrl, thumbnailUrl, altText, sortOrder, isPrimary, imageData);
  };

  /** Default: 0

    */
  public ProductImagesRowUnsaved withSortOrder(Defaulted<Short> sortOrder) {
    return new ProductImagesRowUnsaved(productId, imageUrl, thumbnailUrl, altText, sortOrder, isPrimary, imageData);
  };

  /** Default: 0

    */
  public ProductImagesRowUnsaved withIsPrimary(Defaulted<Boolean> isPrimary) {
    return new ProductImagesRowUnsaved(productId, imageUrl, thumbnailUrl, altText, sortOrder, isPrimary, imageData);
  };

  /** Default: NULL
    * Optional embedded image data
    */
  public ProductImagesRowUnsaved withImageData(Defaulted<Optional<byte[]>> imageData) {
    return new ProductImagesRowUnsaved(productId, imageUrl, thumbnailUrl, altText, sortOrder, isPrimary, imageData);
  };

  static public MariaText<ProductImagesRowUnsaved> mariaText =
    MariaText.instance((row, sb) -> {
      ProductsId.pgType.mariaText().unsafeEncode(row.productId, sb);
      sb.append(MariaText.DELIMETER);
      MariaTypes.varchar.mariaText().unsafeEncode(row.imageUrl, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.varchar.opt().mariaText()).unsafeEncode(row.thumbnailUrl, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.varchar.opt().mariaText()).unsafeEncode(row.altText, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.tinyintUnsigned.mariaText()).unsafeEncode(row.sortOrder, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.bool.mariaText()).unsafeEncode(row.isPrimary, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.longblob.opt().mariaText()).unsafeEncode(row.imageData, sb);
    });

  public ProductImagesRow toRow(
    java.util.function.Supplier<Optional<String>> thumbnailUrlDefault,
    java.util.function.Supplier<Optional<String>> altTextDefault,
    java.util.function.Supplier<Short> sortOrderDefault,
    java.util.function.Supplier<Boolean> isPrimaryDefault,
    java.util.function.Supplier<Optional<byte[]>> imageDataDefault,
    java.util.function.Supplier<ProductImagesId> imageIdDefault
  ) {
    return new ProductImagesRow(imageIdDefault.get(), productId, imageUrl, thumbnailUrl.getOrElse(thumbnailUrlDefault), altText.getOrElse(altTextDefault), sortOrder.getOrElse(sortOrderDefault), isPrimary.getOrElse(isPrimaryDefault), imageData.getOrElse(imageDataDefault));
  };
}