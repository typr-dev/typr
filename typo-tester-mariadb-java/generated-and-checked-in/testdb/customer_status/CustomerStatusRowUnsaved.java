/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.customer_status;

import com.fasterxml.jackson.annotation.JsonProperty;
import testdb.customtypes.Defaulted;
import testdb.customtypes.Defaulted.UseDefault;
import typo.runtime.MariaText;
import typo.runtime.MariaTypes;

/** This class corresponds to a row in table `customer_status` which has not been persisted yet */
public record CustomerStatusRowUnsaved(
  /**  */
  @JsonProperty("status_code") CustomerStatusId statusCode,
  /**  */
  String description,
  /** Default: 1

    */
  @JsonProperty("is_active") Defaulted<Boolean> isActive
) {
  public CustomerStatusRowUnsaved(
    /**  */
    @JsonProperty("status_code") CustomerStatusId statusCode,
    /**  */
    String description
  ) {
    this(statusCode, description, new UseDefault<>());
  };

  /**  */
  public CustomerStatusRowUnsaved withStatusCode(CustomerStatusId statusCode) {
    return new CustomerStatusRowUnsaved(statusCode, description, isActive);
  };

  /**  */
  public CustomerStatusRowUnsaved withDescription(String description) {
    return new CustomerStatusRowUnsaved(statusCode, description, isActive);
  };

  /** Default: 1

    */
  public CustomerStatusRowUnsaved withIsActive(Defaulted<Boolean> isActive) {
    return new CustomerStatusRowUnsaved(statusCode, description, isActive);
  };

  static public MariaText<CustomerStatusRowUnsaved> mariaText =
    MariaText.instance((row, sb) -> {
      CustomerStatusId.pgType.mariaText().unsafeEncode(row.statusCode, sb);
      sb.append(MariaText.DELIMETER);
      MariaTypes.varchar.mariaText().unsafeEncode(row.description, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.bool.mariaText()).unsafeEncode(row.isActive, sb);
    });

  public CustomerStatusRow toRow(java.util.function.Supplier<Boolean> isActiveDefault) {
    return new CustomerStatusRow(statusCode, description, isActive.getOrElse(isActiveDefault));
  };
}