/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.customers;

import com.fasterxml.jackson.annotation.JsonProperty;
import java.time.LocalDateTime;
import java.util.Optional;
import testdb.customer_status.CustomerStatusId;
import testdb.customtypes.Defaulted;
import testdb.customtypes.Defaulted.UseDefault;
import typo.data.maria.MariaSet;
import typo.runtime.MariaText;
import typo.runtime.MariaTypes;

/** This class corresponds to a row in table `customers` which has not been persisted yet */
public record CustomersRowUnsaved(
  /**  */
  String email,
  /**  */
  @JsonProperty("password_hash") byte[] passwordHash,
  /**  */
  @JsonProperty("first_name") String firstName,
  /**  */
  @JsonProperty("last_name") String lastName,
  /** Default: NULL

    */
  Defaulted<Optional<String>> phone,
  /** Default: 'pending'
    * Points to {@link testdb.customer_status.CustomerStatusRow#statusCode()}
    */
  Defaulted<CustomerStatusId> status,
  /** Default: 'bronze'

    */
  Defaulted<String> tier,
  /** Default: NULL

    */
  Defaulted<Optional<String>> preferences,
  /** Default: NULL

    */
  @JsonProperty("marketing_flags") Defaulted<Optional<MariaSet>> marketingFlags,
  /** Default: NULL

    */
  Defaulted<Optional<String>> notes,
  /** Default: current_timestamp(6)

    */
  @JsonProperty("created_at") Defaulted<LocalDateTime> createdAt,
  /** Default: current_timestamp(6)

    */
  @JsonProperty("updated_at") Defaulted<LocalDateTime> updatedAt,
  /** Default: NULL

    */
  @JsonProperty("last_login_at") Defaulted<Optional<LocalDateTime>> lastLoginAt
) {
  public CustomersRowUnsaved(
    /**  */
    String email,
    /**  */
    @JsonProperty("password_hash") byte[] passwordHash,
    /**  */
    @JsonProperty("first_name") String firstName,
    /**  */
    @JsonProperty("last_name") String lastName
  ) {
    this(email, passwordHash, firstName, lastName, new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>(), new UseDefault<>());
  };

  /**  */
  public CustomersRowUnsaved withEmail(String email) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  /**  */
  public CustomersRowUnsaved withPasswordHash(byte[] passwordHash) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  /**  */
  public CustomersRowUnsaved withFirstName(String firstName) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  /**  */
  public CustomersRowUnsaved withLastName(String lastName) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  /** Default: NULL

    */
  public CustomersRowUnsaved withPhone(Defaulted<Optional<String>> phone) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  /** Default: 'pending'
    * Points to {@link testdb.customer_status.CustomerStatusRow#statusCode()}
    */
  public CustomersRowUnsaved withStatus(Defaulted<CustomerStatusId> status) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  /** Default: 'bronze'

    */
  public CustomersRowUnsaved withTier(Defaulted<String> tier) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  /** Default: NULL

    */
  public CustomersRowUnsaved withPreferences(Defaulted<Optional<String>> preferences) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  /** Default: NULL

    */
  public CustomersRowUnsaved withMarketingFlags(Defaulted<Optional<MariaSet>> marketingFlags) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  /** Default: NULL

    */
  public CustomersRowUnsaved withNotes(Defaulted<Optional<String>> notes) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  /** Default: current_timestamp(6)

    */
  public CustomersRowUnsaved withCreatedAt(Defaulted<LocalDateTime> createdAt) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  /** Default: current_timestamp(6)

    */
  public CustomersRowUnsaved withUpdatedAt(Defaulted<LocalDateTime> updatedAt) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  /** Default: NULL

    */
  public CustomersRowUnsaved withLastLoginAt(Defaulted<Optional<LocalDateTime>> lastLoginAt) {
    return new CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt);
  };

  static public MariaText<CustomersRowUnsaved> mariaText =
    MariaText.instance((row, sb) -> {
      MariaTypes.varchar.mariaText().unsafeEncode(row.email, sb);
      sb.append(MariaText.DELIMETER);
      MariaTypes.binary.mariaText().unsafeEncode(row.passwordHash, sb);
      sb.append(MariaText.DELIMETER);
      MariaTypes.varchar.mariaText().unsafeEncode(row.firstName, sb);
      sb.append(MariaText.DELIMETER);
      MariaTypes.varchar.mariaText().unsafeEncode(row.lastName, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.varchar.opt().mariaText()).unsafeEncode(row.phone, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(CustomerStatusId.pgType.mariaText()).unsafeEncode(row.status, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.text.mariaText()).unsafeEncode(row.tier, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.longtext.opt().mariaText()).unsafeEncode(row.preferences, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.set.opt().mariaText()).unsafeEncode(row.marketingFlags, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.text.opt().mariaText()).unsafeEncode(row.notes, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.datetime.mariaText()).unsafeEncode(row.createdAt, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.datetime.mariaText()).unsafeEncode(row.updatedAt, sb);
      sb.append(MariaText.DELIMETER);
      Defaulted.mariaText(MariaTypes.datetime.opt().mariaText()).unsafeEncode(row.lastLoginAt, sb);
    });

  public CustomersRow toRow(
    java.util.function.Supplier<Optional<String>> phoneDefault,
    java.util.function.Supplier<CustomerStatusId> statusDefault,
    java.util.function.Supplier<String> tierDefault,
    java.util.function.Supplier<Optional<String>> preferencesDefault,
    java.util.function.Supplier<Optional<MariaSet>> marketingFlagsDefault,
    java.util.function.Supplier<Optional<String>> notesDefault,
    java.util.function.Supplier<LocalDateTime> createdAtDefault,
    java.util.function.Supplier<LocalDateTime> updatedAtDefault,
    java.util.function.Supplier<Optional<LocalDateTime>> lastLoginAtDefault,
    java.util.function.Supplier<CustomersId> customerIdDefault
  ) {
    return new CustomersRow(customerIdDefault.get(), email, passwordHash, firstName, lastName, phone.getOrElse(phoneDefault), status.getOrElse(statusDefault), tier.getOrElse(tierDefault), preferences.getOrElse(preferencesDefault), marketingFlags.getOrElse(marketingFlagsDefault), notes.getOrElse(notesDefault), createdAt.getOrElse(createdAtDefault), updatedAt.getOrElse(updatedAtDefault), lastLoginAt.getOrElse(lastLoginAtDefault));
  };
}