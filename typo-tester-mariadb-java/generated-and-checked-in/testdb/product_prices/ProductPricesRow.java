/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.product_prices;

import com.fasterxml.jackson.annotation.JsonProperty;
import java.math.BigDecimal;
import java.time.LocalDate;
import java.util.Optional;
import testdb.customtypes.Defaulted;
import testdb.price_tiers.PriceTiersId;
import testdb.products.ProductsId;
import typo.runtime.MariaText;
import typo.runtime.MariaTypes;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;

/** Table: product_prices
  * Primary key: price_id
  */
public record ProductPricesRow(
  /** 
    * AUTO_INCREMENT
    */
  @JsonProperty("price_id") ProductPricesId priceId,
  /** 
    * Points to {@link testdb.products.ProductsRow#productId()}
    */
  @JsonProperty("product_id") ProductsId productId,
  /** 
    * Default: NULL
    * Points to {@link testdb.price_tiers.PriceTiersRow#tierId()}
    */
  @JsonProperty("tier_id") Optional<PriceTiersId> tierId,
  /**  */
  BigDecimal price,
  /** 
    * Default: 'USD'
    */
  @JsonProperty("currency_code") String currencyCode,
  /**  */
  @JsonProperty("valid_from") LocalDate validFrom,
  /** 
    * Default: NULL
    */
  @JsonProperty("valid_to") Optional<LocalDate> validTo
) {
  /** 
    * AUTO_INCREMENT
    */
  public ProductPricesRow withPriceId(ProductPricesId priceId) {
    return new ProductPricesRow(priceId, productId, tierId, price, currencyCode, validFrom, validTo);
  };

  /** 
    * Points to {@link testdb.products.ProductsRow#productId()}
    */
  public ProductPricesRow withProductId(ProductsId productId) {
    return new ProductPricesRow(priceId, productId, tierId, price, currencyCode, validFrom, validTo);
  };

  /** 
    * Default: NULL
    * Points to {@link testdb.price_tiers.PriceTiersRow#tierId()}
    */
  public ProductPricesRow withTierId(Optional<PriceTiersId> tierId) {
    return new ProductPricesRow(priceId, productId, tierId, price, currencyCode, validFrom, validTo);
  };

  /**  */
  public ProductPricesRow withPrice(BigDecimal price) {
    return new ProductPricesRow(priceId, productId, tierId, price, currencyCode, validFrom, validTo);
  };

  /** 
    * Default: 'USD'
    */
  public ProductPricesRow withCurrencyCode(String currencyCode) {
    return new ProductPricesRow(priceId, productId, tierId, price, currencyCode, validFrom, validTo);
  };

  /**  */
  public ProductPricesRow withValidFrom(LocalDate validFrom) {
    return new ProductPricesRow(priceId, productId, tierId, price, currencyCode, validFrom, validTo);
  };

  /** 
    * Default: NULL
    */
  public ProductPricesRow withValidTo(Optional<LocalDate> validTo) {
    return new ProductPricesRow(priceId, productId, tierId, price, currencyCode, validFrom, validTo);
  };

  static RowParser<ProductPricesRow> _rowParser = RowParsers.of(ProductPricesId.pgType, ProductsId.pgType, PriceTiersId.pgType.opt(), MariaTypes.decimal, MariaTypes.char_, MariaTypes.date, MariaTypes.date.opt(), ProductPricesRow::new, row -> new Object[]{row.priceId(), row.productId(), row.tierId(), row.price(), row.currencyCode(), row.validFrom(), row.validTo()});;

  static public MariaText<ProductPricesRow> mariaText =
    MariaText.from(_rowParser);

  public ProductPricesId id() {
    return priceId;
  };

  public ProductPricesRowUnsaved toUnsavedRow(
    Defaulted<Optional<PriceTiersId>> tierId,
    Defaulted<String> currencyCode,
    Defaulted<Optional<LocalDate>> validTo
  ) {
    return new ProductPricesRowUnsaved(productId, price, validFrom, tierId, currencyCode, validTo);
  };
}