/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.person_dynamic

import java.sql.Connection
import java.util.Optional
import typr.runtime.Fragment
import typr.runtime.PgTypes
import typr.runtime.Fragment.interpolate

class PersonDynamicSqlRepoImpl extends PersonDynamicSqlRepo {
  override def apply(firstName: Optional[String])(using c: Connection): java.util.List[PersonDynamicSqlRow] = {
    interpolate(Fragment.lit("""SELECT p.title, p.firstname, p.middlename, p.lastname
    FROM person.person p
    WHERE """), Fragment.encode(PgTypes.text.opt(), firstName), Fragment.lit("::text IS NULL OR p.firstname = "), Fragment.encode(PgTypes.text.opt(), firstName), Fragment.lit("""
    """)).query(PersonDynamicSqlRow.`_rowParser`.all()).runUnchecked(c)
  }
}