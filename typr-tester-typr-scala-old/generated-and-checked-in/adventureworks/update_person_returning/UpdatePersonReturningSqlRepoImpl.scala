/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.update_person_returning

import java.sql.Connection
import java.time.LocalDateTime
import java.util.Optional
import typr.runtime.Fragment
import typr.runtime.PgTypes
import typr.runtime.Fragment.interpolate

class UpdatePersonReturningSqlRepoImpl extends UpdatePersonReturningSqlRepo {
  override def apply(
    suffix: /* nullability unknown */ Optional[String],
    cutoff: /* nullability unknown */ Optional[LocalDateTime]
  )(using c: Connection): java.util.List[UpdatePersonReturningSqlRow] = {
    interpolate(Fragment.lit("""update person.person
    set firstname = firstname || '-' || """), Fragment.encode(PgTypes.text.opt(), suffix), Fragment.lit("""
    where modifieddate < """), Fragment.encode(PgTypes.timestamp.opt(), cutoff), Fragment.lit("""::timestamp
    returning firstname, modifieddate""")).query(UpdatePersonReturningSqlRow.`_rowParser`.all()).runUnchecked(c)
  }
}