/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.update_person

import java.sql.Connection
import java.time.LocalDateTime
import java.util.Optional
import typr.runtime.Fragment
import typr.runtime.PgTypes
import typr.runtime.Fragment.interpolate

class UpdatePersonSqlRepoImpl extends UpdatePersonSqlRepo {
  override def apply(
    suffix: String,
    cutoff: Optional[LocalDateTime]
  )(using c: Connection): Integer = {
    interpolate(Fragment.lit("""update person.person
    set firstname = firstname || '-' || """), Fragment.encode(PgTypes.text, suffix), Fragment.lit("""
    where modifieddate < """), Fragment.encode(PgTypes.timestamp.opt(), cutoff), Fragment.lit("::timestamp")).update().runUnchecked(c)
  }
}