/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public.only_pk_columns

import typr.dsl.PGType
import typr.dsl.Path
import typr.dsl.RelationStructure
import typr.dsl.SqlExpr
import typr.dsl.SqlExpr.CompositeIn
import typr.dsl.SqlExpr.CompositeIn.TuplePart
import typr.dsl.SqlExpr.Const.As.as
import typr.dsl.SqlExpr.FieldLike
import typr.dsl.SqlExpr.IdField

trait OnlyPkColumnsFields {
  def keyColumn1: IdField[String, OnlyPkColumnsRow]
  def keyColumn2: IdField[Int, OnlyPkColumnsRow]
  def compositeIdIs(compositeId: OnlyPkColumnsId): SqlExpr[Boolean] =
    keyColumn1.isEqual(compositeId.keyColumn1).and(keyColumn2.isEqual(compositeId.keyColumn2))
  def compositeIdIn(compositeIds: Array[OnlyPkColumnsId]): SqlExpr[Boolean] =
    new CompositeIn(compositeIds)(TuplePart[OnlyPkColumnsId](keyColumn1)(_.keyColumn1)(using as[Array[String]](using adventureworks.StringArrayEncoder, PGType.forArray(using PGType.PGTypeString)), implicitly), TuplePart[OnlyPkColumnsId](keyColumn2)(_.keyColumn2)(using as[Array[Int]](using adventureworks.IntArrayEncoder, PGType.forArray(using PGType.PGTypeInt)), implicitly))

}

object OnlyPkColumnsFields {
  lazy val structure: RelationStructure[OnlyPkColumnsFields, OnlyPkColumnsRow] =
    new Impl(List())

  private final class Impl(val _path: List[Path])
    extends RelationStructure[OnlyPkColumnsFields, OnlyPkColumnsRow] {

    override lazy val fields: OnlyPkColumnsFields = new OnlyPkColumnsFields {
      override def keyColumn1 = IdField[String, OnlyPkColumnsRow](_path, "key_column_1", None, None, x => x.keyColumn1, (row, value) => row.copy(keyColumn1 = value))
      override def keyColumn2 = IdField[Int, OnlyPkColumnsRow](_path, "key_column_2", None, Some("int4"), x => x.keyColumn2, (row, value) => row.copy(keyColumn2 = value))
    }

    override lazy val columns: List[FieldLike[?, OnlyPkColumnsRow]] =
      List[FieldLike[?, OnlyPkColumnsRow]](fields.keyColumn1, fields.keyColumn2)

    override def copy(path: List[Path]): Impl =
      new Impl(path)
  }
}
