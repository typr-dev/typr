/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.sales.personcreditcard

import adventureworks.customtypes.TypoLocalDateTime
import adventureworks.person.businessentity.BusinessentityId
import adventureworks.person.person.PersonFields
import adventureworks.person.person.PersonRow
import adventureworks.sales.creditcard.CreditcardFields
import adventureworks.sales.creditcard.CreditcardRow
import adventureworks.userdefined.CustomCreditcardId
import typr.dsl.ForeignKey
import typr.dsl.PGType
import typr.dsl.Path
import typr.dsl.RelationStructure
import typr.dsl.SqlExpr
import typr.dsl.SqlExpr.CompositeIn
import typr.dsl.SqlExpr.CompositeIn.TuplePart
import typr.dsl.SqlExpr.Const.As.as
import typr.dsl.SqlExpr.Field
import typr.dsl.SqlExpr.FieldLike
import typr.dsl.SqlExpr.IdField

trait PersoncreditcardFields {
  def businessentityid: IdField[BusinessentityId, PersoncreditcardRow]
  def creditcardid: IdField[/* user-picked */ CustomCreditcardId, PersoncreditcardRow]
  def modifieddate: Field[TypoLocalDateTime, PersoncreditcardRow]
  def fkCreditcard: ForeignKey[CreditcardFields, CreditcardRow] =
    ForeignKey[CreditcardFields, CreditcardRow]("sales.FK_PersonCreditCard_CreditCard_CreditCardID", Nil)
      .withColumnPair(creditcardid, _.creditcardid)
  def fkPersonPerson: ForeignKey[PersonFields, PersonRow] =
    ForeignKey[PersonFields, PersonRow]("sales.FK_PersonCreditCard_Person_BusinessEntityID", Nil)
      .withColumnPair(businessentityid, _.businessentityid)
  def compositeIdIs(compositeId: PersoncreditcardId): SqlExpr[Boolean] =
    businessentityid.isEqual(compositeId.businessentityid).and(creditcardid.isEqual(compositeId.creditcardid))
  def compositeIdIn(compositeIds: Array[PersoncreditcardId]): SqlExpr[Boolean] =
    new CompositeIn(compositeIds)(TuplePart[PersoncreditcardId](businessentityid)(_.businessentityid)(using as[Array[BusinessentityId]](using BusinessentityId.arrayJdbcEncoder, PGType.forArray(using BusinessentityId.pgType)), implicitly), TuplePart[PersoncreditcardId](creditcardid)(_.creditcardid)(using as[Array[/* user-picked */ CustomCreditcardId]](using CustomCreditcardId.arrayJdbcEncoder, PGType.forArray(using CustomCreditcardId.pgType)), implicitly))

}

object PersoncreditcardFields {
  lazy val structure: RelationStructure[PersoncreditcardFields, PersoncreditcardRow] =
    new Impl(List())

  private final class Impl(val _path: List[Path])
    extends RelationStructure[PersoncreditcardFields, PersoncreditcardRow] {

    override lazy val fields: PersoncreditcardFields = new PersoncreditcardFields {
      override def businessentityid = IdField[BusinessentityId, PersoncreditcardRow](_path, "businessentityid", None, Some("int4"), x => x.businessentityid, (row, value) => row.copy(businessentityid = value))
      override def creditcardid = IdField[/* user-picked */ CustomCreditcardId, PersoncreditcardRow](_path, "creditcardid", None, Some("int4"), x => x.creditcardid, (row, value) => row.copy(creditcardid = value))
      override def modifieddate = Field[TypoLocalDateTime, PersoncreditcardRow](_path, "modifieddate", Some("text"), Some("timestamp"), x => x.modifieddate, (row, value) => row.copy(modifieddate = value))
    }

    override lazy val columns: List[FieldLike[?, PersoncreditcardRow]] =
      List[FieldLike[?, PersoncreditcardRow]](fields.businessentityid, fields.creditcardid, fields.modifieddate)

    override def copy(path: List[Path]): Impl =
      new Impl(path)
  }
}
