/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.production.productlistpricehistory;

import adventureworks.customtypes.Defaulted;
import adventureworks.production.product.ProductId;
import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.util.Optional;
import typr.runtime.PgText;
import typr.runtime.PgTypes;
import typr.runtime.RowParser;
import typr.runtime.RowParsers;

/**
 * Table: production.productlistpricehistory Changes in the list price of a product over time.
 * Composite primary key: productid, startdate
 */
public record ProductlistpricehistoryRow(
    /**
     * Product identification number. Foreign key to Product.ProductID Points to {@link
     * adventureworks.production.product.ProductRow#productid()}
     */
    ProductId productid,
    /**
     * List price start date. Constraint CK_ProductListPriceHistory_EndDate affecting columns
     * enddate, startdate: (((enddate >= startdate) OR (enddate IS NULL)))
     */
    LocalDateTime startdate,
    /**
     * List price end date Constraint CK_ProductListPriceHistory_EndDate affecting columns enddate,
     * startdate: (((enddate >= startdate) OR (enddate IS NULL)))
     */
    Optional<LocalDateTime> enddate,
    /**
     * Product list price. Constraint CK_ProductListPriceHistory_ListPrice affecting columns
     * listprice: ((listprice > 0.00))
     */
    BigDecimal listprice,
    /** Default: now() */
    LocalDateTime modifieddate) {
  /**
   * Product identification number. Foreign key to Product.ProductID Points to {@link
   * adventureworks.production.product.ProductRow#productid()}
   */
  public ProductlistpricehistoryRow withProductid(ProductId productid) {
    return new ProductlistpricehistoryRow(productid, startdate, enddate, listprice, modifieddate);
  }
  ;

  /**
   * List price start date. Constraint CK_ProductListPriceHistory_EndDate affecting columns enddate,
   * startdate: (((enddate >= startdate) OR (enddate IS NULL)))
   */
  public ProductlistpricehistoryRow withStartdate(LocalDateTime startdate) {
    return new ProductlistpricehistoryRow(productid, startdate, enddate, listprice, modifieddate);
  }
  ;

  /**
   * List price end date Constraint CK_ProductListPriceHistory_EndDate affecting columns enddate,
   * startdate: (((enddate >= startdate) OR (enddate IS NULL)))
   */
  public ProductlistpricehistoryRow withEnddate(Optional<LocalDateTime> enddate) {
    return new ProductlistpricehistoryRow(productid, startdate, enddate, listprice, modifieddate);
  }
  ;

  /**
   * Product list price. Constraint CK_ProductListPriceHistory_ListPrice affecting columns
   * listprice: ((listprice > 0.00))
   */
  public ProductlistpricehistoryRow withListprice(BigDecimal listprice) {
    return new ProductlistpricehistoryRow(productid, startdate, enddate, listprice, modifieddate);
  }
  ;

  /** Default: now() */
  public ProductlistpricehistoryRow withModifieddate(LocalDateTime modifieddate) {
    return new ProductlistpricehistoryRow(productid, startdate, enddate, listprice, modifieddate);
  }
  ;

  public static RowParser<ProductlistpricehistoryRow> _rowParser =
      RowParsers.of(
          ProductId.pgType,
          PgTypes.timestamp,
          PgTypes.timestamp.opt(),
          PgTypes.numeric,
          PgTypes.timestamp,
          ProductlistpricehistoryRow::new,
          row ->
              new Object[] {
                row.productid(), row.startdate(), row.enddate(), row.listprice(), row.modifieddate()
              });
  ;

  public static ProductlistpricehistoryRow apply(
      ProductlistpricehistoryId compositeId,
      Optional<LocalDateTime> enddate,
      BigDecimal listprice,
      LocalDateTime modifieddate) {
    return new ProductlistpricehistoryRow(
        compositeId.productid(), compositeId.startdate(), enddate, listprice, modifieddate);
  }
  ;

  public static PgText<ProductlistpricehistoryRow> pgText = PgText.from(_rowParser);

  public ProductlistpricehistoryId compositeId() {
    return new ProductlistpricehistoryId(productid, startdate);
  }
  ;

  public ProductlistpricehistoryId id() {
    return this.compositeId();
  }
  ;

  public ProductlistpricehistoryRowUnsaved toUnsavedRow(Defaulted<LocalDateTime> modifieddate) {
    return new ProductlistpricehistoryRowUnsaved(
        productid, startdate, enddate, listprice, modifieddate);
  }
  ;
}
