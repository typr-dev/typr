/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.person.personphone;

import adventureworks.person.businessentity.BusinessentityId;
import adventureworks.person.person.PersonFields;
import adventureworks.person.person.PersonRow;
import adventureworks.person.phonenumbertype.PhonenumbertypeFields;
import adventureworks.person.phonenumbertype.PhonenumbertypeId;
import adventureworks.person.phonenumbertype.PhonenumbertypeRow;
import adventureworks.public_.Phone;
import java.time.LocalDateTime;
import java.util.List;
import java.util.Optional;
import typr.dsl.FieldsExpr;
import typr.dsl.ForeignKey;
import typr.dsl.Path;
import typr.dsl.RelationStructure;
import typr.dsl.SqlExpr;
import typr.dsl.SqlExpr.CompositeIn;
import typr.dsl.SqlExpr.CompositeIn.Part;
import typr.dsl.SqlExpr.Field;
import typr.dsl.SqlExpr.FieldLike;
import typr.dsl.SqlExpr.IdField;
import typr.runtime.PgTypes;
import typr.runtime.RowParser;

public interface PersonphoneFields extends FieldsExpr<PersonphoneRow> {
  record Impl(List<Path> _path)
      implements PersonphoneFields, RelationStructure<PersonphoneFields, PersonphoneRow> {
    @Override
    public IdField<BusinessentityId, PersonphoneRow> businessentityid() {
      return new IdField<BusinessentityId, PersonphoneRow>(
          _path,
          "businessentityid",
          PersonphoneRow::businessentityid,
          Optional.empty(),
          Optional.of("int4"),
          (row, value) -> row.withBusinessentityid(value),
          BusinessentityId.pgType);
    }
    ;

    @Override
    public IdField<Phone, PersonphoneRow> phonenumber() {
      return new IdField<Phone, PersonphoneRow>(
          _path,
          "phonenumber",
          PersonphoneRow::phonenumber,
          Optional.empty(),
          Optional.of("varchar"),
          (row, value) -> row.withPhonenumber(value),
          Phone.pgType);
    }
    ;

    @Override
    public IdField<PhonenumbertypeId, PersonphoneRow> phonenumbertypeid() {
      return new IdField<PhonenumbertypeId, PersonphoneRow>(
          _path,
          "phonenumbertypeid",
          PersonphoneRow::phonenumbertypeid,
          Optional.empty(),
          Optional.of("int4"),
          (row, value) -> row.withPhonenumbertypeid(value),
          PhonenumbertypeId.pgType);
    }
    ;

    @Override
    public Field<LocalDateTime, PersonphoneRow> modifieddate() {
      return new Field<LocalDateTime, PersonphoneRow>(
          _path,
          "modifieddate",
          PersonphoneRow::modifieddate,
          Optional.empty(),
          Optional.of("timestamp"),
          (row, value) -> row.withModifieddate(value),
          PgTypes.timestamp);
    }
    ;

    @Override
    public List<FieldLike<?, PersonphoneRow>> columns() {
      return java.util.List.of(
          this.businessentityid(),
          this.phonenumber(),
          this.phonenumbertypeid(),
          this.modifieddate());
    }
    ;

    @Override
    public RelationStructure<PersonphoneFields, PersonphoneRow> withPaths(List<Path> _path) {
      return new Impl(_path);
    }
    ;
  }
  ;

  static Impl structure() {
    return new Impl(java.util.Collections.emptyList());
  }
  ;

  IdField<BusinessentityId, PersonphoneRow> businessentityid();

  IdField<Phone, PersonphoneRow> phonenumber();

  IdField<PhonenumbertypeId, PersonphoneRow> phonenumbertypeid();

  Field<LocalDateTime, PersonphoneRow> modifieddate();

  default ForeignKey<PersonFields, PersonRow> fkPerson() {
    return ForeignKey.<PersonFields, PersonRow>of("person.FK_PersonPhone_Person_BusinessEntityID")
        .<BusinessentityId>withColumnPair(businessentityid(), PersonFields::businessentityid);
  }
  ;

  default ForeignKey<PhonenumbertypeFields, PhonenumbertypeRow> fkPhonenumbertype() {
    return ForeignKey.<PhonenumbertypeFields, PhonenumbertypeRow>of(
            "person.FK_PersonPhone_PhoneNumberType_PhoneNumberTypeID")
        .<PhonenumbertypeId>withColumnPair(
            phonenumbertypeid(), PhonenumbertypeFields::phonenumbertypeid);
  }
  ;

  default SqlExpr<Boolean> compositeIdIs(PersonphoneId compositeId) {
    return SqlExpr.all(
        businessentityid().isEqual(compositeId.businessentityid()),
        phonenumber().isEqual(compositeId.phonenumber()),
        phonenumbertypeid().isEqual(compositeId.phonenumbertypeid()));
  }
  ;

  default SqlExpr<Boolean> compositeIdIn(List<PersonphoneId> compositeIds) {
    return new CompositeIn(
        List.of(
            new Part<BusinessentityId, PersonphoneId, PersonphoneRow>(
                businessentityid(), PersonphoneId::businessentityid, BusinessentityId.pgType),
            new Part<Phone, PersonphoneId, PersonphoneRow>(
                phonenumber(), PersonphoneId::phonenumber, Phone.pgType),
            new Part<PhonenumbertypeId, PersonphoneId, PersonphoneRow>(
                phonenumbertypeid(), PersonphoneId::phonenumbertypeid, PhonenumbertypeId.pgType)),
        compositeIds);
  }
  ;

  @Override
  List<FieldLike<?, PersonphoneRow>> columns();

  @Override
  default RowParser<PersonphoneRow> rowParser() {
    return PersonphoneRow._rowParser;
  }
  ;
}
