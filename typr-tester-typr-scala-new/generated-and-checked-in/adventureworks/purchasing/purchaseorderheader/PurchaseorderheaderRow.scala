/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.purchasing.purchaseorderheader

import adventureworks.customtypes.Defaulted
import adventureworks.person.businessentity.BusinessentityId
import adventureworks.purchasing.shipmethod.ShipmethodId
import java.time.LocalDateTime
import typr.runtime.PgText
import typr.runtime.PgTypes
import typr.scaladsl.PgTypeOps
import typr.scaladsl.RowParser
import typr.scaladsl.RowParsers
import typr.scaladsl.ScalaDbTypes

/** Table: purchasing.purchaseorderheader
 * General purchase order information. See PurchaseOrderDetail.
 * Primary key: purchaseorderid
 */
case class PurchaseorderheaderRow(
  /** Primary key.
   * Default: nextval('purchasing.purchaseorderheader_purchaseorderid_seq'::regclass)
   */
  purchaseorderid: PurchaseorderheaderId,
  /** Incremental number to track changes to the purchase order over time.
   * Default: 0
   */
  revisionnumber: Short,
  /** Order current status. 1 = Pending; 2 = Approved; 3 = Rejected; 4 = Complete
   * Default: 1
   * Constraint CK_PurchaseOrderHeader_Status affecting columns status: (((status >= 1) AND (status <= 4)))
   */
  status: Short,
  /** Employee who created the purchase order. Foreign key to Employee.BusinessEntityID.
   * Points to [[adventureworks.humanresources.employee.EmployeeRow.businessentityid]]
   */
  employeeid: BusinessentityId,
  /** Vendor with whom the purchase order is placed. Foreign key to Vendor.BusinessEntityID.
   * Points to [[adventureworks.purchasing.vendor.VendorRow.businessentityid]]
   */
  vendorid: BusinessentityId,
  /** Shipping method. Foreign key to ShipMethod.ShipMethodID.
   * Points to [[adventureworks.purchasing.shipmethod.ShipmethodRow.shipmethodid]]
   */
  shipmethodid: ShipmethodId,
  /** Purchase order creation date.
   * Default: now()
   * Constraint CK_PurchaseOrderHeader_ShipDate affecting columns orderdate, shipdate: (((shipdate >= orderdate) OR (shipdate IS NULL)))
   */
  orderdate: LocalDateTime,
  /** Estimated shipment date from the vendor.
   * Constraint CK_PurchaseOrderHeader_ShipDate affecting columns orderdate, shipdate: (((shipdate >= orderdate) OR (shipdate IS NULL)))
   */
  shipdate: Option[LocalDateTime],
  /** Purchase order subtotal. Computed as SUM(PurchaseOrderDetail.LineTotal)for the appropriate PurchaseOrderID.
   * Default: 0.00
   * Constraint CK_PurchaseOrderHeader_SubTotal affecting columns subtotal: ((subtotal >= 0.00))
   */
  subtotal: BigDecimal,
  /** Tax amount.
   * Default: 0.00
   * Constraint CK_PurchaseOrderHeader_TaxAmt affecting columns taxamt: ((taxamt >= 0.00))
   */
  taxamt: BigDecimal,
  /** Shipping cost.
   * Default: 0.00
   * Constraint CK_PurchaseOrderHeader_Freight affecting columns freight: ((freight >= 0.00))
   */
  freight: BigDecimal,
  /** Default: now() */
  modifieddate: LocalDateTime
) {
  def id: PurchaseorderheaderId = purchaseorderid

  def toUnsavedRow(
    purchaseorderid: Defaulted[PurchaseorderheaderId],
    revisionnumber: Defaulted[Short] = Defaulted.Provided(this.revisionnumber),
    status: Defaulted[Short] = Defaulted.Provided(this.status),
    orderdate: Defaulted[LocalDateTime] = Defaulted.Provided(this.orderdate),
    subtotal: Defaulted[BigDecimal] = Defaulted.Provided(this.subtotal),
    taxamt: Defaulted[BigDecimal] = Defaulted.Provided(this.taxamt),
    freight: Defaulted[BigDecimal] = Defaulted.Provided(this.freight),
    modifieddate: Defaulted[LocalDateTime] = Defaulted.Provided(this.modifieddate)
  ): PurchaseorderheaderRowUnsaved = {
    new PurchaseorderheaderRowUnsaved(
      employeeid,
      vendorid,
      shipmethodid,
      shipdate,
      purchaseorderid,
      revisionnumber,
      status,
      orderdate,
      subtotal,
      taxamt,
      freight,
      modifieddate
    )
  }
}

object PurchaseorderheaderRow {
  val `_rowParser`: RowParser[PurchaseorderheaderRow] = RowParsers.of(PurchaseorderheaderId.pgType, ScalaDbTypes.PgTypes.int2, ScalaDbTypes.PgTypes.int2, BusinessentityId.pgType, BusinessentityId.pgType, ShipmethodId.pgType, PgTypes.timestamp, PgTypes.timestamp.nullable, ScalaDbTypes.PgTypes.numeric, ScalaDbTypes.PgTypes.numeric, ScalaDbTypes.PgTypes.numeric, PgTypes.timestamp)(PurchaseorderheaderRow.apply)(row => Array[Any](row.purchaseorderid, row.revisionnumber, row.status, row.employeeid, row.vendorid, row.shipmethodid, row.orderdate, row.shipdate, row.subtotal, row.taxamt, row.freight, row.modifieddate))

  given pgText: PgText[PurchaseorderheaderRow] = PgText.from(`_rowParser`.underlying)
}