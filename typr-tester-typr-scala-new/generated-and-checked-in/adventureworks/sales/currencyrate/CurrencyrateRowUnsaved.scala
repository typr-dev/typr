/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.sales.currencyrate

import adventureworks.customtypes.Defaulted
import adventureworks.customtypes.Defaulted.UseDefault
import adventureworks.sales.currency.CurrencyId
import java.time.LocalDateTime
import typr.runtime.PgText
import typr.runtime.PgTypes
import typr.scaladsl.ScalaDbTypes

/** This class corresponds to a row in table `sales.currencyrate` which has not been persisted yet */
case class CurrencyrateRowUnsaved(
  /** Date and time the exchange rate was obtained. */
  currencyratedate: LocalDateTime,
  /** Exchange rate was converted from this currency code.
   * Points to [[adventureworks.sales.currency.CurrencyRow.currencycode]]
   */
  fromcurrencycode: CurrencyId,
  /** Exchange rate was converted to this currency code.
   * Points to [[adventureworks.sales.currency.CurrencyRow.currencycode]]
   */
  tocurrencycode: CurrencyId,
  /** Average exchange rate for the day. */
  averagerate: BigDecimal,
  /** Final exchange rate for the day. */
  endofdayrate: BigDecimal,
  /** Default: nextval('sales.currencyrate_currencyrateid_seq'::regclass)
   * Primary key for CurrencyRate records.
   */
  currencyrateid: Defaulted[CurrencyrateId] = new UseDefault(),
  /** Default: now() */
  modifieddate: Defaulted[LocalDateTime] = new UseDefault()
) {
  def toRow(
    currencyrateidDefault: => CurrencyrateId,
    modifieddateDefault: => LocalDateTime
  ): CurrencyrateRow = {
    new CurrencyrateRow(
      currencyrateid = currencyrateid.getOrElse(currencyrateidDefault),
      currencyratedate = currencyratedate,
      fromcurrencycode = fromcurrencycode,
      tocurrencycode = tocurrencycode,
      averagerate = averagerate,
      endofdayrate = endofdayrate,
      modifieddate = modifieddate.getOrElse(modifieddateDefault)
    )
  }
}

object CurrencyrateRowUnsaved {
  given pgText: PgText[CurrencyrateRowUnsaved] = PgText.instance((row, sb) => { PgTypes.timestamp.pgText.unsafeEncode(row.currencyratedate, sb); sb.append(PgText.DELIMETER); CurrencyId.pgType.pgText.unsafeEncode(row.fromcurrencycode, sb); sb.append(PgText.DELIMETER); CurrencyId.pgType.pgText.unsafeEncode(row.tocurrencycode, sb); sb.append(PgText.DELIMETER); ScalaDbTypes.PgTypes.numeric.pgText.unsafeEncode(row.averagerate, sb); sb.append(PgText.DELIMETER); ScalaDbTypes.PgTypes.numeric.pgText.unsafeEncode(row.endofdayrate, sb); sb.append(PgText.DELIMETER); Defaulted.pgText(using CurrencyrateId.pgType.pgText).unsafeEncode(row.currencyrateid, sb); sb.append(PgText.DELIMETER); Defaulted.pgText(using PgTypes.timestamp.pgText).unsafeEncode(row.modifieddate, sb) })
}