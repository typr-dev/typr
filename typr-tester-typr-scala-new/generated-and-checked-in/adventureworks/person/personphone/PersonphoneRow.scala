/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.person.personphone

import adventureworks.customtypes.Defaulted
import adventureworks.person.businessentity.BusinessentityId
import adventureworks.person.phonenumbertype.PhonenumbertypeId
import adventureworks.public.Phone
import java.time.LocalDateTime
import typr.runtime.PgText
import typr.runtime.PgTypes
import typr.scaladsl.RowParser
import typr.scaladsl.RowParsers

/** Table: person.personphone
 * Telephone number and type of a person.
 * Composite primary key: businessentityid, phonenumber, phonenumbertypeid
 */
case class PersonphoneRow(
  /** Business entity identification number. Foreign key to Person.BusinessEntityID.
   * Points to [[adventureworks.person.person.PersonRow.businessentityid]]
   */
  businessentityid: BusinessentityId,
  /** Telephone number identification number. */
  phonenumber: Phone,
  /** Kind of phone number. Foreign key to PhoneNumberType.PhoneNumberTypeID.
   * Points to [[adventureworks.person.phonenumbertype.PhonenumbertypeRow.phonenumbertypeid]]
   */
  phonenumbertypeid: PhonenumbertypeId,
  /** Default: now() */
  modifieddate: LocalDateTime
) {
  def compositeId: PersonphoneId = new PersonphoneId(businessentityid, phonenumber, phonenumbertypeid)

  def id: PersonphoneId = this.compositeId

  def toUnsavedRow(modifieddate: Defaulted[LocalDateTime] = Defaulted.Provided(this.modifieddate)): PersonphoneRowUnsaved = {
    new PersonphoneRowUnsaved(
      businessentityid,
      phonenumber,
      phonenumbertypeid,
      modifieddate
    )
  }
}

object PersonphoneRow {
  val `_rowParser`: RowParser[PersonphoneRow] = RowParsers.of(BusinessentityId.pgType, Phone.pgType, PhonenumbertypeId.pgType, PgTypes.timestamp)(PersonphoneRow.apply)(row => Array[Any](row.businessentityid, row.phonenumber, row.phonenumbertypeid, row.modifieddate))

  def apply(
    compositeId: PersonphoneId,
    modifieddate: LocalDateTime
  ): PersonphoneRow = {
    new PersonphoneRow(
      compositeId.businessentityid,
      compositeId.phonenumber,
      compositeId.phonenumbertypeid,
      modifieddate
    )
  }

  given pgText: PgText[PersonphoneRow] = PgText.from(`_rowParser`.underlying)
}