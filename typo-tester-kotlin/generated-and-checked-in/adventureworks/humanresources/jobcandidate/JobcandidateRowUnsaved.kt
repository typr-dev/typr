/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.humanresources.jobcandidate

import adventureworks.customtypes.Defaulted
import adventureworks.customtypes.Defaulted.UseDefault
import adventureworks.customtypes.TypoLocalDateTime
import adventureworks.customtypes.TypoXml
import adventureworks.person.businessentity.BusinessentityId
import typo.runtime.PgText

/** This class corresponds to a row in table `humanresources.jobcandidate` which has not been persisted yet */
data class JobcandidateRowUnsaved(
  /** Employee identification number if applicant was hired. Foreign key to Employee.BusinessEntityID.
    * Points to [adventureworks.humanresources.employee.EmployeeRow.businessentityid]
    */
  val businessentityid: BusinessentityId?,
  /** RÃ©sumÃ© in XML format. */
  val resume: TypoXml?,
  /** Default: nextval('humanresources.jobcandidate_jobcandidateid_seq'::regclass)
    * Primary key for JobCandidate records.
    */
  val jobcandidateid: Defaulted<JobcandidateId>,
  /** Default: now() */
  val modifieddate: Defaulted<TypoLocalDateTime>
) {
  fun toRow(
    jobcandidateidDefault: () -> JobcandidateId,
    modifieddateDefault: () -> TypoLocalDateTime
  ): JobcandidateRow = JobcandidateRow(jobcandidateid = jobcandidateid.getOrElse(jobcandidateidDefault), businessentityid = businessentityid, resume = resume, modifieddate = modifieddate.getOrElse(modifieddateDefault))

  companion object {
    val pgText: PgText<JobcandidateRowUnsaved> =
      PgText.instance({ row, sb -> {
        BusinessentityId.pgType.opt().pgText.unsafeEncode(row.businessentityid, sb);
        sb.append(PgText.DELIMETER);
        TypoXml.pgType.opt().pgText.unsafeEncode(row.resume, sb);
        sb.append(PgText.DELIMETER);
        Defaulted.pgText(JobcandidateId.pgType.pgText).unsafeEncode(row.jobcandidateid, sb);
        sb.append(PgText.DELIMETER);
        Defaulted.pgText(TypoLocalDateTime.pgType.pgText).unsafeEncode(row.modifieddate, sb);
      } })
  }
}