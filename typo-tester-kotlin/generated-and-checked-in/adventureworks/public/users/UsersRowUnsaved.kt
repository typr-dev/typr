/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public.users

import adventureworks.customtypes.Defaulted
import adventureworks.customtypes.Defaulted.UseDefault
import adventureworks.customtypes.TypoInstant
import adventureworks.customtypes.TypoUnknownCitext
import typo.runtime.PgText
import typo.runtime.PgTypes

/** This class corresponds to a row in table `public.users` which has not been persisted yet */
data class UsersRowUnsaved(
  val userId: UsersId,
  val name: java.lang.String,
  val lastName: java.lang.String?,
  val email: TypoUnknownCitext,
  val password: java.lang.String,
  val verifiedOn: TypoInstant?,
  /** Default: now() */
  val createdAt: Defaulted<TypoInstant>
) {
  constructor(userId: UsersId, name: java.lang.String, email: TypoUnknownCitext, password: java.lang.String) : this(userId, name, null, email, password, null, UseDefault())

  fun toRow(createdAtDefault: () -> TypoInstant): UsersRow = UsersRow(userId = userId, name = name, lastName = lastName, email = email, password = password, createdAt = createdAt.getOrElse(createdAtDefault), verifiedOn = verifiedOn)

  companion object {
    val pgText: PgText<UsersRowUnsaved> =
      PgText.instance({ row, sb -> {
        UsersId.pgType.pgText.unsafeEncode(row.userId, sb);
        sb.append(PgText.DELIMETER);
        PgTypes.text.pgText.unsafeEncode(row.name, sb);
        sb.append(PgText.DELIMETER);
        PgTypes.text.opt().pgText.unsafeEncode(row.lastName, sb);
        sb.append(PgText.DELIMETER);
        TypoUnknownCitext.pgType.pgText.unsafeEncode(row.email, sb);
        sb.append(PgText.DELIMETER);
        PgTypes.text.pgText.unsafeEncode(row.password, sb);
        sb.append(PgText.DELIMETER);
        TypoInstant.pgType.opt().pgText.unsafeEncode(row.verifiedOn, sb);
        sb.append(PgText.DELIMETER);
        Defaulted.pgText(TypoInstant.pgType.pgText).unsafeEncode(row.createdAt, sb);
      } })
  }
}