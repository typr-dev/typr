/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes

import org.postgresql.util.PGInterval
import typo.runtime.PgRead
import typo.runtime.PgText
import typo.runtime.PgType
import typo.runtime.PgWrite
import typo.runtime.internal.arrayMap
import typo.runtime.internal.stringInterpolator.str

/** Interval type in PostgreSQL */
data class TypoInterval(
  val years: Int,
  val months: Int,
  val days: Int,
  val hours: Int,
  val minutes: Int,
  val seconds: Double
) {
  companion object {
    val pgText: PgText<TypoInterval> =
      PgText.textString.contramap({ v -> str("P", v.years, "Y", v.months, "M", v.days, "DT", v.hours, "H", v.minutes, "M", v.seconds, "S") })

    val pgType: PgType<TypoInterval> =
      PgType.of(
        "interval",
        PgRead.castJdbcObjectTo(PGInterval::class.java).map({ v -> TypoInterval(v.getYears, v.getMonths, v.getDays, v.getHours, v.getMinutes, v.getSeconds) }),
        PgWrite.passObjectToJdbc().contramap({ v -> new PGInterval(v.years, v.months, v.days, v.hours, v.minutes, v.seconds) }),
        TypoInterval.pgText
      )

    val pgTypeArray: PgType<Array<TypoInterval>> =
      TypoInterval.pgType.array(PgRead.castJdbcArrayTo(PGInterval::class.java).map({ xs -> arrayMap.map(xs, { v -> TypoInterval(v.getYears, v.getMonths, v.getDays, v.getHours, v.getMinutes, v.getSeconds) }, TypoInterval::class.java) }), PgWrite.<PGInterval>passObjectToJdbc().array(TypoInterval.pgType.typename().<PGInterval>as()).contramap({ xs -> arrayMap.map(xs, (TypoInterval v) -> new PGInterval(v.years, v.months, v.days, v.hours, v.minutes, v.seconds), PGInterval::class.java) }))
  }
}