/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.sales.salesterritoryhistory;

import adventureworks.customtypes.Defaulted;
import adventureworks.customtypes.TypoLocalDateTime;
import adventureworks.customtypes.TypoUUID;
import adventureworks.person.businessentity.BusinessentityId;
import adventureworks.sales.salesterritory.SalesterritoryId;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;

/** Table: sales.salesterritoryhistory
  * Sales representative transfers to other sales territories.
  * Composite primary key: businessentityid, startdate, territoryid
  */
public record SalesterritoryhistoryRow(
  /** Primary key. The sales rep.  Foreign key to SalesPerson.BusinessEntityID.
    * Points to {@link adventureworks.sales.salesperson.SalespersonRow#businessentityid()}
    */
  BusinessentityId businessentityid,
  /** Primary key. Territory identification number. Foreign key to SalesTerritory.SalesTerritoryID.
    * Points to {@link adventureworks.sales.salesterritory.SalesterritoryRow#territoryid()}
    */
  SalesterritoryId territoryid,
  /** Primary key. Date the sales representive started work in the territory.
    * Constraint CK_SalesTerritoryHistory_EndDate affecting columns enddate, startdate: (((enddate >= startdate) OR (enddate IS NULL)))
    */
  TypoLocalDateTime startdate,
  /** Date the sales representative left work in the territory.
    * Constraint CK_SalesTerritoryHistory_EndDate affecting columns enddate, startdate: (((enddate >= startdate) OR (enddate IS NULL)))
    */
  Optional<TypoLocalDateTime> enddate,
  /** Default: uuid_generate_v1() */
  TypoUUID rowguid,
  /** Default: now() */
  TypoLocalDateTime modifieddate
) {
  /** Primary key. The sales rep.  Foreign key to SalesPerson.BusinessEntityID.
    * Points to {@link adventureworks.sales.salesperson.SalespersonRow#businessentityid()}
    */
  public SalesterritoryhistoryRow withBusinessentityid(BusinessentityId businessentityid) {
    return new SalesterritoryhistoryRow(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };

  /** Primary key. Territory identification number. Foreign key to SalesTerritory.SalesTerritoryID.
    * Points to {@link adventureworks.sales.salesterritory.SalesterritoryRow#territoryid()}
    */
  public SalesterritoryhistoryRow withTerritoryid(SalesterritoryId territoryid) {
    return new SalesterritoryhistoryRow(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };

  /** Primary key. Date the sales representive started work in the territory.
    * Constraint CK_SalesTerritoryHistory_EndDate affecting columns enddate, startdate: (((enddate >= startdate) OR (enddate IS NULL)))
    */
  public SalesterritoryhistoryRow withStartdate(TypoLocalDateTime startdate) {
    return new SalesterritoryhistoryRow(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };

  /** Date the sales representative left work in the territory.
    * Constraint CK_SalesTerritoryHistory_EndDate affecting columns enddate, startdate: (((enddate >= startdate) OR (enddate IS NULL)))
    */
  public SalesterritoryhistoryRow withEnddate(Optional<TypoLocalDateTime> enddate) {
    return new SalesterritoryhistoryRow(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };

  /** Default: uuid_generate_v1() */
  public SalesterritoryhistoryRow withRowguid(TypoUUID rowguid) {
    return new SalesterritoryhistoryRow(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };

  /** Default: now() */
  public SalesterritoryhistoryRow withModifieddate(TypoLocalDateTime modifieddate) {
    return new SalesterritoryhistoryRow(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };

  static RowParser<SalesterritoryhistoryRow> _rowParser = RowParsers.of(BusinessentityId.pgType, SalesterritoryId.pgType, TypoLocalDateTime.pgType, TypoLocalDateTime.pgType.opt(), TypoUUID.pgType, TypoLocalDateTime.pgType, SalesterritoryhistoryRow::new, row -> new Object[]{row.businessentityid(), row.territoryid(), row.startdate(), row.enddate(), row.rowguid(), row.modifieddate()});;

  static public SalesterritoryhistoryRow apply(
    SalesterritoryhistoryId compositeId,
    Optional<TypoLocalDateTime> enddate,
    TypoUUID rowguid,
    TypoLocalDateTime modifieddate
  ) {
    return new SalesterritoryhistoryRow(compositeId.businessentityid(), compositeId.territoryid(), compositeId.startdate(), enddate, rowguid, modifieddate);
  };

  static public PgText<SalesterritoryhistoryRow> pgText =
    PgText.from(_rowParser);

  public SalesterritoryhistoryId compositeId() {
    return new SalesterritoryhistoryId(businessentityid, startdate, territoryid);
  };

  public SalesterritoryhistoryId id() {
    return this.compositeId();
  };

  public SalesterritoryhistoryRowUnsaved toUnsavedRow(
    Defaulted<TypoUUID> rowguid,
    Defaulted<TypoLocalDateTime> modifieddate
  ) {
    return new SalesterritoryhistoryRowUnsaved(businessentityid, territoryid, startdate, enddate, rowguid, modifieddate);
  };
}