/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.production.productcosthistory;

import adventureworks.customtypes.Defaulted;
import adventureworks.customtypes.Defaulted.UseDefault;
import adventureworks.production.product.ProductId;
import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.PgTypes;

/**
 * This class corresponds to a row in table `production.productcosthistory` which has not been
 * persisted yet
 */
public record ProductcosthistoryRowUnsaved(
    /**
     * Product identification number. Foreign key to Product.ProductID Points to {@link
     * adventureworks.production.product.ProductRow#productid()}
     */
    ProductId productid,
    /**
     * Product cost start date. Constraint CK_ProductCostHistory_EndDate affecting columns enddate,
     * startdate: (((enddate >= startdate) OR (enddate IS NULL)))
     */
    LocalDateTime startdate,
    /**
     * Product cost end date. Constraint CK_ProductCostHistory_EndDate affecting columns enddate,
     * startdate: (((enddate >= startdate) OR (enddate IS NULL)))
     */
    Optional<LocalDateTime> enddate,
    /**
     * Standard cost of the product. Constraint CK_ProductCostHistory_StandardCost affecting columns
     * standardcost: ((standardcost >= 0.00))
     */
    BigDecimal standardcost,
    /** Default: now() */
    Defaulted<LocalDateTime> modifieddate) {
  public ProductcosthistoryRowUnsaved(
      /**
       * Product identification number. Foreign key to Product.ProductID Points to {@link
       * adventureworks.production.product.ProductRow#productid()}
       */
      ProductId productid,
      /**
       * Product cost start date. Constraint CK_ProductCostHistory_EndDate affecting columns
       * enddate, startdate: (((enddate >= startdate) OR (enddate IS NULL)))
       */
      LocalDateTime startdate,
      /**
       * Standard cost of the product. Constraint CK_ProductCostHistory_StandardCost affecting
       * columns standardcost: ((standardcost >= 0.00))
       */
      BigDecimal standardcost) {
    this(productid, startdate, Optional.empty(), standardcost, new UseDefault<>());
  }
  ;

  /**
   * Product identification number. Foreign key to Product.ProductID Points to {@link
   * adventureworks.production.product.ProductRow#productid()}
   */
  public ProductcosthistoryRowUnsaved withProductid(ProductId productid) {
    return new ProductcosthistoryRowUnsaved(
        productid, startdate, enddate, standardcost, modifieddate);
  }
  ;

  /**
   * Product cost start date. Constraint CK_ProductCostHistory_EndDate affecting columns enddate,
   * startdate: (((enddate >= startdate) OR (enddate IS NULL)))
   */
  public ProductcosthistoryRowUnsaved withStartdate(LocalDateTime startdate) {
    return new ProductcosthistoryRowUnsaved(
        productid, startdate, enddate, standardcost, modifieddate);
  }
  ;

  /**
   * Product cost end date. Constraint CK_ProductCostHistory_EndDate affecting columns enddate,
   * startdate: (((enddate >= startdate) OR (enddate IS NULL)))
   */
  public ProductcosthistoryRowUnsaved withEnddate(Optional<LocalDateTime> enddate) {
    return new ProductcosthistoryRowUnsaved(
        productid, startdate, enddate, standardcost, modifieddate);
  }
  ;

  /**
   * Standard cost of the product. Constraint CK_ProductCostHistory_StandardCost affecting columns
   * standardcost: ((standardcost >= 0.00))
   */
  public ProductcosthistoryRowUnsaved withStandardcost(BigDecimal standardcost) {
    return new ProductcosthistoryRowUnsaved(
        productid, startdate, enddate, standardcost, modifieddate);
  }
  ;

  /** Default: now() */
  public ProductcosthistoryRowUnsaved withModifieddate(Defaulted<LocalDateTime> modifieddate) {
    return new ProductcosthistoryRowUnsaved(
        productid, startdate, enddate, standardcost, modifieddate);
  }
  ;

  public static PgText<ProductcosthistoryRowUnsaved> pgText =
      PgText.instance(
          (row, sb) -> {
            ProductId.pgType.pgText().unsafeEncode(row.productid, sb);
            sb.append(PgText.DELIMETER);
            PgTypes.timestamp.pgText().unsafeEncode(row.startdate, sb);
            sb.append(PgText.DELIMETER);
            PgTypes.timestamp.opt().pgText().unsafeEncode(row.enddate, sb);
            sb.append(PgText.DELIMETER);
            PgTypes.numeric.pgText().unsafeEncode(row.standardcost, sb);
            sb.append(PgText.DELIMETER);
            Defaulted.pgText(PgTypes.timestamp.pgText()).unsafeEncode(row.modifieddate, sb);
          });

  public ProductcosthistoryRow toRow(
      java.util.function.Supplier<LocalDateTime> modifieddateDefault) {
    return new ProductcosthistoryRow(
        productid, startdate, enddate, standardcost, modifieddate.getOrElse(modifieddateDefault));
  }
  ;
}
