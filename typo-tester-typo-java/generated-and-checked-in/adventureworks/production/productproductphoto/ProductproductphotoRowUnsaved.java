/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.production.productproductphoto;

import adventureworks.customtypes.Defaulted;
import adventureworks.customtypes.Defaulted.UseDefault;
import adventureworks.production.product.ProductId;
import adventureworks.production.productphoto.ProductphotoId;
import adventureworks.public_.Flag;
import java.time.LocalDateTime;
import typo.runtime.PgText;
import typo.runtime.PgTypes;

/** This class corresponds to a row in table `production.productproductphoto` which has not been persisted yet */
public record ProductproductphotoRowUnsaved(
  /** Product identification number. Foreign key to Product.ProductID.
    * Points to {@link adventureworks.production.product.ProductRow#productid()}
    */
  ProductId productid,
  /** Product photo identification number. Foreign key to ProductPhoto.ProductPhotoID.
    * Points to {@link adventureworks.production.productphoto.ProductphotoRow#productphotoid()}
    */
  ProductphotoId productphotoid,
  /** Default: false
    * 0 = Photo is not the principal image. 1 = Photo is the principal image.
    */
  Defaulted<Flag> primary,
  /** Default: now() */
  Defaulted<LocalDateTime> modifieddate
) {
  public ProductproductphotoRowUnsaved(
    /** Product identification number. Foreign key to Product.ProductID.
      * Points to {@link adventureworks.production.product.ProductRow#productid()}
      */
    ProductId productid,
    /** Product photo identification number. Foreign key to ProductPhoto.ProductPhotoID.
      * Points to {@link adventureworks.production.productphoto.ProductphotoRow#productphotoid()}
      */
    ProductphotoId productphotoid
  ) {
    this(productid, productphotoid, new UseDefault<>(), new UseDefault<>());
  };

  /** Product identification number. Foreign key to Product.ProductID.
    * Points to {@link adventureworks.production.product.ProductRow#productid()}
    */
  public ProductproductphotoRowUnsaved withProductid(ProductId productid) {
    return new ProductproductphotoRowUnsaved(productid, productphotoid, primary, modifieddate);
  };

  /** Product photo identification number. Foreign key to ProductPhoto.ProductPhotoID.
    * Points to {@link adventureworks.production.productphoto.ProductphotoRow#productphotoid()}
    */
  public ProductproductphotoRowUnsaved withProductphotoid(ProductphotoId productphotoid) {
    return new ProductproductphotoRowUnsaved(productid, productphotoid, primary, modifieddate);
  };

  /** Default: false
    * 0 = Photo is not the principal image. 1 = Photo is the principal image.
    */
  public ProductproductphotoRowUnsaved withPrimary(Defaulted<Flag> primary) {
    return new ProductproductphotoRowUnsaved(productid, productphotoid, primary, modifieddate);
  };

  /** Default: now() */
  public ProductproductphotoRowUnsaved withModifieddate(Defaulted<LocalDateTime> modifieddate) {
    return new ProductproductphotoRowUnsaved(productid, productphotoid, primary, modifieddate);
  };

  static public PgText<ProductproductphotoRowUnsaved> pgText =
    PgText.instance((row, sb) -> {
      ProductId.pgType.pgText().unsafeEncode(row.productid, sb);
      sb.append(PgText.DELIMETER);
      ProductphotoId.pgType.pgText().unsafeEncode(row.productphotoid, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(Flag.pgType.pgText()).unsafeEncode(row.primary, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(PgTypes.timestamp.pgText()).unsafeEncode(row.modifieddate, sb);
    });

  public ProductproductphotoRow toRow(
    java.util.function.Supplier<Flag> primaryDefault,
    java.util.function.Supplier<LocalDateTime> modifieddateDefault
  ) {
    return new ProductproductphotoRow(productid, productphotoid, primary.getOrElse(primaryDefault), modifieddate.getOrElse(modifieddateDefault));
  };
}