/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.production.productdocument;

import adventureworks.customtypes.Defaulted;
import adventureworks.production.document.DocumentId;
import adventureworks.production.product.ProductId;
import java.time.LocalDateTime;
import typo.runtime.PgText;
import typo.runtime.PgTypes;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;

/**
 * Table: production.productdocument Cross-reference table mapping products to related product
 * documents. Composite primary key: productid, documentnode
 */
public record ProductdocumentRow(
    /**
     * Product identification number. Foreign key to Product.ProductID. Points to {@link
     * adventureworks.production.product.ProductRow#productid()}
     */
    ProductId productid,
    /** Default: now() */
    LocalDateTime modifieddate,
    /**
     * Document identification number. Foreign key to Document.DocumentNode. Default: '/'::character
     * varying Points to {@link adventureworks.production.document.DocumentRow#documentnode()}
     */
    DocumentId documentnode) {
  /**
   * Product identification number. Foreign key to Product.ProductID. Points to {@link
   * adventureworks.production.product.ProductRow#productid()}
   */
  public ProductdocumentRow withProductid(ProductId productid) {
    return new ProductdocumentRow(productid, modifieddate, documentnode);
  }
  ;

  /** Default: now() */
  public ProductdocumentRow withModifieddate(LocalDateTime modifieddate) {
    return new ProductdocumentRow(productid, modifieddate, documentnode);
  }
  ;

  /**
   * Document identification number. Foreign key to Document.DocumentNode. Default: '/'::character
   * varying Points to {@link adventureworks.production.document.DocumentRow#documentnode()}
   */
  public ProductdocumentRow withDocumentnode(DocumentId documentnode) {
    return new ProductdocumentRow(productid, modifieddate, documentnode);
  }
  ;

  public static RowParser<ProductdocumentRow> _rowParser =
      RowParsers.of(
          ProductId.pgType,
          PgTypes.timestamp,
          DocumentId.pgType,
          ProductdocumentRow::new,
          row -> new Object[] {row.productid(), row.modifieddate(), row.documentnode()});
  ;

  public static ProductdocumentRow apply(
      ProductdocumentId compositeId, LocalDateTime modifieddate) {
    return new ProductdocumentRow(
        compositeId.productid(), modifieddate, compositeId.documentnode());
  }
  ;

  public static PgText<ProductdocumentRow> pgText = PgText.from(_rowParser);

  public ProductdocumentId compositeId() {
    return new ProductdocumentId(productid, documentnode);
  }
  ;

  public ProductdocumentId id() {
    return this.compositeId();
  }
  ;

  public ProductdocumentRowUnsaved toUnsavedRow(
      Defaulted<DocumentId> documentnode, Defaulted<LocalDateTime> modifieddate) {
    return new ProductdocumentRowUnsaved(productid, modifieddate, documentnode);
  }
  ;
}
