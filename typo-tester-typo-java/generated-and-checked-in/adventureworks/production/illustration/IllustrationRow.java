/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.production.illustration;

import adventureworks.customtypes.Defaulted;
import adventureworks.customtypes.TypoLocalDateTime;
import adventureworks.customtypes.TypoXml;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;

/** Table: production.illustration
  * Bicycle assembly diagrams.
  * Primary key: illustrationid
  */
public record IllustrationRow(
  /** Primary key for Illustration records.
    * Default: nextval('production.illustration_illustrationid_seq'::regclass)
    */
  IllustrationId illustrationid,
  /** Illustrations used in manufacturing instructions. Stored as XML. */
  Optional<TypoXml> diagram,
  /** Default: now() */
  TypoLocalDateTime modifieddate
) {
  /** Primary key for Illustration records.
    * Default: nextval('production.illustration_illustrationid_seq'::regclass)
    */
  public IllustrationRow withIllustrationid(IllustrationId illustrationid) {
    return new IllustrationRow(illustrationid, diagram, modifieddate);
  };

  /** Illustrations used in manufacturing instructions. Stored as XML. */
  public IllustrationRow withDiagram(Optional<TypoXml> diagram) {
    return new IllustrationRow(illustrationid, diagram, modifieddate);
  };

  /** Default: now() */
  public IllustrationRow withModifieddate(TypoLocalDateTime modifieddate) {
    return new IllustrationRow(illustrationid, diagram, modifieddate);
  };

  static RowParser<IllustrationRow> _rowParser = RowParsers.of(IllustrationId.pgType, TypoXml.pgType.opt(), TypoLocalDateTime.pgType, IllustrationRow::new, row -> new Object[]{row.illustrationid(), row.diagram(), row.modifieddate()});;

  static public PgText<IllustrationRow> pgText =
    PgText.from(_rowParser);

  public IllustrationId id() {
    return illustrationid;
  };

  public IllustrationRowUnsaved toUnsavedRow(
    Defaulted<IllustrationId> illustrationid,
    Defaulted<TypoLocalDateTime> modifieddate
  ) {
    return new IllustrationRowUnsaved(diagram, illustrationid, modifieddate);
  };
}