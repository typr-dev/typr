/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.humanresources.employeepayhistory;

import adventureworks.customtypes.Defaulted;
import adventureworks.customtypes.TypoLocalDateTime;
import adventureworks.customtypes.TypoShort;
import adventureworks.person.businessentity.BusinessentityId;
import java.math.BigDecimal;
import typo.runtime.PgText;
import typo.runtime.PgTypes;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;

/** Table: humanresources.employeepayhistory
  * Employee pay history.
  * Composite primary key: businessentityid, ratechangedate
  */
public record EmployeepayhistoryRow(
  /** Employee identification number. Foreign key to Employee.BusinessEntityID.
    * Points to {@link adventureworks.humanresources.employee.EmployeeRow#businessentityid()}
    */
  BusinessentityId businessentityid,
  /** Date the change in pay is effective */
  TypoLocalDateTime ratechangedate,
  /** Salary hourly rate.
    * Constraint CK_EmployeePayHistory_Rate affecting columns rate: (((rate >= 6.50) AND (rate <= 200.00)))
    */
  BigDecimal rate,
  /** 1 = Salary received monthly, 2 = Salary received biweekly
    * Constraint CK_EmployeePayHistory_PayFrequency affecting columns payfrequency: ((payfrequency = ANY (ARRAY[1, 2])))
    */
  TypoShort payfrequency,
  /** Default: now() */
  TypoLocalDateTime modifieddate
) {
  /** Employee identification number. Foreign key to Employee.BusinessEntityID.
    * Points to {@link adventureworks.humanresources.employee.EmployeeRow#businessentityid()}
    */
  public EmployeepayhistoryRow withBusinessentityid(BusinessentityId businessentityid) {
    return new EmployeepayhistoryRow(businessentityid, ratechangedate, rate, payfrequency, modifieddate);
  };

  /** Date the change in pay is effective */
  public EmployeepayhistoryRow withRatechangedate(TypoLocalDateTime ratechangedate) {
    return new EmployeepayhistoryRow(businessentityid, ratechangedate, rate, payfrequency, modifieddate);
  };

  /** Salary hourly rate.
    * Constraint CK_EmployeePayHistory_Rate affecting columns rate: (((rate >= 6.50) AND (rate <= 200.00)))
    */
  public EmployeepayhistoryRow withRate(BigDecimal rate) {
    return new EmployeepayhistoryRow(businessentityid, ratechangedate, rate, payfrequency, modifieddate);
  };

  /** 1 = Salary received monthly, 2 = Salary received biweekly
    * Constraint CK_EmployeePayHistory_PayFrequency affecting columns payfrequency: ((payfrequency = ANY (ARRAY[1, 2])))
    */
  public EmployeepayhistoryRow withPayfrequency(TypoShort payfrequency) {
    return new EmployeepayhistoryRow(businessentityid, ratechangedate, rate, payfrequency, modifieddate);
  };

  /** Default: now() */
  public EmployeepayhistoryRow withModifieddate(TypoLocalDateTime modifieddate) {
    return new EmployeepayhistoryRow(businessentityid, ratechangedate, rate, payfrequency, modifieddate);
  };

  static RowParser<EmployeepayhistoryRow> _rowParser = RowParsers.of(BusinessentityId.pgType, TypoLocalDateTime.pgType, PgTypes.numeric, TypoShort.pgType, TypoLocalDateTime.pgType, EmployeepayhistoryRow::new, row -> new Object[]{row.businessentityid(), row.ratechangedate(), row.rate(), row.payfrequency(), row.modifieddate()});;

  static public EmployeepayhistoryRow apply(
    EmployeepayhistoryId compositeId,
    BigDecimal rate,
    TypoShort payfrequency,
    TypoLocalDateTime modifieddate
  ) {
    return new EmployeepayhistoryRow(compositeId.businessentityid(), compositeId.ratechangedate(), rate, payfrequency, modifieddate);
  };

  static public PgText<EmployeepayhistoryRow> pgText =
    PgText.from(_rowParser);

  public EmployeepayhistoryId compositeId() {
    return new EmployeepayhistoryId(businessentityid, ratechangedate);
  };

  public EmployeepayhistoryId id() {
    return this.compositeId();
  };

  public EmployeepayhistoryRowUnsaved toUnsavedRow(Defaulted<TypoLocalDateTime> modifieddate) {
    return new EmployeepayhistoryRowUnsaved(businessentityid, ratechangedate, rate, payfrequency, modifieddate);
  };
}