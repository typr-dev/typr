/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.humanresources.employeepayhistory;

import adventureworks.customtypes.Defaulted;
import adventureworks.customtypes.Defaulted.UseDefault;
import adventureworks.person.businessentity.BusinessentityId;
import java.math.BigDecimal;
import java.time.LocalDateTime;
import typo.runtime.PgText;
import typo.runtime.PgTypes;

/** This class corresponds to a row in table `humanresources.employeepayhistory` which has not been persisted yet */
public record EmployeepayhistoryRowUnsaved(
  /** Employee identification number. Foreign key to Employee.BusinessEntityID.
    * Points to {@link adventureworks.humanresources.employee.EmployeeRow#businessentityid()}
    */
  BusinessentityId businessentityid,
  /** Date the change in pay is effective */
  LocalDateTime ratechangedate,
  /** Salary hourly rate.
    * Constraint CK_EmployeePayHistory_Rate affecting columns rate:  (((rate >= 6.50) AND (rate <= 200.00)))
    */
  BigDecimal rate,
  /** 1 = Salary received monthly, 2 = Salary received biweekly
    * Constraint CK_EmployeePayHistory_PayFrequency affecting columns payfrequency:  ((payfrequency = ANY (ARRAY[1, 2])))
    */
  Short payfrequency,
  /** Default: now() */
  Defaulted<LocalDateTime> modifieddate
) {
  public EmployeepayhistoryRowUnsaved(
    /** Employee identification number. Foreign key to Employee.BusinessEntityID.
      * Points to {@link adventureworks.humanresources.employee.EmployeeRow#businessentityid()}
      */
    BusinessentityId businessentityid,
    /** Date the change in pay is effective */
    LocalDateTime ratechangedate,
    /** Salary hourly rate.
      * Constraint CK_EmployeePayHistory_Rate affecting columns rate:  (((rate >= 6.50) AND (rate <= 200.00)))
      */
    BigDecimal rate,
    /** 1 = Salary received monthly, 2 = Salary received biweekly
      * Constraint CK_EmployeePayHistory_PayFrequency affecting columns payfrequency:  ((payfrequency = ANY (ARRAY[1, 2])))
      */
    Short payfrequency
  ) {
    this(businessentityid, ratechangedate, rate, payfrequency, new UseDefault<>());
  };

  /** Employee identification number. Foreign key to Employee.BusinessEntityID.
    * Points to {@link adventureworks.humanresources.employee.EmployeeRow#businessentityid()}
    */
  public EmployeepayhistoryRowUnsaved withBusinessentityid(BusinessentityId businessentityid) {
    return new EmployeepayhistoryRowUnsaved(businessentityid, ratechangedate, rate, payfrequency, modifieddate);
  };

  /** Date the change in pay is effective */
  public EmployeepayhistoryRowUnsaved withRatechangedate(LocalDateTime ratechangedate) {
    return new EmployeepayhistoryRowUnsaved(businessentityid, ratechangedate, rate, payfrequency, modifieddate);
  };

  /** Salary hourly rate.
    * Constraint CK_EmployeePayHistory_Rate affecting columns rate:  (((rate >= 6.50) AND (rate <= 200.00)))
    */
  public EmployeepayhistoryRowUnsaved withRate(BigDecimal rate) {
    return new EmployeepayhistoryRowUnsaved(businessentityid, ratechangedate, rate, payfrequency, modifieddate);
  };

  /** 1 = Salary received monthly, 2 = Salary received biweekly
    * Constraint CK_EmployeePayHistory_PayFrequency affecting columns payfrequency:  ((payfrequency = ANY (ARRAY[1, 2])))
    */
  public EmployeepayhistoryRowUnsaved withPayfrequency(Short payfrequency) {
    return new EmployeepayhistoryRowUnsaved(businessentityid, ratechangedate, rate, payfrequency, modifieddate);
  };

  /** Default: now() */
  public EmployeepayhistoryRowUnsaved withModifieddate(Defaulted<LocalDateTime> modifieddate) {
    return new EmployeepayhistoryRowUnsaved(businessentityid, ratechangedate, rate, payfrequency, modifieddate);
  };

  static public PgText<EmployeepayhistoryRowUnsaved> pgText =
    PgText.instance((row, sb) -> {
      BusinessentityId.pgType.pgText().unsafeEncode(row.businessentityid, sb);
      sb.append(PgText.DELIMETER);
      PgTypes.timestamp.pgText().unsafeEncode(row.ratechangedate, sb);
      sb.append(PgText.DELIMETER);
      PgTypes.numeric.pgText().unsafeEncode(row.rate, sb);
      sb.append(PgText.DELIMETER);
      PgTypes.int2.pgText().unsafeEncode(row.payfrequency, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(PgTypes.timestamp.pgText()).unsafeEncode(row.modifieddate, sb);
    });

  public EmployeepayhistoryRow toRow(java.util.function.Supplier<LocalDateTime> modifieddateDefault) {
    return new EmployeepayhistoryRow(businessentityid, ratechangedate, rate, payfrequency, modifieddate.getOrElse(modifieddateDefault));
  };
}