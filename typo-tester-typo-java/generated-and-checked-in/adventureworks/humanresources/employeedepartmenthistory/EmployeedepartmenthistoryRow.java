/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.humanresources.employeedepartmenthistory;

import adventureworks.customtypes.Defaulted;
import adventureworks.humanresources.department.DepartmentId;
import adventureworks.humanresources.shift.ShiftId;
import adventureworks.person.businessentity.BusinessentityId;
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.util.Optional;
import typo.runtime.PgText;
import typo.runtime.PgTypes;
import typo.runtime.RowParser;
import typo.runtime.RowParsers;

/** Table: humanresources.employeedepartmenthistory
  * Employee department transfers.
  * Composite primary key: businessentityid, startdate, departmentid, shiftid
  */
public record EmployeedepartmenthistoryRow(
  /** Employee identification number. Foreign key to Employee.BusinessEntityID.
    * Points to {@link adventureworks.humanresources.employee.EmployeeRow#businessentityid()}
    */
  BusinessentityId businessentityid,
  /** Department in which the employee worked including currently. Foreign key to Department.DepartmentID.
    * Points to {@link adventureworks.humanresources.department.DepartmentRow#departmentid()}
    */
  DepartmentId departmentid,
  /** Identifies which 8-hour shift the employee works. Foreign key to Shift.Shift.ID.
    * Points to {@link adventureworks.humanresources.shift.ShiftRow#shiftid()}
    */
  ShiftId shiftid,
  /** Date the employee started work in the department.
    * Constraint CK_EmployeeDepartmentHistory_EndDate affecting columns enddate, startdate: (((enddate >= startdate) OR (enddate IS NULL)))
    */
  LocalDate startdate,
  /** Date the employee left the department. NULL = Current department.
    * Constraint CK_EmployeeDepartmentHistory_EndDate affecting columns enddate, startdate: (((enddate >= startdate) OR (enddate IS NULL)))
    */
  Optional<LocalDate> enddate,
  /** Default: now() */
  LocalDateTime modifieddate
) {
  /** Employee identification number. Foreign key to Employee.BusinessEntityID.
    * Points to {@link adventureworks.humanresources.employee.EmployeeRow#businessentityid()}
    */
  public EmployeedepartmenthistoryRow withBusinessentityid(BusinessentityId businessentityid) {
    return new EmployeedepartmenthistoryRow(businessentityid, departmentid, shiftid, startdate, enddate, modifieddate);
  };

  /** Department in which the employee worked including currently. Foreign key to Department.DepartmentID.
    * Points to {@link adventureworks.humanresources.department.DepartmentRow#departmentid()}
    */
  public EmployeedepartmenthistoryRow withDepartmentid(DepartmentId departmentid) {
    return new EmployeedepartmenthistoryRow(businessentityid, departmentid, shiftid, startdate, enddate, modifieddate);
  };

  /** Identifies which 8-hour shift the employee works. Foreign key to Shift.Shift.ID.
    * Points to {@link adventureworks.humanresources.shift.ShiftRow#shiftid()}
    */
  public EmployeedepartmenthistoryRow withShiftid(ShiftId shiftid) {
    return new EmployeedepartmenthistoryRow(businessentityid, departmentid, shiftid, startdate, enddate, modifieddate);
  };

  /** Date the employee started work in the department.
    * Constraint CK_EmployeeDepartmentHistory_EndDate affecting columns enddate, startdate: (((enddate >= startdate) OR (enddate IS NULL)))
    */
  public EmployeedepartmenthistoryRow withStartdate(LocalDate startdate) {
    return new EmployeedepartmenthistoryRow(businessentityid, departmentid, shiftid, startdate, enddate, modifieddate);
  };

  /** Date the employee left the department. NULL = Current department.
    * Constraint CK_EmployeeDepartmentHistory_EndDate affecting columns enddate, startdate: (((enddate >= startdate) OR (enddate IS NULL)))
    */
  public EmployeedepartmenthistoryRow withEnddate(Optional<LocalDate> enddate) {
    return new EmployeedepartmenthistoryRow(businessentityid, departmentid, shiftid, startdate, enddate, modifieddate);
  };

  /** Default: now() */
  public EmployeedepartmenthistoryRow withModifieddate(LocalDateTime modifieddate) {
    return new EmployeedepartmenthistoryRow(businessentityid, departmentid, shiftid, startdate, enddate, modifieddate);
  };

  static RowParser<EmployeedepartmenthistoryRow> _rowParser = RowParsers.of(BusinessentityId.pgType, DepartmentId.pgType, ShiftId.pgType, PgTypes.date, PgTypes.date.opt(), PgTypes.timestamp, EmployeedepartmenthistoryRow::new, row -> new Object[]{row.businessentityid(), row.departmentid(), row.shiftid(), row.startdate(), row.enddate(), row.modifieddate()});;

  static public EmployeedepartmenthistoryRow apply(
    EmployeedepartmenthistoryId compositeId,
    Optional<LocalDate> enddate,
    LocalDateTime modifieddate
  ) {
    return new EmployeedepartmenthistoryRow(compositeId.businessentityid(), compositeId.departmentid(), compositeId.shiftid(), compositeId.startdate(), enddate, modifieddate);
  };

  static public PgText<EmployeedepartmenthistoryRow> pgText =
    PgText.from(_rowParser);

  public EmployeedepartmenthistoryId compositeId() {
    return new EmployeedepartmenthistoryId(businessentityid, startdate, departmentid, shiftid);
  };

  public EmployeedepartmenthistoryId id() {
    return this.compositeId();
  };

  public EmployeedepartmenthistoryRowUnsaved toUnsavedRow(Defaulted<LocalDateTime> modifieddate) {
    return new EmployeedepartmenthistoryRowUnsaved(businessentityid, departmentid, shiftid, startdate, enddate, modifieddate);
  };
}