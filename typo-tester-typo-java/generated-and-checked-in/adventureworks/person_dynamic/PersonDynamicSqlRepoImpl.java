/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.person_dynamic;

import java.sql.Connection;
import java.util.List;
import java.util.Optional;
import typo.runtime.PgTypes;
import static typo.runtime.Fragment.interpolate;

public class PersonDynamicSqlRepoImpl implements PersonDynamicSqlRepo {
  public List<PersonDynamicSqlRow> apply(
    Optional<String> firstName,
    Connection c
  ) {
    return interpolate(
      typo.runtime.Fragment.lit("""
         SELECT p.title, p.firstname, p.middlename, p.lastname
         FROM person.person p
         WHERE """),
      PgTypes.text.opt().encode(firstName),
      typo.runtime.Fragment.lit("::text IS NULL OR p.firstname = "),
      PgTypes.text.opt().encode(firstName),
      typo.runtime.Fragment.lit("""


      """)
    ).as(PersonDynamicSqlRow._rowParser.all()).runUnchecked(c);
  };
}