/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes;

import org.postgresql.geometric.PGcircle;
import typo.runtime.PgRead;
import typo.runtime.PgText;
import typo.runtime.PgType;
import typo.runtime.PgWrite;
import typo.runtime.internal.arrayMap;
import static typo.runtime.internal.stringInterpolator.str;

/** This represents circle datatype in PostgreSQL, consisting of a point and a radius */
public record TypoCircle(
  TypoPoint center,
  Double radius
) {
  public TypoCircle withCenter(TypoPoint center) {
    return new TypoCircle(center, radius);
  };

  public TypoCircle withRadius(Double radius) {
    return new TypoCircle(center, radius);
  };

  static public PgText<TypoCircle> pgText =
    PgText.textString.contramap(v -> str("<(", java.lang.String.valueOf(v.center().x()), ",", java.lang.String.valueOf(v.center().y()), "),", java.lang.String.valueOf(v.radius()), ">"));

  static public PgType<TypoCircle> pgType =
    PgType.of(
      "circle",
      PgRead.castJdbcObjectTo(PGcircle.class).map((PGcircle v) -> new TypoCircle(new TypoPoint(v.center.x, v.center.y), v.radius)),
      PgWrite.<PGcircle>passObjectToJdbc().contramap((TypoCircle v) -> new PGcircle(v.center().x(), v.center().y(), v.radius())),
      TypoCircle.pgText
    );

  static public PgType<TypoCircle[]> pgTypeArray =
    TypoCircle.pgType.array(PgRead.castJdbcArrayTo(PGcircle.class).map((PGcircle[] xs) -> arrayMap.map(xs, (PGcircle v) -> new TypoCircle(new TypoPoint(v.center.x, v.center.y), v.radius), TypoCircle.class)), PgWrite.<PGcircle>passObjectToJdbc().array(TypoCircle.pgType.typename().<PGcircle>as()).contramap((TypoCircle[] xs) -> arrayMap.map(xs, (TypoCircle v) -> new PGcircle(v.center().x(), v.center().y(), v.radius()), PGcircle.class)));
}