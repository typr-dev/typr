/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes;

import com.fasterxml.jackson.annotation.JsonValue;
import java.math.BigDecimal;
import typo.dsl.Bijection;
import typo.runtime.PgRead;
import typo.runtime.PgText;
import typo.runtime.PgType;
import typo.runtime.PgTypes;
import typo.runtime.PgWrite;
import typo.runtime.internal.arrayMap;

/** Money and cash types in PostgreSQL */
public record TypoMoney(@JsonValue BigDecimal value) {
  public TypoMoney withValue(BigDecimal value) {
    return new TypoMoney(value);
  };

  static public Bijection<TypoMoney, BigDecimal> bijection =
    Bijection.of(TypoMoney::value, TypoMoney::new);

  static public PgText<TypoMoney> pgText =
    PgText.textBigDecimal.contramap(v -> v.value());

  static public PgType<TypoMoney> pgType =
    PgTypes.numeric.bimap(v -> new TypoMoney(v), v -> v.value()).renamed("money");

  static public PgType<TypoMoney[]> pgTypeArray =
    TypoMoney.pgType.array(PgRead.massageJdbcArrayTo(BigDecimal[].class).map(xs -> arrayMap.map(xs, v -> new TypoMoney(v), TypoMoney.class)), PgWrite.<BigDecimal>passObjectToJdbc().array(TypoMoney.pgType.typename().<BigDecimal>as()).contramap(xs -> arrayMap.map(xs, (TypoMoney v) -> v.value(), BigDecimal.class)));
}