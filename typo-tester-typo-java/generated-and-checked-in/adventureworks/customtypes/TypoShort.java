/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes;

import com.fasterxml.jackson.annotation.JsonValue;
import typo.dsl.Bijection;
import typo.runtime.PgRead;
import typo.runtime.PgText;
import typo.runtime.PgType;
import typo.runtime.PgTypes;
import typo.runtime.PgWrite;
import typo.runtime.internal.arrayMap;

/** Short primitive */
public record TypoShort(@JsonValue Short value) {
  public TypoShort withValue(Short value) {
    return new TypoShort(value);
  };

  static public Bijection<TypoShort, Short> bijection =
    Bijection.of(TypoShort::value, TypoShort::new);

  static public PgText<TypoShort> pgText =
    PgText.textShort.contramap(v -> v.value());

  static public PgType<TypoShort> pgType =
    PgTypes.int4.bimap((Integer v) -> new TypoShort(v.shortValue()), (TypoShort v) -> (int) v.value()).renamed("int2");

  static public PgType<TypoShort[]> pgTypeArray =
    TypoShort.pgType.array(PgRead.massageJdbcArrayTo(Short[].class).map((Short[] xs) -> arrayMap.map(xs, (Short v) -> new TypoShort(v), TypoShort.class)), PgWrite.<Short>passObjectToJdbc().array(TypoShort.pgType.typename().<Short>as()).contramap((TypoShort[] xs) -> arrayMap.map(xs, (TypoShort v) -> v.value(), Short.class)));
}