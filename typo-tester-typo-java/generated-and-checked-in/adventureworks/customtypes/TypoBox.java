/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes;

import org.postgresql.geometric.PGbox;
import typo.runtime.PgRead;
import typo.runtime.PgText;
import typo.runtime.PgType;
import typo.runtime.PgWrite;
import typo.runtime.internal.arrayMap;
import static typo.runtime.internal.stringInterpolator.str;

/** This represents the box datatype in PostgreSQL */
public record TypoBox(
  Double x1,
  Double y1,
  Double x2,
  Double y2
) {
  public TypoBox withX1(Double x1) {
    return new TypoBox(x1, y1, x2, y2);
  };

  public TypoBox withY1(Double y1) {
    return new TypoBox(x1, y1, x2, y2);
  };

  public TypoBox withX2(Double x2) {
    return new TypoBox(x1, y1, x2, y2);
  };

  public TypoBox withY2(Double y2) {
    return new TypoBox(x1, y1, x2, y2);
  };

  static public PgText<TypoBox> pgText =
    PgText.textString.contramap(v -> str("((", java.lang.String.valueOf(v.x1()), ",", java.lang.String.valueOf(v.y1()), "),(", java.lang.String.valueOf(v.x2()), ",", java.lang.String.valueOf(v.y2()), "))"));

  static public PgType<TypoBox> pgType =
    PgType.of(
      "box",
      PgRead.castJdbcObjectTo(PGbox.class).map((PGbox v) -> new TypoBox(v.point[0].x, v.point[0].y, v.point[1].x, v.point[1].y)),
      PgWrite.<PGbox>passObjectToJdbc().contramap((TypoBox v) -> new PGbox(v.x1(), v.y1(), v.x2(), v.y2())),
      TypoBox.pgText
    );

  static public PgType<TypoBox[]> pgTypeArray =
    TypoBox.pgType.array(PgRead.castJdbcArrayTo(PGbox.class).map((PGbox[] xs) -> arrayMap.map(xs, (PGbox v) -> new TypoBox(v.point[0].x, v.point[0].y, v.point[1].x, v.point[1].y), TypoBox.class)), PgWrite.<PGbox>passObjectToJdbc().array(TypoBox.pgType.typename().<PGbox>as()).contramap((TypoBox[] xs) -> arrayMap.map(xs, (TypoBox v) -> new PGbox(v.x1(), v.y1(), v.x2(), v.y2()), PGbox.class)));
}