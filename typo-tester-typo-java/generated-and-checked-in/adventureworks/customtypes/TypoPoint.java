/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes;

import org.postgresql.geometric.PGpoint;
import typo.runtime.PgRead;
import typo.runtime.PgText;
import typo.runtime.PgType;
import typo.runtime.PgWrite;
import typo.runtime.internal.arrayMap;
import static typo.runtime.internal.stringInterpolator.str;

/** Point datatype in PostgreSQL */
public record TypoPoint(
  Double x,
  Double y
) {
  public TypoPoint withX(Double x) {
    return new TypoPoint(x, y);
  };

  public TypoPoint withY(Double y) {
    return new TypoPoint(x, y);
  };

  static public PgText<TypoPoint> pgText =
    PgText.textString.contramap(v -> str("(", java.lang.String.valueOf(v.x()), ",", java.lang.String.valueOf(v.y()), ")"));

  static public PgType<TypoPoint> pgType =
    PgType.of(
      "point",
      PgRead.castJdbcObjectTo(PGpoint.class).map((PGpoint v) -> new TypoPoint(v.x, v.y)),
      PgWrite.<PGpoint>passObjectToJdbc().contramap((TypoPoint v) -> new PGpoint(v.x(), v.y())),
      TypoPoint.pgText
    );

  static public PgType<TypoPoint[]> pgTypeArray =
    TypoPoint.pgType.array(PgRead.castJdbcArrayTo(PGpoint.class).map((PGpoint[] xs) -> arrayMap.map(xs, (PGpoint v) -> new TypoPoint(v.x, v.y), TypoPoint.class)), PgWrite.<PGpoint>passObjectToJdbc().array(TypoPoint.pgType.typename().<PGpoint>as()).contramap((TypoPoint[] xs) -> arrayMap.map(xs, (TypoPoint v) -> new PGpoint(v.x(), v.y()), PGpoint.class)));
}