/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes;

import com.fasterxml.jackson.annotation.JsonValue;
import java.util.UUID;
import typo.dsl.Bijection;
import typo.runtime.PgRead;
import typo.runtime.PgText;
import typo.runtime.PgType;
import typo.runtime.PgTypes;
import typo.runtime.PgWrite;
import typo.runtime.internal.arrayMap;

/** UUID */
public record TypoUUID(@JsonValue UUID value) {
  public TypoUUID withValue(UUID value) {
    return new TypoUUID(value);
  };

  static public TypoUUID apply(String str) {
    return new TypoUUID(UUID.fromString(str));
  };

  static public Bijection<TypoUUID, UUID> bijection =
    Bijection.of(TypoUUID::value, TypoUUID::new);

  static public PgText<TypoUUID> pgText =
    PgText.textString.contramap(v -> v.value().toString());

  static public PgType<TypoUUID> pgType =
    PgTypes.uuid.bimap(v -> new TypoUUID(v), v -> v.value()).renamed("uuid");

  static public PgType<TypoUUID[]> pgTypeArray =
    TypoUUID.pgType.array(PgRead.massageJdbcArrayTo(UUID[].class).map(xs -> arrayMap.map(xs, v -> new TypoUUID(v), TypoUUID.class)), PgWrite.<UUID>passObjectToJdbc().array(TypoUUID.pgType.typename().<UUID>as()).contramap(xs -> arrayMap.map(xs, (TypoUUID v) -> v.value(), UUID.class)));

  static public TypoUUID randomUUID() {
    return new TypoUUID(UUID.randomUUID());
  };
}