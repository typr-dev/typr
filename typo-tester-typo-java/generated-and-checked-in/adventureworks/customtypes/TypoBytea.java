/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes;

import com.fasterxml.jackson.annotation.JsonValue;
import typo.dsl.Bijection;
import typo.runtime.ByteArrays;
import typo.runtime.PgText;
import typo.runtime.PgType;
import typo.runtime.PgTypes;

/** This represents the bytea datatype in PostgreSQL */
public record TypoBytea(@JsonValue Byte[] value) {
  public TypoBytea withValue(Byte[] value) {
    return new TypoBytea(value);
  };

  static public Bijection<TypoBytea, Byte[]> bijection =
    Bijection.of(TypoBytea::value, TypoBytea::new);

  static public PgText<TypoBytea> pgText =
    PgText.textByteArray.contramap(v -> ByteArrays.unbox(v.value()));

  static public PgType<TypoBytea> pgType =
    PgTypes.bytea.bimap((byte[] v) -> new TypoBytea(ByteArrays.box(v)), (TypoBytea v) -> ByteArrays.unbox(v.value())).renamed("bytea");
}