/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes;

import com.fasterxml.jackson.annotation.JsonValue;
import org.postgresql.util.PGobject;
import typo.dsl.Bijection;
import typo.runtime.PgRead;
import typo.runtime.PgText;
import typo.runtime.PgType;
import typo.runtime.PgWrite;
import typo.runtime.internal.TypoPGObjectHelper;
import typo.runtime.internal.arrayMap;

/** int2vector (via PGObject). Valid syntax: `TypoInt2Vector("1 2 3") */
public record TypoInt2Vector(@JsonValue String value) {
  public TypoInt2Vector withValue(String value) {
    return new TypoInt2Vector(value);
  };

  static public Bijection<TypoInt2Vector, String> bijection =
    Bijection.of(TypoInt2Vector::value, TypoInt2Vector::new);

  static public PgText<TypoInt2Vector> pgText =
    PgText.textString.contramap(v -> v.value());

  static public PgType<TypoInt2Vector> pgType =
    PgType.of(
      "int2vector",
      PgRead.castJdbcObjectTo(PGobject.class).map((PGobject v) -> new TypoInt2Vector(v.getValue())),
      PgWrite.<PGobject>passObjectToJdbc().contramap((TypoInt2Vector v) -> TypoPGObjectHelper.create("int2vector", v.value())),
      TypoInt2Vector.pgText
    );

  static public PgType<TypoInt2Vector[]> pgTypeArray =
    TypoInt2Vector.pgType.array(PgRead.castJdbcArrayTo(PGobject.class).map((PGobject[] xs) -> arrayMap.map(xs, (PGobject v) -> new TypoInt2Vector(v.getValue()), TypoInt2Vector.class)), PgWrite.<PGobject>passObjectToJdbc().array(TypoInt2Vector.pgType.typename().<PGobject>as()).contramap((TypoInt2Vector[] xs) -> arrayMap.map(xs, (TypoInt2Vector v) -> TypoPGObjectHelper.create("int2vector", v.value()), PGobject.class)));
}