/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public_.flaff;

import adventureworks.public_.ShortText;
import java.util.List;
import java.util.Optional;
import typo.dsl.ForeignKey;
import typo.dsl.Path;
import typo.dsl.SqlExpr;
import typo.dsl.SqlExpr.CompositeIn;
import typo.dsl.SqlExpr.CompositeIn.Part;
import typo.dsl.SqlExpr.FieldLike;
import typo.dsl.SqlExpr.IdField;
import typo.dsl.SqlExpr.OptField;
import typo.dsl.Structure.Relation;
import typo.runtime.PgTypes;

public interface FlaffFields {
  static final class Impl extends Relation<FlaffFields, FlaffRow> {
    Impl(List<Path> path) {
      super(path);
    }

    @Override
    public FlaffFields fields() {
      return new FlaffFields() {
               public IdField<ShortText, FlaffRow> code() {
                 return new IdField<ShortText, FlaffRow>(_path, "code", FlaffRow::code, Optional.empty(), Optional.of("text"), (row, value) -> row.withCode(value), ShortText.pgType);
               };
               public IdField</* max 20 chars */ String, FlaffRow> anotherCode() {
                 return new IdField</* max 20 chars */ String, FlaffRow>(_path, "another_code", FlaffRow::anotherCode, Optional.empty(), Optional.empty(), (row, value) -> row.withAnotherCode(value), PgTypes.text);
               };
               public IdField<Integer, FlaffRow> someNumber() {
                 return new IdField<Integer, FlaffRow>(_path, "some_number", FlaffRow::someNumber, Optional.empty(), Optional.of("int4"), (row, value) -> row.withSomeNumber(value), PgTypes.int4);
               };
               public IdField<ShortText, FlaffRow> specifier() {
                 return new IdField<ShortText, FlaffRow>(_path, "specifier", FlaffRow::specifier, Optional.empty(), Optional.of("text"), (row, value) -> row.withSpecifier(value), ShortText.pgType);
               };
               public OptField<ShortText, FlaffRow> parentspecifier() {
                 return new OptField<ShortText, FlaffRow>(_path, "parentspecifier", FlaffRow::parentspecifier, Optional.empty(), Optional.of("text"), (row, value) -> row.withParentspecifier(value), ShortText.pgType);
               };
             };
    };

    @Override
    public List<FieldLike<?, FlaffRow>> columns() {
      return List.of(this.fields().code(), this.fields().anotherCode(), this.fields().someNumber(), this.fields().specifier(), this.fields().parentspecifier());
    };

    public Impl copy(List<Path> path) {
      return new Impl(path);
    };
  };

  static Relation<FlaffFields, FlaffRow> structure() {
    return new Impl(List.of());
  };

  IdField<ShortText, FlaffRow> code();

  IdField</* max 20 chars */ String, FlaffRow> anotherCode();

  IdField<Integer, FlaffRow> someNumber();

  IdField<ShortText, FlaffRow> specifier();

  OptField<ShortText, FlaffRow> parentspecifier();

  default ForeignKey<FlaffFields, FlaffRow> fkFlaff() {
    return ForeignKey.<FlaffFields, FlaffRow>of("public.flaff_parent_fk").withColumnPair(code(), FlaffFields::code)
    .withColumnPair(anotherCode(), FlaffFields::anotherCode)
    .withColumnPair(someNumber(), FlaffFields::someNumber)
    .withColumnPair(parentspecifier(), FlaffFields::specifier);
  };

  default SqlExpr<Boolean> compositeIdIs(FlaffId compositeId) {
    return SqlExpr.all(code().isEqual(compositeId.code()), anotherCode().isEqual(compositeId.anotherCode()), someNumber().isEqual(compositeId.someNumber()), specifier().isEqual(compositeId.specifier()));
  };

  default SqlExpr<Boolean> compositeIdIn(List<FlaffId> compositeIds) {
    return new CompositeIn(List.of(new Part<ShortText, FlaffId, FlaffRow>(code(), FlaffId::code, ShortText.pgType), new Part</* max 20 chars */ String, FlaffId, FlaffRow>(anotherCode(), FlaffId::anotherCode, PgTypes.text), new Part<Integer, FlaffId, FlaffRow>(someNumber(), FlaffId::someNumber, PgTypes.int4), new Part<ShortText, FlaffId, FlaffRow>(specifier(), FlaffId::specifier, ShortText.pgType)), compositeIds);
  };
}