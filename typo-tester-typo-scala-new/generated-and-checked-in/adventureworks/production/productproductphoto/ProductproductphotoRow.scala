/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.production.productproductphoto

import adventureworks.customtypes.Defaulted
import adventureworks.production.product.ProductId
import adventureworks.production.productphoto.ProductphotoId
import adventureworks.public.Flag
import java.time.LocalDateTime
import typo.runtime.PgText
import typo.runtime.PgTypes
import typo.scaladsl.RowParser
import typo.scaladsl.RowParsers

/** Table: production.productproductphoto
 * Cross-reference table mapping products and product photos.
 * Composite primary key: productid, productphotoid
 */
case class ProductproductphotoRow(
  /** Product identification number. Foreign key to Product.ProductID.
   * Points to [[adventureworks.production.product.ProductRow.productid]]
   */
  productid: ProductId,
  /** Product photo identification number. Foreign key to ProductPhoto.ProductPhotoID.
   * Points to [[adventureworks.production.productphoto.ProductphotoRow.productphotoid]]
   */
  productphotoid: ProductphotoId,
  /** 0 = Photo is not the principal image. 1 = Photo is the principal image.
   * Default: false
   */
  primary: Flag,
  /** Default: now() */
  modifieddate: LocalDateTime
) {
  def compositeId: ProductproductphotoId = new ProductproductphotoId(productid, productphotoid)

  def id: ProductproductphotoId = this.compositeId

  def toUnsavedRow(
    primary: Defaulted[Flag] = Defaulted.Provided(this.primary),
    modifieddate: Defaulted[LocalDateTime] = Defaulted.Provided(this.modifieddate)
  ): ProductproductphotoRowUnsaved = {
    new ProductproductphotoRowUnsaved(
      productid,
      productphotoid,
      primary,
      modifieddate
    )
  }
}

object ProductproductphotoRow {
  val `_rowParser`: RowParser[ProductproductphotoRow] = {
    RowParsers.of(ProductId.pgType, ProductphotoId.pgType, Flag.pgType, PgTypes.timestamp)((t0, t1, t2, t3) => new ProductproductphotoRow(
      t0,
      t1,
      t2,
      t3
    ))(row => Array[Any](row.productid, row.productphotoid, row.primary, row.modifieddate))
  }

  def apply(
    compositeId: ProductproductphotoId,
    primary: Flag,
    modifieddate: LocalDateTime
  ): ProductproductphotoRow = {
    new ProductproductphotoRow(
      compositeId.productid,
      compositeId.productphotoid,
      primary,
      modifieddate
    )
  }

  given pgText: PgText[ProductproductphotoRow] = PgText.from(`_rowParser`.underlying)
}