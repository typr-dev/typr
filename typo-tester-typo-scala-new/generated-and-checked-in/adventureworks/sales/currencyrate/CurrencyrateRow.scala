/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.sales.currencyrate

import adventureworks.customtypes.Defaulted
import adventureworks.sales.currency.CurrencyId
import java.time.LocalDateTime
import typo.runtime.PgText
import typo.runtime.PgTypes
import typo.scaladsl.RowParser
import typo.scaladsl.RowParsers
import typo.scaladsl.ScalaDbTypes

/** Table: sales.currencyrate
 * Currency exchange rates.
 * Primary key: currencyrateid
 */
case class CurrencyrateRow(
  /** Primary key for CurrencyRate records.
   * Default: nextval('sales.currencyrate_currencyrateid_seq'::regclass)
   */
  currencyrateid: CurrencyrateId,
  /** Date and time the exchange rate was obtained. */
  currencyratedate: LocalDateTime,
  /** Exchange rate was converted from this currency code.
   * Points to [[adventureworks.sales.currency.CurrencyRow.currencycode]]
   */
  fromcurrencycode: CurrencyId,
  /** Exchange rate was converted to this currency code.
   * Points to [[adventureworks.sales.currency.CurrencyRow.currencycode]]
   */
  tocurrencycode: CurrencyId,
  /** Average exchange rate for the day. */
  averagerate: BigDecimal,
  /** Final exchange rate for the day. */
  endofdayrate: BigDecimal,
  /** Default: now() */
  modifieddate: LocalDateTime
) {
  def id: CurrencyrateId = currencyrateid

  def toUnsavedRow(
    currencyrateid: Defaulted[CurrencyrateId],
    modifieddate: Defaulted[LocalDateTime] = Defaulted.Provided(this.modifieddate)
  ): CurrencyrateRowUnsaved = {
    new CurrencyrateRowUnsaved(
      currencyratedate,
      fromcurrencycode,
      tocurrencycode,
      averagerate,
      endofdayrate,
      currencyrateid,
      modifieddate
    )
  }
}

object CurrencyrateRow {
  val `_rowParser`: RowParser[CurrencyrateRow] = {
    RowParsers.of(CurrencyrateId.pgType, PgTypes.timestamp, CurrencyId.pgType, CurrencyId.pgType, ScalaDbTypes.PgTypes.numeric, ScalaDbTypes.PgTypes.numeric, PgTypes.timestamp)((t0, t1, t2, t3, t4, t5, t6) => new CurrencyrateRow(
      t0,
      t1,
      t2,
      t3,
      t4,
      t5,
      t6
    ))(row => Array[Any](row.currencyrateid, row.currencyratedate, row.fromcurrencycode, row.tocurrencycode, row.averagerate, row.endofdayrate, row.modifieddate))
  }

  given pgText: PgText[CurrencyrateRow] = PgText.from(`_rowParser`.underlying)
}