/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.production.productreview

import adventureworks.customtypes.Defaulted
import adventureworks.production.product.ProductId
import adventureworks.public.Name
import java.time.LocalDateTime
import typr.kotlindsl.KotlinDbTypes
import typr.kotlindsl.RowParser
import typr.kotlindsl.RowParsers
import typr.kotlindsl.nullable
import typr.runtime.PgText
import typr.runtime.PgTypes

/** Table: production.productreview
  * Customer reviews of products they have purchased.
  * Primary key: productreviewid
  */
data class ProductreviewRow(
  /** Primary key for ProductReview records.
    * Default: nextval('production.productreview_productreviewid_seq'::regclass)
    */
  val productreviewid: ProductreviewId,
  /** Product identification number. Foreign key to Product.ProductID.
    * Points to [adventureworks.production.product.ProductRow.productid]
    */
  val productid: ProductId,
  /** Name of the reviewer. */
  val reviewername: Name,
  /** Date review was submitted.
    * Default: now()
    */
  val reviewdate: LocalDateTime,
  /** Reviewer's e-mail address. */
  val emailaddress: String,
  /** Product rating given by the reviewer. Scale is 1 to 5 with 5 as the highest rating.
    * Constraint CK_ProductReview_Rating affecting columns rating: (((rating >= 1) AND (rating <= 5)))
    */
  val rating: Int,
  /** Reviewer's comments */
  val comments: /* max 3850 chars */ String?,
  /** Default: now() */
  val modifieddate: LocalDateTime
) {
  fun id(): ProductreviewId = productreviewid

  fun toUnsavedRow(
    productreviewid: Defaulted<ProductreviewId>,
    reviewdate: Defaulted<LocalDateTime>,
    modifieddate: Defaulted<LocalDateTime>
  ): ProductreviewRowUnsaved = ProductreviewRowUnsaved(productid, reviewername, emailaddress, rating, comments, productreviewid, reviewdate, modifieddate)

  companion object {
    val _rowParser: RowParser<ProductreviewRow> = RowParsers.of(ProductreviewId.pgType, ProductId.pgType, Name.pgType, PgTypes.timestamp, PgTypes.text, KotlinDbTypes.PgTypes.int4, PgTypes.text.nullable(), PgTypes.timestamp, { t0, t1, t2, t3, t4, t5, t6, t7 -> ProductreviewRow(t0, t1, t2, t3, t4, t5, t6, t7) }, { row -> arrayOf<Any?>(row.productreviewid, row.productid, row.reviewername, row.reviewdate, row.emailaddress, row.rating, row.comments, row.modifieddate) })

    val pgText: PgText<ProductreviewRow> =
      PgText.from(_rowParser.underlying)
  }
}