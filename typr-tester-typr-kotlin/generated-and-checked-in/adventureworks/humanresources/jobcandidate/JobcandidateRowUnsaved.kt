/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.humanresources.jobcandidate

import adventureworks.customtypes.Defaulted
import adventureworks.customtypes.Defaulted.UseDefault
import adventureworks.person.businessentity.BusinessentityId
import java.time.LocalDateTime
import typr.data.Xml
import typr.kotlindsl.nullable
import typr.runtime.PgText
import typr.runtime.PgTypes

/** This class corresponds to a row in table `humanresources.jobcandidate` which has not been persisted yet */
data class JobcandidateRowUnsaved(
  /** Employee identification number if applicant was hired. Foreign key to Employee.BusinessEntityID.
    * Points to [adventureworks.humanresources.employee.EmployeeRow.businessentityid]
    */
  val businessentityid: BusinessentityId? = null,
  /** RÃ©sumÃ© in XML format. */
  val resume: Xml? = null,
  /** Default: nextval('humanresources.jobcandidate_jobcandidateid_seq'::regclass)
    * Primary key for JobCandidate records.
    */
  val jobcandidateid: Defaulted<JobcandidateId> = UseDefault(),
  /** Default: now() */
  val modifieddate: Defaulted<LocalDateTime> = UseDefault()
) {
  fun toRow(
    jobcandidateidDefault: () -> JobcandidateId,
    modifieddateDefault: () -> LocalDateTime
  ): JobcandidateRow = JobcandidateRow(jobcandidateid = jobcandidateid.getOrElse(jobcandidateidDefault), businessentityid = businessentityid, resume = resume, modifieddate = modifieddate.getOrElse(modifieddateDefault))

  companion object {
    val pgText: PgText<JobcandidateRowUnsaved> =
      PgText.instance({ row, sb -> BusinessentityId.pgType.nullable().pgText().unsafeEncode(row.businessentityid, sb)
      sb.append(PgText.DELIMETER)
      PgTypes.xml.nullable().pgText().unsafeEncode(row.resume, sb)
      sb.append(PgText.DELIMETER)
      Defaulted.pgText(JobcandidateId.pgType.pgText()).unsafeEncode(row.jobcandidateid, sb)
      sb.append(PgText.DELIMETER)
      Defaulted.pgText(PgTypes.timestamp.pgText()).unsafeEncode(row.modifieddate, sb) })
  }
}