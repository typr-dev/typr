/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.product_images

import com.fasterxml.jackson.annotation.JsonProperty
import java.util.Optional
import testdb.customtypes.Defaulted
import testdb.customtypes.Defaulted.UseDefault
import testdb.products.ProductsId
import typo.runtime.MariaText
import typo.runtime.MariaTypes

/** This class corresponds to a row in table `product_images` which has not been persisted yet */
data class ProductImagesRowUnsaved(
  /** 
    * Points to [testdb.products.ProductsRow.productId]
    */
  @JsonProperty("product_id") val productId: ProductsId,
  /**  */
  @JsonProperty("image_url") val imageUrl: String,
  /** Default: NULL

    */
  @JsonProperty("thumbnail_url") val thumbnailUrl: Defaulted<Optional<String>> = UseDefault(),
  /** Default: NULL

    */
  @JsonProperty("alt_text") val altText: Defaulted<Optional<String>> = UseDefault(),
  /** Default: 0

    */
  @JsonProperty("sort_order") val sortOrder: Defaulted<Short> = UseDefault(),
  /** Default: 0

    */
  @JsonProperty("is_primary") val isPrimary: Defaulted<Boolean> = UseDefault(),
  /** Default: NULL
    * Optional embedded image data
    */
  @JsonProperty("image_data") val imageData: Defaulted<Optional<ByteArray>> = UseDefault()
) {
  fun toRow(
    thumbnailUrlDefault: () -> Optional<String>,
    altTextDefault: () -> Optional<String>,
    sortOrderDefault: () -> Short,
    isPrimaryDefault: () -> Boolean,
    imageDataDefault: () -> Optional<ByteArray>,
    imageIdDefault: () -> ProductImagesId
  ): ProductImagesRow = ProductImagesRow(imageId = imageIdDefault(), productId = productId, imageUrl = imageUrl, thumbnailUrl = thumbnailUrl.getOrElse(thumbnailUrlDefault), altText = altText.getOrElse(altTextDefault), sortOrder = sortOrder.getOrElse(sortOrderDefault), isPrimary = isPrimary.getOrElse(isPrimaryDefault), imageData = imageData.getOrElse(imageDataDefault))

  companion object {
    val mariaText: MariaText<ProductImagesRowUnsaved> =
      MariaText.instance({ row, sb -> ProductsId.pgType.mariaText().unsafeEncode(row.productId, sb)
      sb.append(MariaText.DELIMETER)
      MariaTypes.varchar.mariaText().unsafeEncode(row.imageUrl, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.varchar.opt().mariaText()).unsafeEncode(row.thumbnailUrl, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.varchar.opt().mariaText()).unsafeEncode(row.altText, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.tinyintUnsigned.mariaText()).unsafeEncode(row.sortOrder, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.bool.mariaText()).unsafeEncode(row.isPrimary, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.longblob.opt().mariaText()).unsafeEncode(row.imageData, sb) })
  }
}