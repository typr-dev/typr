/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.customers

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDateTime
import java.util.Optional
import testdb.customer_status.CustomerStatusId
import testdb.customtypes.Defaulted
import typo.data.maria.MariaSet
import typo.runtime.MariaText
import typo.runtime.MariaTypes
import typo.runtime.RowParser
import typo.runtime.RowParsers

/** Table: customers
  * Primary key: customer_id
  */
data class CustomersRow(
  /** 
    * AUTO_INCREMENT
    */
  @JsonProperty("customer_id") val customerId: CustomersId,
  /**  */
  val email: String,
  /**  */
  @JsonProperty("password_hash") val passwordHash: ByteArray,
  /**  */
  @JsonProperty("first_name") val firstName: String,
  /**  */
  @JsonProperty("last_name") val lastName: String,
  /** 
    * Default: NULL
    */
  val phone: Optional<String>,
  /** 
    * Default: 'pending'
    * Points to [testdb.customer_status.CustomerStatusRow.statusCode]
    */
  val status: CustomerStatusId,
  /** 
    * Default: 'bronze'
    */
  val tier: String,
  /** 
    * Default: NULL
    */
  val preferences: Optional<String>,
  /** 
    * Default: NULL
    */
  @JsonProperty("marketing_flags") val marketingFlags: Optional<MariaSet>,
  /** 
    * Default: NULL
    */
  val notes: Optional<String>,
  /** 
    * Default: current_timestamp(6)
    */
  @JsonProperty("created_at") val createdAt: LocalDateTime,
  /** 
    * Default: current_timestamp(6)
    */
  @JsonProperty("updated_at") val updatedAt: LocalDateTime,
  /** 
    * Default: NULL
    */
  @JsonProperty("last_login_at") val lastLoginAt: Optional<LocalDateTime>
) {
  fun id(): CustomersId = customerId

  fun toUnsavedRow(
    phone: Defaulted<Optional<String>>,
    status: Defaulted<CustomerStatusId>,
    tier: Defaulted<String>,
    preferences: Defaulted<Optional<String>>,
    marketingFlags: Defaulted<Optional<MariaSet>>,
    notes: Defaulted<Optional<String>>,
    createdAt: Defaulted<LocalDateTime>,
    updatedAt: Defaulted<LocalDateTime>,
    lastLoginAt: Defaulted<Optional<LocalDateTime>>
  ): CustomersRowUnsaved = CustomersRowUnsaved(email, passwordHash, firstName, lastName, phone, status, tier, preferences, marketingFlags, notes, createdAt, updatedAt, lastLoginAt)

  companion object {
    val _rowParser: RowParser<CustomersRow> = RowParsers.of(CustomersId.pgType, MariaTypes.varchar, MariaTypes.binary, MariaTypes.varchar, MariaTypes.varchar, MariaTypes.varchar.opt(), CustomerStatusId.pgType, MariaTypes.text, MariaTypes.longtext.opt(), MariaTypes.set.opt(), MariaTypes.text.opt(), MariaTypes.datetime, MariaTypes.datetime, MariaTypes.datetime.opt(), { t0, t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12, t13 -> CustomersRow(t0!!, t1!!, t2!!, t3!!, t4!!, t5!!, t6!!, t7!!, t8!!, t9!!, t10!!, t11!!, t12!!, t13!!) }, { row -> arrayOf<Any?>(row.customerId, row.email, row.passwordHash, row.firstName, row.lastName, row.phone, row.status, row.tier, row.preferences, row.marketingFlags, row.notes, row.createdAt, row.updatedAt, row.lastLoginAt) })

    val mariaText: MariaText<CustomersRow> =
      MariaText.from(_rowParser)
  }
}