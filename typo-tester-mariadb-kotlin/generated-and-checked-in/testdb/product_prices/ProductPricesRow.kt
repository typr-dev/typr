/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.product_prices

import com.fasterxml.jackson.annotation.JsonProperty
import java.math.BigDecimal
import java.time.LocalDate
import java.util.Optional
import testdb.customtypes.Defaulted
import testdb.price_tiers.PriceTiersId
import testdb.products.ProductsId
import typo.runtime.MariaText
import typo.runtime.MariaTypes
import typo.runtime.RowParser
import typo.runtime.RowParsers

/** Table: product_prices
  * Primary key: price_id
  */
data class ProductPricesRow(
  /** 
    * AUTO_INCREMENT
    */
  @JsonProperty("price_id") val priceId: ProductPricesId,
  /** 
    * Points to [testdb.products.ProductsRow.productId]
    */
  @JsonProperty("product_id") val productId: ProductsId,
  /** 
    * Default: NULL
    * Points to [testdb.price_tiers.PriceTiersRow.tierId]
    */
  @JsonProperty("tier_id") val tierId: Optional<PriceTiersId>,
  /**  */
  val price: BigDecimal,
  /** 
    * Default: 'USD'
    */
  @JsonProperty("currency_code") val currencyCode: String,
  /**  */
  @JsonProperty("valid_from") val validFrom: LocalDate,
  /** 
    * Default: NULL
    */
  @JsonProperty("valid_to") val validTo: Optional<LocalDate>
) {
  fun id(): ProductPricesId = priceId

  fun toUnsavedRow(
    tierId: Defaulted<Optional<PriceTiersId>>,
    currencyCode: Defaulted<String>,
    validTo: Defaulted<Optional<LocalDate>>
  ): ProductPricesRowUnsaved = ProductPricesRowUnsaved(productId, price, validFrom, tierId, currencyCode, validTo)

  companion object {
    val _rowParser: RowParser<ProductPricesRow> = RowParsers.of(ProductPricesId.pgType, ProductsId.pgType, PriceTiersId.pgType.opt(), MariaTypes.decimal, MariaTypes.char_, MariaTypes.date, MariaTypes.date.opt(), { t0, t1, t2, t3, t4, t5, t6 -> ProductPricesRow(t0!!, t1!!, t2!!, t3!!, t4!!, t5!!, t6!!) }, { row -> arrayOf<Any?>(row.priceId, row.productId, row.tierId, row.price, row.currencyCode, row.validFrom, row.validTo) })

    val mariaText: MariaText<ProductPricesRow> =
      MariaText.from(_rowParser)
  }
}