/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.audit_log

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDateTime
import java.util.Optional
import testdb.customtypes.Defaulted
import testdb.customtypes.Defaulted.UseDefault
import typo.data.maria.Inet6
import typo.runtime.MariaText
import typo.runtime.MariaTypes

/** This class corresponds to a row in table `audit_log` which has not been persisted yet */
data class AuditLogRowUnsaved(
  /**  */
  @JsonProperty("table_name") val tableName: String,
  /**  */
  @JsonProperty("record_id") val recordId: String,
  /**  */
  val action: String,
  /** Default: NULL

    */
  @JsonProperty("old_values") val oldValues: Defaulted<Optional<String>> = UseDefault(),
  /** Default: NULL

    */
  @JsonProperty("new_values") val newValues: Defaulted<Optional<String>> = UseDefault(),
  /** Default: NULL

    */
  @JsonProperty("changed_by") val changedBy: Defaulted<Optional<String>> = UseDefault(),
  /** Default: current_timestamp(6)

    */
  @JsonProperty("changed_at") val changedAt: Defaulted<LocalDateTime> = UseDefault(),
  /** Default: NULL

    */
  @JsonProperty("client_ip") val clientIp: Defaulted<Optional<Inet6>> = UseDefault(),
  /** Default: NULL

    */
  @JsonProperty("session_id") val sessionId: Defaulted<Optional<ByteArray>> = UseDefault()
) {
  fun toRow(
    oldValuesDefault: () -> Optional<String>,
    newValuesDefault: () -> Optional<String>,
    changedByDefault: () -> Optional<String>,
    changedAtDefault: () -> LocalDateTime,
    clientIpDefault: () -> Optional<Inet6>,
    sessionIdDefault: () -> Optional<ByteArray>,
    logIdDefault: () -> AuditLogId
  ): AuditLogRow = AuditLogRow(logId = logIdDefault(), tableName = tableName, recordId = recordId, action = action, oldValues = oldValues.getOrElse(oldValuesDefault), newValues = newValues.getOrElse(newValuesDefault), changedBy = changedBy.getOrElse(changedByDefault), changedAt = changedAt.getOrElse(changedAtDefault), clientIp = clientIp.getOrElse(clientIpDefault), sessionId = sessionId.getOrElse(sessionIdDefault))

  companion object {
    val mariaText: MariaText<AuditLogRowUnsaved> =
      MariaText.instance({ row, sb -> MariaTypes.varchar.mariaText().unsafeEncode(row.tableName, sb)
      sb.append(MariaText.DELIMETER)
      MariaTypes.varchar.mariaText().unsafeEncode(row.recordId, sb)
      sb.append(MariaText.DELIMETER)
      MariaTypes.text.mariaText().unsafeEncode(row.action, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.longtext.opt().mariaText()).unsafeEncode(row.oldValues, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.longtext.opt().mariaText()).unsafeEncode(row.newValues, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.varchar.opt().mariaText()).unsafeEncode(row.changedBy, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.datetime.mariaText()).unsafeEncode(row.changedAt, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.inet6.opt().mariaText()).unsafeEncode(row.clientIp, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.varbinary.opt().mariaText()).unsafeEncode(row.sessionId, sb) })
  }
}