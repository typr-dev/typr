/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.order_history

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDateTime
import java.util.Optional
import testdb.customtypes.Defaulted
import testdb.customtypes.Defaulted.UseDefault
import testdb.orders.OrdersId
import typo.runtime.MariaText
import typo.runtime.MariaTypes

/** This class corresponds to a row in table `order_history` which has not been persisted yet */
data class OrderHistoryRowUnsaved(
  /** 
    * Points to [testdb.orders.OrdersRow.orderId]
    */
  @JsonProperty("order_id") val orderId: OrdersId,
  /**  */
  @JsonProperty("new_status") val newStatus: String,
  /** Default: NULL

    */
  @JsonProperty("previous_status") val previousStatus: Defaulted<Optional<String>> = UseDefault(),
  /** Default: NULL

    */
  @JsonProperty("changed_by") val changedBy: Defaulted<Optional<String>> = UseDefault(),
  /** Default: NULL

    */
  @JsonProperty("change_reason") val changeReason: Defaulted<Optional<String>> = UseDefault(),
  /** Default: NULL

    */
  val metadata: Defaulted<Optional<String>> = UseDefault(),
  /** Default: current_timestamp(6)

    */
  @JsonProperty("created_at") val createdAt: Defaulted<LocalDateTime> = UseDefault()
) {
  fun toRow(
    previousStatusDefault: () -> Optional<String>,
    changedByDefault: () -> Optional<String>,
    changeReasonDefault: () -> Optional<String>,
    metadataDefault: () -> Optional<String>,
    createdAtDefault: () -> LocalDateTime,
    historyIdDefault: () -> OrderHistoryId
  ): OrderHistoryRow = OrderHistoryRow(historyId = historyIdDefault(), orderId = orderId, previousStatus = previousStatus.getOrElse(previousStatusDefault), newStatus = newStatus, changedBy = changedBy.getOrElse(changedByDefault), changeReason = changeReason.getOrElse(changeReasonDefault), metadata = metadata.getOrElse(metadataDefault), createdAt = createdAt.getOrElse(createdAtDefault))

  companion object {
    val mariaText: MariaText<OrderHistoryRowUnsaved> =
      MariaText.instance({ row, sb -> OrdersId.pgType.mariaText().unsafeEncode(row.orderId, sb)
      sb.append(MariaText.DELIMETER)
      MariaTypes.text.mariaText().unsafeEncode(row.newStatus, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.text.opt().mariaText()).unsafeEncode(row.previousStatus, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.varchar.opt().mariaText()).unsafeEncode(row.changedBy, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.varchar.opt().mariaText()).unsafeEncode(row.changeReason, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.longtext.opt().mariaText()).unsafeEncode(row.metadata, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.datetime.mariaText()).unsafeEncode(row.createdAt, sb) })
  }
}