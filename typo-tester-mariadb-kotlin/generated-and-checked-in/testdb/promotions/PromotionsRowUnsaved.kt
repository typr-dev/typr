/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.promotions

import com.fasterxml.jackson.annotation.JsonProperty
import java.math.BigDecimal
import java.time.LocalDateTime
import java.util.Optional
import testdb.customtypes.Defaulted
import testdb.customtypes.Defaulted.UseDefault
import typo.data.maria.MariaSet
import typo.runtime.MariaText
import typo.runtime.MariaTypes

/** This class corresponds to a row in table `promotions` which has not been persisted yet */
data class PromotionsRowUnsaved(
  /**  */
  val code: String,
  /**  */
  val name: String,
  /**  */
  @JsonProperty("discount_type") val discountType: String,
  /**  */
  @JsonProperty("discount_value") val discountValue: BigDecimal,
  /**  */
  @JsonProperty("valid_from") val validFrom: LocalDateTime,
  /**  */
  @JsonProperty("valid_to") val validTo: LocalDateTime,
  /** Default: NULL

    */
  val description: Defaulted<Optional<String>> = UseDefault(),
  /** Default: NULL

    */
  @JsonProperty("min_order_amount") val minOrderAmount: Defaulted<Optional<BigDecimal>> = UseDefault(),
  /** Default: NULL

    */
  @JsonProperty("max_uses") val maxUses: Defaulted<Optional<Long>> = UseDefault(),
  /** Default: 0

    */
  @JsonProperty("uses_count") val usesCount: Defaulted<Long> = UseDefault(),
  /** Default: NULL

    */
  @JsonProperty("max_uses_per_customer") val maxUsesPerCustomer: Defaulted<Optional<Short>> = UseDefault(),
  /** Default: NULL

    */
  @JsonProperty("applicable_to") val applicableTo: Defaulted<Optional<MariaSet>> = UseDefault(),
  /** Default: NULL
    * Complex eligibility rules
    */
  @JsonProperty("rules_json") val rulesJson: Defaulted<Optional<String>> = UseDefault(),
  /** Default: 1

    */
  @JsonProperty("is_active") val isActive: Defaulted<Boolean> = UseDefault(),
  /** Default: current_timestamp()

    */
  @JsonProperty("created_at") val createdAt: Defaulted<LocalDateTime> = UseDefault()
) {
  fun toRow(
    descriptionDefault: () -> Optional<String>,
    minOrderAmountDefault: () -> Optional<BigDecimal>,
    maxUsesDefault: () -> Optional<Long>,
    usesCountDefault: () -> Long,
    maxUsesPerCustomerDefault: () -> Optional<Short>,
    applicableToDefault: () -> Optional<MariaSet>,
    rulesJsonDefault: () -> Optional<String>,
    isActiveDefault: () -> Boolean,
    createdAtDefault: () -> LocalDateTime,
    promotionIdDefault: () -> PromotionsId
  ): PromotionsRow = PromotionsRow(promotionId = promotionIdDefault(), code = code, name = name, description = description.getOrElse(descriptionDefault), discountType = discountType, discountValue = discountValue, minOrderAmount = minOrderAmount.getOrElse(minOrderAmountDefault), maxUses = maxUses.getOrElse(maxUsesDefault), usesCount = usesCount.getOrElse(usesCountDefault), maxUsesPerCustomer = maxUsesPerCustomer.getOrElse(maxUsesPerCustomerDefault), applicableTo = applicableTo.getOrElse(applicableToDefault), rulesJson = rulesJson.getOrElse(rulesJsonDefault), validFrom = validFrom, validTo = validTo, isActive = isActive.getOrElse(isActiveDefault), createdAt = createdAt.getOrElse(createdAtDefault))

  companion object {
    val mariaText: MariaText<PromotionsRowUnsaved> =
      MariaText.instance({ row, sb -> MariaTypes.varchar.mariaText().unsafeEncode(row.code, sb)
      sb.append(MariaText.DELIMETER)
      MariaTypes.varchar.mariaText().unsafeEncode(row.name, sb)
      sb.append(MariaText.DELIMETER)
      MariaTypes.text.mariaText().unsafeEncode(row.discountType, sb)
      sb.append(MariaText.DELIMETER)
      MariaTypes.decimal.mariaText().unsafeEncode(row.discountValue, sb)
      sb.append(MariaText.DELIMETER)
      MariaTypes.datetime.mariaText().unsafeEncode(row.validFrom, sb)
      sb.append(MariaText.DELIMETER)
      MariaTypes.datetime.mariaText().unsafeEncode(row.validTo, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.text.opt().mariaText()).unsafeEncode(row.description, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.decimal.opt().mariaText()).unsafeEncode(row.minOrderAmount, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.intUnsigned.opt().mariaText()).unsafeEncode(row.maxUses, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.intUnsigned.mariaText()).unsafeEncode(row.usesCount, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.tinyintUnsigned.opt().mariaText()).unsafeEncode(row.maxUsesPerCustomer, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.set.opt().mariaText()).unsafeEncode(row.applicableTo, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.longtext.opt().mariaText()).unsafeEncode(row.rulesJson, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.bool.mariaText()).unsafeEncode(row.isActive, sb)
      sb.append(MariaText.DELIMETER)
      Defaulted.mariaText(MariaTypes.datetime.mariaText()).unsafeEncode(row.createdAt, sb) })
  }
}