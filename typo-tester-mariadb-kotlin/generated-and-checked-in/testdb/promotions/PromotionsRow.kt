/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.promotions

import com.fasterxml.jackson.annotation.JsonProperty
import java.math.BigDecimal
import java.time.LocalDateTime
import java.util.Optional
import testdb.customtypes.Defaulted
import typo.data.maria.MariaSet
import typo.runtime.MariaText
import typo.runtime.MariaTypes
import typo.runtime.RowParser
import typo.runtime.RowParsers

/** Table: promotions
  * Primary key: promotion_id
  */
data class PromotionsRow(
  /** 
    * AUTO_INCREMENT
    */
  @JsonProperty("promotion_id") val promotionId: PromotionsId,
  /**  */
  val code: String,
  /**  */
  val name: String,
  /** 
    * Default: NULL
    */
  val description: Optional<String>,
  /**  */
  @JsonProperty("discount_type") val discountType: String,
  /**  */
  @JsonProperty("discount_value") val discountValue: BigDecimal,
  /** 
    * Default: NULL
    */
  @JsonProperty("min_order_amount") val minOrderAmount: Optional<BigDecimal>,
  /** 
    * Default: NULL
    */
  @JsonProperty("max_uses") val maxUses: Optional<Long>,
  /** 
    * Default: 0
    */
  @JsonProperty("uses_count") val usesCount: Long,
  /** 
    * Default: NULL
    */
  @JsonProperty("max_uses_per_customer") val maxUsesPerCustomer: Optional<Short>,
  /** 
    * Default: NULL
    */
  @JsonProperty("applicable_to") val applicableTo: Optional<MariaSet>,
  /** Complex eligibility rules
    * Default: NULL
    */
  @JsonProperty("rules_json") val rulesJson: Optional<String>,
  /**  */
  @JsonProperty("valid_from") val validFrom: LocalDateTime,
  /**  */
  @JsonProperty("valid_to") val validTo: LocalDateTime,
  /** 
    * Default: 1
    */
  @JsonProperty("is_active") val isActive: Boolean,
  /** 
    * Default: current_timestamp()
    */
  @JsonProperty("created_at") val createdAt: LocalDateTime
) {
  fun id(): PromotionsId = promotionId

  fun toUnsavedRow(
    description: Defaulted<Optional<String>>,
    minOrderAmount: Defaulted<Optional<BigDecimal>>,
    maxUses: Defaulted<Optional<Long>>,
    usesCount: Defaulted<Long>,
    maxUsesPerCustomer: Defaulted<Optional<Short>>,
    applicableTo: Defaulted<Optional<MariaSet>>,
    rulesJson: Defaulted<Optional<String>>,
    isActive: Defaulted<Boolean>,
    createdAt: Defaulted<LocalDateTime>
  ): PromotionsRowUnsaved = PromotionsRowUnsaved(code, name, discountType, discountValue, validFrom, validTo, description, minOrderAmount, maxUses, usesCount, maxUsesPerCustomer, applicableTo, rulesJson, isActive, createdAt)

  companion object {
    val _rowParser: RowParser<PromotionsRow> = RowParsers.of(PromotionsId.pgType, MariaTypes.varchar, MariaTypes.varchar, MariaTypes.text.opt(), MariaTypes.text, MariaTypes.decimal, MariaTypes.decimal.opt(), MariaTypes.intUnsigned.opt(), MariaTypes.intUnsigned, MariaTypes.tinyintUnsigned.opt(), MariaTypes.set.opt(), MariaTypes.longtext.opt(), MariaTypes.datetime, MariaTypes.datetime, MariaTypes.bool, MariaTypes.datetime, { t0, t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12, t13, t14, t15 -> PromotionsRow(t0!!, t1!!, t2!!, t3!!, t4!!, t5!!, t6!!, t7!!, t8!!, t9!!, t10!!, t11!!, t12!!, t13!!, t14!!, t15!!) }, { row -> arrayOf<Any?>(row.promotionId, row.code, row.name, row.description, row.discountType, row.discountValue, row.minOrderAmount, row.maxUses, row.usesCount, row.maxUsesPerCustomer, row.applicableTo, row.rulesJson, row.validFrom, row.validTo, row.isActive, row.createdAt) })

    val mariaText: MariaText<PromotionsRow> =
      MariaText.from(_rowParser)
  }
}