/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.order_items

import com.fasterxml.jackson.annotation.JsonProperty
import testdb.customtypes.Defaulted
import typo.scaladsl.RowParser
import typo.scaladsl.RowParsers
import typo.scaladsl.ScalaDbTypes

/** Table: order_items
 * Composite primary key: order_id, product_id
 */
case class OrderItemsRow(
  @JsonProperty("order_id") orderId: Int,
  @JsonProperty("product_id") productId: Int,
  /** Default: 1 */
  quantity: Int,
  @JsonProperty("unit_price") unitPrice: BigDecimal
) {
  def compositeId: OrderItemsId = new OrderItemsId(orderId, productId)

  def id: OrderItemsId = this.compositeId

  def toUnsavedRow(quantity: Defaulted[Int] = Defaulted.Provided(this.quantity)): OrderItemsRowUnsaved = {
    new OrderItemsRowUnsaved(
      orderId,
      productId,
      unitPrice,
      quantity
    )
  }
}

object OrderItemsRow {
  val `_rowParser`: RowParser[OrderItemsRow] = RowParsers.of(ScalaDbTypes.DuckDbTypes.integer, ScalaDbTypes.DuckDbTypes.integer, ScalaDbTypes.DuckDbTypes.integer, ScalaDbTypes.DuckDbTypes.numeric)(OrderItemsRow.apply)(row => Array[Any](row.orderId, row.productId, row.quantity, row.unitPrice))

  def apply(
    compositeId: OrderItemsId,
    quantity: Int,
    unitPrice: BigDecimal
  ): OrderItemsRow = {
    new OrderItemsRow(
      compositeId.orderId,
      compositeId.productId,
      quantity,
      unitPrice
    )
  }
}