/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.employees

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDate
import testdb.customtypes.Defaulted
import typo.runtime.DuckDbText
import typo.runtime.DuckDbTypes
import typo.scaladsl.DuckDbTypeOps
import typo.scaladsl.RowParser
import typo.scaladsl.RowParsers
import typo.scaladsl.ScalaDbTypes

/** Table: employees
 * Composite primary key: emp_number, emp_suffix
 */
case class EmployeesRow(
  @JsonProperty("emp_number") empNumber: Int,
  @JsonProperty("emp_suffix") empSuffix: String,
  @JsonProperty("dept_code") deptCode: String,
  @JsonProperty("dept_region") deptRegion: String,
  @JsonProperty("emp_name") empName: String,
  salary: Option[BigDecimal],
  /** Default: current_date */
  @JsonProperty("hire_date") hireDate: LocalDate
) {
  def compositeId: EmployeesId = new EmployeesId(empNumber, empSuffix)

  def id: EmployeesId = this.compositeId

  def toUnsavedRow(hireDate: Defaulted[LocalDate] = Defaulted.Provided(this.hireDate)): EmployeesRowUnsaved = {
    new EmployeesRowUnsaved(
      empNumber,
      empSuffix,
      deptCode,
      deptRegion,
      empName,
      salary,
      hireDate
    )
  }
}

object EmployeesRow {
  val `_rowParser`: RowParser[EmployeesRow] = {
    RowParsers.of(ScalaDbTypes.DuckDbTypes.integer, DuckDbTypes.varchar, DuckDbTypes.varchar, DuckDbTypes.varchar, DuckDbTypes.varchar, ScalaDbTypes.DuckDbTypes.numeric.nullable, DuckDbTypes.date)((t0, t1, t2, t3, t4, t5, t6) => new EmployeesRow(
      t0,
      t1,
      t2,
      t3,
      t4,
      t5,
      t6
    ))(row => Array[Any](row.empNumber, row.empSuffix, row.deptCode, row.deptRegion, row.empName, row.salary, row.hireDate))
  }

  def apply(
    compositeId: EmployeesId,
    deptCode: String,
    deptRegion: String,
    empName: String,
    salary: Option[BigDecimal],
    hireDate: LocalDate
  ): EmployeesRow = {
    new EmployeesRow(
      compositeId.empNumber,
      compositeId.empSuffix,
      deptCode,
      deptRegion,
      empName,
      salary,
      hireDate
    )
  }

  given duckDbText: DuckDbText[EmployeesRow] = DuckDbText.from(`_rowParser`.underlying)
}