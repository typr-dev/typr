/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package oracledb.customtypes

import com.fasterxml.jackson.databind.annotation.JsonDeserialize
import com.fasterxml.jackson.databind.annotation.JsonSerialize
import oracledb.DefaultedDeserializer
import oracledb.DefaultedSerializer

@JsonSerialize(`using` = classOf[DefaultedSerializer])
@JsonDeserialize(`using` = classOf[DefaultedDeserializer])
/** This signals a value where if you don't provide it, postgres will generate it for you */
sealed trait Defaulted[T] {
  def fold[U](
    onDefault: => U,
    onProvided: T => U
  ): U

  def getOrElse(onDefault: => T): T

  def visit(
    onDefault: => Unit,
    onProvided: T => Unit
  ): Unit
}

object Defaulted {
  case class Provided[T](value: T) extends Defaulted[T] {
    override def fold[U](
      onDefault: => U,
      onProvided: T => U
    ): U = onProvided(value)

    override def getOrElse(onDefault: => T): T = value

    override def visit(
      onDefault: => Unit,
      onProvided: T => Unit
    ): Unit = onProvided(value)
  }

  case class UseDefault[T]() extends Defaulted[T] {
    override def fold[U](
      onDefault: => U,
      onProvided: T => U
    ): U = onDefault

    override def getOrElse(onDefault: => T): T = onDefault

    override def visit(
      onDefault: => Unit,
      onProvided: T => Unit
    ): Unit = onDefault
  }
}