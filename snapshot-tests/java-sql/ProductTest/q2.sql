with 
productionproduct0 as (
  (select (productionproduct0)."productid" AS productionproduct0_productid, (productionproduct0)."name" AS productionproduct0_name, (productionproduct0)."productnumber" AS productionproduct0_productnumber, (productionproduct0)."makeflag" AS productionproduct0_makeflag, (productionproduct0)."finishedgoodsflag" AS productionproduct0_finishedgoodsflag, (productionproduct0)."color" AS productionproduct0_color, (productionproduct0)."safetystocklevel" AS productionproduct0_safetystocklevel, (productionproduct0)."reorderpoint" AS productionproduct0_reorderpoint, (productionproduct0)."standardcost" AS productionproduct0_standardcost, (productionproduct0)."listprice" AS productionproduct0_listprice, (productionproduct0)."size" AS productionproduct0_size, (productionproduct0)."sizeunitmeasurecode" AS productionproduct0_sizeunitmeasurecode, (productionproduct0)."weightunitmeasurecode" AS productionproduct0_weightunitmeasurecode, (productionproduct0)."weight" AS productionproduct0_weight, (productionproduct0)."daystomanufacture" AS productionproduct0_daystomanufacture, (productionproduct0)."productline" AS productionproduct0_productline, (productionproduct0)."class" AS productionproduct0_class, (productionproduct0)."style" AS productionproduct0_style, (productionproduct0)."productsubcategoryid" AS productionproduct0_productsubcategoryid, (productionproduct0)."productmodelid" AS productionproduct0_productmodelid, (productionproduct0)."sellstartdate" AS productionproduct0_sellstartdate, (productionproduct0)."sellenddate" AS productionproduct0_sellenddate, (productionproduct0)."discontinueddate" AS productionproduct0_discontinueddate, (productionproduct0)."rowguid" AS productionproduct0_rowguid, (productionproduct0)."modifieddate" AS productionproduct0_modifieddate from "production"."product" productionproduct0 where ((((((productionproduct0)."productid"  IN (?::int4, ?::int4)) AND (length((productionproduct0)."name" ) > ?::int4)) AND NOT ((((productionproduct0)."name"  || (productionproduct0)."color" ) LIKE ?))) AND (COALESCE((productionproduct0)."color" , ?) != ?)) AND ((productionproduct0)."modifieddate"  < ?::timestamp)))
), productionproductmodel0 as (
  (select (productionproductmodel0)."productmodelid" AS productionproductmodel0_productmodelid, (productionproductmodel0)."name" AS productionproductmodel0_name, (productionproductmodel0)."catalogdescription" AS productionproductmodel0_catalogdescription, (productionproductmodel0)."instructions" AS productionproductmodel0_instructions, (productionproductmodel0)."rowguid" AS productionproductmodel0_rowguid, (productionproductmodel0)."modifieddate" AS productionproductmodel0_modifieddate from "production"."productmodel" productionproductmodel0 where (length((productionproductmodel0)."name" ) > ?::int4))
), join_cte0 as (
  select productionproduct0.productionproduct0_productid AS productionproduct0_productid, productionproduct0.productionproduct0_name AS productionproduct0_name, productionproduct0.productionproduct0_productnumber AS productionproduct0_productnumber, productionproduct0.productionproduct0_makeflag AS productionproduct0_makeflag, productionproduct0.productionproduct0_finishedgoodsflag AS productionproduct0_finishedgoodsflag, productionproduct0.productionproduct0_color AS productionproduct0_color, productionproduct0.productionproduct0_safetystocklevel AS productionproduct0_safetystocklevel, productionproduct0.productionproduct0_reorderpoint AS productionproduct0_reorderpoint, productionproduct0.productionproduct0_standardcost AS productionproduct0_standardcost, productionproduct0.productionproduct0_listprice AS productionproduct0_listprice, productionproduct0.productionproduct0_size AS productionproduct0_size, productionproduct0.productionproduct0_sizeunitmeasurecode AS productionproduct0_sizeunitmeasurecode, productionproduct0.productionproduct0_weightunitmeasurecode AS productionproduct0_weightunitmeasurecode, productionproduct0.productionproduct0_weight AS productionproduct0_weight, productionproduct0.productionproduct0_daystomanufacture AS productionproduct0_daystomanufacture, productionproduct0.productionproduct0_productline AS productionproduct0_productline, productionproduct0.productionproduct0_class AS productionproduct0_class, productionproduct0.productionproduct0_style AS productionproduct0_style, productionproduct0.productionproduct0_productsubcategoryid AS productionproduct0_productsubcategoryid, productionproduct0.productionproduct0_productmodelid AS productionproduct0_productmodelid, productionproduct0.productionproduct0_sellstartdate AS productionproduct0_sellstartdate, productionproduct0.productionproduct0_sellenddate AS productionproduct0_sellenddate, productionproduct0.productionproduct0_discontinueddate AS productionproduct0_discontinueddate, productionproduct0.productionproduct0_rowguid AS productionproduct0_rowguid, productionproduct0.productionproduct0_modifieddate AS productionproduct0_modifieddate, productionproductmodel0.productionproductmodel0_productmodelid AS productionproductmodel0_productmodelid, productionproductmodel0.productionproductmodel0_name AS productionproductmodel0_name, productionproductmodel0.productionproductmodel0_catalogdescription AS productionproductmodel0_catalogdescription, productionproductmodel0.productionproductmodel0_instructions AS productionproductmodel0_instructions, productionproductmodel0.productionproductmodel0_rowguid AS productionproductmodel0_rowguid, productionproductmodel0.productionproductmodel0_modifieddate AS productionproductmodel0_modifieddate
  from productionproduct0
  join productionproductmodel0
  on (productionproduct0.productionproduct0_productmodelid  = productionproductmodel0.productionproductmodel0_productmodelid )
  where (productionproductmodel0.productionproductmodel0_name  != ?)
), productionproductmodel1 as (
  (select (productionproductmodel1)."productmodelid" AS productionproductmodel1_productmodelid, (productionproductmodel1)."name" AS productionproductmodel1_name, (productionproductmodel1)."catalogdescription" AS productionproductmodel1_catalogdescription, (productionproductmodel1)."instructions" AS productionproductmodel1_instructions, (productionproductmodel1)."rowguid" AS productionproductmodel1_rowguid, (productionproductmodel1)."modifieddate" AS productionproductmodel1_modifieddate from "production"."productmodel" productionproductmodel1 where (length((productionproductmodel1)."name" ) > ?::int4))
), left_join_cte0 as (
  select join_cte0.productionproduct0_productid AS productionproduct0_productid, join_cte0.productionproduct0_name AS productionproduct0_name, join_cte0.productionproduct0_productnumber AS productionproduct0_productnumber, join_cte0.productionproduct0_makeflag AS productionproduct0_makeflag, join_cte0.productionproduct0_finishedgoodsflag AS productionproduct0_finishedgoodsflag, join_cte0.productionproduct0_color AS productionproduct0_color, join_cte0.productionproduct0_safetystocklevel AS productionproduct0_safetystocklevel, join_cte0.productionproduct0_reorderpoint AS productionproduct0_reorderpoint, join_cte0.productionproduct0_standardcost AS productionproduct0_standardcost, join_cte0.productionproduct0_listprice AS productionproduct0_listprice, join_cte0.productionproduct0_size AS productionproduct0_size, join_cte0.productionproduct0_sizeunitmeasurecode AS productionproduct0_sizeunitmeasurecode, join_cte0.productionproduct0_weightunitmeasurecode AS productionproduct0_weightunitmeasurecode, join_cte0.productionproduct0_weight AS productionproduct0_weight, join_cte0.productionproduct0_daystomanufacture AS productionproduct0_daystomanufacture, join_cte0.productionproduct0_productline AS productionproduct0_productline, join_cte0.productionproduct0_class AS productionproduct0_class, join_cte0.productionproduct0_style AS productionproduct0_style, join_cte0.productionproduct0_productsubcategoryid AS productionproduct0_productsubcategoryid, join_cte0.productionproduct0_productmodelid AS productionproduct0_productmodelid, join_cte0.productionproduct0_sellstartdate AS productionproduct0_sellstartdate, join_cte0.productionproduct0_sellenddate AS productionproduct0_sellenddate, join_cte0.productionproduct0_discontinueddate AS productionproduct0_discontinueddate, join_cte0.productionproduct0_rowguid AS productionproduct0_rowguid, join_cte0.productionproduct0_modifieddate AS productionproduct0_modifieddate, join_cte0.productionproductmodel0_productmodelid AS productionproductmodel0_productmodelid, join_cte0.productionproductmodel0_name AS productionproductmodel0_name, join_cte0.productionproductmodel0_catalogdescription AS productionproductmodel0_catalogdescription, join_cte0.productionproductmodel0_instructions AS productionproductmodel0_instructions, join_cte0.productionproductmodel0_rowguid AS productionproductmodel0_rowguid, join_cte0.productionproductmodel0_modifieddate AS productionproductmodel0_modifieddate, productionproductmodel1.productionproductmodel1_productmodelid AS productionproductmodel1_productmodelid, productionproductmodel1.productionproductmodel1_name AS productionproductmodel1_name, productionproductmodel1.productionproductmodel1_catalogdescription AS productionproductmodel1_catalogdescription, productionproductmodel1.productionproductmodel1_instructions AS productionproductmodel1_instructions, productionproductmodel1.productionproductmodel1_rowguid AS productionproductmodel1_rowguid, productionproductmodel1.productionproductmodel1_modifieddate AS productionproductmodel1_modifieddate
  from join_cte0
  left join productionproductmodel1
  on ((join_cte0.productionproduct0_productmodelid  = productionproductmodel1.productionproductmodel1_productmodelid ) AND ?::bool)
  order by productionproductmodel1.productionproductmodel1_name  ASC, join_cte0.productionproduct0_color  DESC NULLS FIRST
)
select left_join_cte0.productionproduct0_productid, left_join_cte0.productionproduct0_name, left_join_cte0.productionproduct0_productnumber, left_join_cte0.productionproduct0_makeflag, left_join_cte0.productionproduct0_finishedgoodsflag, left_join_cte0.productionproduct0_color, left_join_cte0.productionproduct0_safetystocklevel, left_join_cte0.productionproduct0_reorderpoint, left_join_cte0.productionproduct0_standardcost, left_join_cte0.productionproduct0_listprice, left_join_cte0.productionproduct0_size, left_join_cte0.productionproduct0_sizeunitmeasurecode, left_join_cte0.productionproduct0_weightunitmeasurecode, left_join_cte0.productionproduct0_weight, left_join_cte0.productionproduct0_daystomanufacture, left_join_cte0.productionproduct0_productline, left_join_cte0.productionproduct0_class, left_join_cte0.productionproduct0_style, left_join_cte0.productionproduct0_productsubcategoryid, left_join_cte0.productionproduct0_productmodelid, left_join_cte0.productionproduct0_sellstartdate::text, left_join_cte0.productionproduct0_sellenddate::text, left_join_cte0.productionproduct0_discontinueddate::text, left_join_cte0.productionproduct0_rowguid, left_join_cte0.productionproduct0_modifieddate::text, left_join_cte0.productionproductmodel0_productmodelid, left_join_cte0.productionproductmodel0_name, left_join_cte0.productionproductmodel0_catalogdescription, left_join_cte0.productionproductmodel0_instructions, left_join_cte0.productionproductmodel0_rowguid, left_join_cte0.productionproductmodel0_modifieddate::text, left_join_cte0.productionproductmodel1_productmodelid, left_join_cte0.productionproductmodel1_name, left_join_cte0.productionproductmodel1_catalogdescription, left_join_cte0.productionproductmodel1_instructions, left_join_cte0.productionproductmodel1_rowguid, left_join_cte0.productionproductmodel1_modifieddate::text from left_join_cte0