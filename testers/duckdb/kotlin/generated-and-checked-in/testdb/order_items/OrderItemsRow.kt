/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.order_items

import com.fasterxml.jackson.annotation.JsonProperty
import dev.typr.foundations.DuckDbTypes
import dev.typr.foundations.Tuple.Tuple4
import dev.typr.foundations.kotlin.KotlinDbTypes
import dev.typr.foundations.kotlin.RowParser
import dev.typr.foundations.kotlin.RowParsers
import java.math.BigDecimal
import testdb.customtypes.Defaulted

/** Table: order_items
  * Composite primary key: order_id, product_id
  */
data class OrderItemsRow(
  @field:JsonProperty("order_id") val orderId: Int,
  @field:JsonProperty("product_id") val productId: Int,
  /** Default: 1 */
  val quantity: Int,
  @field:JsonProperty("unit_price") val unitPrice: BigDecimal
) : Tuple4<Int, Int, Int, BigDecimal> {
  override fun _1(): Int = orderId

  override fun _2(): Int = productId

  override fun _3(): Int = quantity

  override fun _4(): BigDecimal = unitPrice

  fun compositeId(): OrderItemsId = OrderItemsId(orderId, productId)

  fun id(): OrderItemsId = this.compositeId()

  fun toUnsavedRow(quantity: Defaulted<Int> = Defaulted.Provided(this.quantity)): OrderItemsRowUnsaved = OrderItemsRowUnsaved(orderId, productId, unitPrice, quantity)

  companion object {
    val _rowParser: RowParser<OrderItemsRow> = RowParsers.of(KotlinDbTypes.DuckDbTypes.integer, KotlinDbTypes.DuckDbTypes.integer, KotlinDbTypes.DuckDbTypes.integer, DuckDbTypes.numeric, { t0, t1, t2, t3 -> OrderItemsRow(t0, t1, t2, t3) }, { row -> arrayOf<Any?>(row.orderId, row.productId, row.quantity, row.unitPrice) })

    fun apply(
      compositeId: OrderItemsId,
      quantity: Int,
      unitPrice: BigDecimal
    ): OrderItemsRow = OrderItemsRow(compositeId.orderId, compositeId.productId, quantity, unitPrice)
  }
}