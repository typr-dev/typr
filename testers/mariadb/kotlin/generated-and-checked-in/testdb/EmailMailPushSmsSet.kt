/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb

import dev.typr.foundations.MariaType
import dev.typr.foundations.MariaTypes
import dev.typr.foundations.data.maria.MariaSet
import java.util.EnumSet
import kotlin.collections.List
import kotlin.collections.Set

/** MariaDB SET type with values: email, mail, push, sms */
data class EmailMailPushSmsSet(val members: Set<EmailMailPushSmsSetMember>) {
  fun contains(member: EmailMailPushSmsSetMember): Boolean = members.contains(member)

  fun isEmpty(): Boolean = members.isEmpty()

  fun size(): Int = members.size

  fun toCommaSeparated(): String = members.joinToString(",") { it.value }

  override fun toString(): String = toCommaSeparated()

  companion object {
    fun empty(): EmailMailPushSmsSet = EmailMailPushSmsSet(EnumSet.noneOf(EmailMailPushSmsSetMember::class.java).toSet())

    fun fromString(str: String): EmailMailPushSmsSet = run {
      if (str.isNullOrEmpty()) EmailMailPushSmsSet(EnumSet.noneOf(EmailMailPushSmsSetMember::class.java).toSet())
      else {
        val set = EnumSet.noneOf(EmailMailPushSmsSetMember::class.java)
        str.split(",").forEach { v ->
          EmailMailPushSmsSetMember.ByName[v.trim()]?.let { set.add(it) }
        }
        EmailMailPushSmsSet(set.toSet())
      }
    }

    val mariaType: MariaType<EmailMailPushSmsSet> =
      MariaTypes.set.bimap({ ms: MariaSet -> EmailMailPushSmsSet.fromString(ms.toCommaSeparated()) }, { s: EmailMailPushSmsSet -> MariaSet.fromString(s.toCommaSeparated()) })

    fun of(members: List<EmailMailPushSmsSetMember>): EmailMailPushSmsSet = run {
      if (members.isEmpty()) EmailMailPushSmsSet(EnumSet.noneOf(EmailMailPushSmsSetMember::class.java).toSet())
      else EmailMailPushSmsSet(EnumSet.copyOf(members).toSet())
    }
  }
}