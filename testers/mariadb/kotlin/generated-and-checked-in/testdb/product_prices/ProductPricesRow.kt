/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.product_prices

import com.fasterxml.jackson.annotation.JsonProperty
import dev.typr.foundations.MariaTypes
import dev.typr.foundations.kotlin.KotlinDbTypes
import dev.typr.foundations.kotlin.RowParser
import dev.typr.foundations.kotlin.RowParsers
import dev.typr.foundations.kotlin.nullable
import java.math.BigDecimal
import java.time.LocalDate
import testdb.customtypes.Defaulted
import testdb.price_tiers.PriceTiersId
import testdb.products.ProductsId

/** Table: product_prices
  * Primary key: price_id
  */
data class ProductPricesRow(
  /** 
    * AUTO_INCREMENT
    */
  @JsonProperty("price_id") val priceId: ProductPricesId,
  /** 
    * Points to [testdb.products.ProductsRow.productId]
    */
  @JsonProperty("product_id") val productId: ProductsId,
  /** 
    * Default: NULL
    * Points to [testdb.price_tiers.PriceTiersRow.tierId]
    */
  @JsonProperty("tier_id") val tierId: PriceTiersId?,
  /**  */
  val price: BigDecimal,
  /** 
    * Default: 'USD'
    */
  @JsonProperty("currency_code") val currencyCode: String,
  /**  */
  @JsonProperty("valid_from") val validFrom: LocalDate,
  /** 
    * Default: NULL
    */
  @JsonProperty("valid_to") val validTo: LocalDate?
) {
  fun id(): ProductPricesId = priceId

  fun toUnsavedRow(
    tierId: Defaulted<PriceTiersId?> = Defaulted.Provided(this.tierId),
    currencyCode: Defaulted<String> = Defaulted.Provided(this.currencyCode),
    validTo: Defaulted<LocalDate?> = Defaulted.Provided(this.validTo)
  ): ProductPricesRowUnsaved = ProductPricesRowUnsaved(productId, price, validFrom, tierId, currencyCode, validTo)

  companion object {
    val _rowParser: RowParser<ProductPricesRow> = RowParsers.of(ProductPricesId.pgType, ProductsId.pgType, PriceTiersId.pgType.nullable(), KotlinDbTypes.MariaTypes.numeric, MariaTypes.char_, MariaTypes.date, MariaTypes.date.nullable(), { t0, t1, t2, t3, t4, t5, t6 -> ProductPricesRow(t0, t1, t2, t3, t4, t5, t6) }, { row -> arrayOf<Any?>(row.priceId, row.productId, row.tierId, row.price, row.currencyCode, row.validFrom, row.validTo) })
  }
}