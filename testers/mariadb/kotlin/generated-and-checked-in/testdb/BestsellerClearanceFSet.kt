/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb

import dev.typr.foundations.MariaType
import dev.typr.foundations.MariaTypes
import dev.typr.foundations.data.maria.MariaSet
import java.util.EnumSet
import kotlin.collections.List
import kotlin.collections.Set

/** MariaDB SET type with values: bestseller, clearance, featured, new, sale */
data class BestsellerClearanceFSet(val members: Set<BestsellerClearanceFSetMember>) {
  fun contains(member: BestsellerClearanceFSetMember): Boolean = members.contains(member)

  fun isEmpty(): Boolean = members.isEmpty()

  fun size(): Int = members.size

  fun toCommaSeparated(): String = members.joinToString(",") { it.value }

  override fun toString(): String = toCommaSeparated()

  companion object {
    fun empty(): BestsellerClearanceFSet = BestsellerClearanceFSet(EnumSet.noneOf(BestsellerClearanceFSetMember::class.java).toSet())

    fun fromString(str: String): BestsellerClearanceFSet = run {
      if (str.isNullOrEmpty()) BestsellerClearanceFSet(EnumSet.noneOf(BestsellerClearanceFSetMember::class.java).toSet())
      else {
        val set = EnumSet.noneOf(BestsellerClearanceFSetMember::class.java)
        str.split(",").forEach { v ->
          BestsellerClearanceFSetMember.ByName[v.trim()]?.let { set.add(it) }
        }
        BestsellerClearanceFSet(set.toSet())
      }
    }

    val mariaType: MariaType<BestsellerClearanceFSet> =
      MariaTypes.set.bimap({ ms: MariaSet -> BestsellerClearanceFSet.fromString(ms.toCommaSeparated()) }, { s: BestsellerClearanceFSet -> MariaSet.fromString(s.toCommaSeparated()) })

    fun of(members: List<BestsellerClearanceFSetMember>): BestsellerClearanceFSet = run {
      if (members.isEmpty()) BestsellerClearanceFSet(EnumSet.noneOf(BestsellerClearanceFSetMember::class.java).toSet())
      else BestsellerClearanceFSet(EnumSet.copyOf(members).toSet())
    }
  }
}