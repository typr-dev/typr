/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.simple_customer_lookup;

import dev.typr.foundations.Fragment;
import dev.typr.foundations.MariaTypes;
import java.sql.Connection;
import java.util.List;
import static dev.typr.foundations.Fragment.interpolate;

public class SimpleCustomerLookupSqlRepoImpl implements SimpleCustomerLookupSqlRepo {
  @Override
  public List<SimpleCustomerLookupSqlRow> apply(
    String email,
    Connection c
  ) {
    return interpolate(Fragment.lit("-- Simple customer lookup by email\nSELECT customer_id,\n       email,\n       first_name,\n       last_name,\n       tier,\n       status,\n       created_at\nFROM customers\nWHERE email = "), Fragment.encode(MariaTypes.varchar, email), Fragment.lit("\n")).query(SimpleCustomerLookupSqlRow._rowParser.all()).runUnchecked(c);
  };
}