/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb;

import dev.typr.foundations.MariaType;
import dev.typr.foundations.MariaTypes;
import dev.typr.foundations.data.maria.MariaSet;
import java.util.EnumSet;
import java.util.List;
import java.util.Set;
import java.util.StringJoiner;

/** MariaDB SET type with values: email, mail, push, sms */
public record EmailMailPushSmsSet(Set<EmailMailPushSmsSetMember> members) {
  public EmailMailPushSmsSet withMembers(Set<EmailMailPushSmsSetMember> members) {
    return new EmailMailPushSmsSet(members);
  }
  ;

  public static EmailMailPushSmsSet empty() {
    return new EmailMailPushSmsSet(EnumSet.noneOf(EmailMailPushSmsSetMember.class));
  }
  ;

  public static EmailMailPushSmsSet fromString(String str) {
    if (str == null || str.isEmpty()) {
      return new EmailMailPushSmsSet(EnumSet.noneOf(EmailMailPushSmsSetMember.class));
    }
    ;
    var set = EnumSet.noneOf(EmailMailPushSmsSetMember.class);
    for (String v : str.split(",")) {
      var member = EmailMailPushSmsSetMember.ByName.get(v.trim());
      if (member != null) {
        set.add(member);
      }
    }
    ;
    return new EmailMailPushSmsSet(set);
  }
  ;

  public static MariaType<EmailMailPushSmsSet> mariaType =
      MariaTypes.set.bimap(
          (MariaSet ms) -> EmailMailPushSmsSet.fromString(ms.toCommaSeparated()),
          (EmailMailPushSmsSet s) -> MariaSet.fromString(s.toCommaSeparated()));

  public static EmailMailPushSmsSet of(List<EmailMailPushSmsSetMember> members) {
    if (members.isEmpty()) {
      return new EmailMailPushSmsSet(EnumSet.noneOf(EmailMailPushSmsSetMember.class));
    }
    ;
    return new EmailMailPushSmsSet(EnumSet.copyOf(members));
  }
  ;

  public Boolean contains(EmailMailPushSmsSetMember member) {
    return members.contains(member);
  }
  ;

  public Boolean isEmpty() {
    return members.isEmpty();
  }
  ;

  public Integer size() {
    return members.size();
  }
  ;

  public String toCommaSeparated() {
    var joiner = new StringJoiner(",");
    for (var m : members) {
      joiner.add(m.value);
    }
    ;
    return joiner.toString();
  }
  ;

  @Override
  public String toString() {
    return toCommaSeparated();
  }
  ;
}
