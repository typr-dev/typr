/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb;

import dev.typr.foundations.MariaType;
import dev.typr.foundations.MariaTypes;
import dev.typr.foundations.data.maria.MariaSet;
import java.util.EnumSet;
import java.util.List;
import java.util.Set;
import java.util.StringJoiner;

/** MariaDB SET type with values: x, y, z */
public record XYZSet(Set<XYZSetMember> members) {
  public XYZSet withMembers(Set<XYZSetMember> members) {
    return new XYZSet(members);
  }
  ;

  public static XYZSet empty() {
    return new XYZSet(EnumSet.noneOf(XYZSetMember.class));
  }
  ;

  public static XYZSet fromString(String str) {
    if (str == null || str.isEmpty()) {
      return new XYZSet(EnumSet.noneOf(XYZSetMember.class));
    }
    ;
    var set = EnumSet.noneOf(XYZSetMember.class);
    for (String v : str.split(",")) {
      var member = XYZSetMember.ByName.get(v.trim());
      if (member != null) {
        set.add(member);
      }
    }
    ;
    return new XYZSet(set);
  }
  ;

  public static MariaType<XYZSet> mariaType =
      MariaTypes.set.bimap(
          (MariaSet ms) -> XYZSet.fromString(ms.toCommaSeparated()),
          (XYZSet s) -> MariaSet.fromString(s.toCommaSeparated()));

  public static XYZSet of(List<XYZSetMember> members) {
    if (members.isEmpty()) {
      return new XYZSet(EnumSet.noneOf(XYZSetMember.class));
    }
    ;
    return new XYZSet(EnumSet.copyOf(members));
  }
  ;

  public Boolean contains(XYZSetMember member) {
    return members.contains(member);
  }
  ;

  public Boolean isEmpty() {
    return members.isEmpty();
  }
  ;

  public Integer size() {
    return members.size();
  }
  ;

  public String toCommaSeparated() {
    var joiner = new StringJoiner(",");
    for (var m : members) {
      joiner.add(m.value);
    }
    ;
    return joiner.toString();
  }
  ;

  @Override
  public String toString() {
    return toCommaSeparated();
  }
  ;
}
