/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.product_categories;

import dev.typr.foundations.MariaTypes;
import dev.typr.foundations.RowParser;
import dev.typr.foundations.dsl.FieldsBase;
import dev.typr.foundations.dsl.ForeignKey;
import dev.typr.foundations.dsl.Path;
import dev.typr.foundations.dsl.RelationStructure;
import dev.typr.foundations.dsl.SqlExpr;
import dev.typr.foundations.dsl.SqlExpr.Field;
import dev.typr.foundations.dsl.SqlExpr.FieldLike;
import dev.typr.foundations.dsl.SqlExpr.IdField;
import dev.typr.foundations.dsl.TupleExpr;
import dev.typr.foundations.dsl.TupleExpr.TupleExpr4;
import java.util.List;
import java.util.Optional;
import testdb.categories.CategoriesFields;
import testdb.categories.CategoriesId;
import testdb.categories.CategoriesRow;
import testdb.products.ProductsFields;
import testdb.products.ProductsId;
import testdb.products.ProductsRow;

public class ProductCategoriesFields extends TupleExpr4<ProductsId, CategoriesId, Boolean, Short>
    implements RelationStructure<ProductCategoriesFields, ProductCategoriesRow>,
        FieldsBase<ProductCategoriesRow> {
  List<Path> _path;

  public ProductCategoriesFields(List<Path> _path) {
    this._path = _path;
  }

  public static ProductCategoriesFields structure =
      new ProductCategoriesFields(java.util.Collections.emptyList());

  public IdField<ProductsId, ProductCategoriesRow> productId() {
    return new IdField<ProductsId, ProductCategoriesRow>(
        _path,
        "product_id",
        ProductCategoriesRow::productId,
        Optional.empty(),
        Optional.empty(),
        (row, value) -> row.withProductId(value),
        ProductsId.dbType);
  }

  public IdField<CategoriesId, ProductCategoriesRow> categoryId() {
    return new IdField<CategoriesId, ProductCategoriesRow>(
        _path,
        "category_id",
        ProductCategoriesRow::categoryId,
        Optional.empty(),
        Optional.empty(),
        (row, value) -> row.withCategoryId(value),
        CategoriesId.dbType);
  }

  public Field<Boolean, ProductCategoriesRow> isPrimary() {
    return new Field<Boolean, ProductCategoriesRow>(
        _path,
        "is_primary",
        ProductCategoriesRow::isPrimary,
        Optional.empty(),
        Optional.empty(),
        (row, value) -> row.withIsPrimary(value),
        MariaTypes.bool);
  }

  public Field<Short, ProductCategoriesRow> sortOrder() {
    return new Field<Short, ProductCategoriesRow>(
        _path,
        "sort_order",
        ProductCategoriesRow::sortOrder,
        Optional.empty(),
        Optional.empty(),
        (row, value) -> row.withSortOrder(value),
        MariaTypes.smallint);
  }

  @Override
  public List<Path> _path() {
    return _path;
  }

  public ForeignKey<CategoriesFields, CategoriesRow> fkCategories() {
    return ForeignKey.<CategoriesFields, CategoriesRow>of("fk_pc_category")
        .<CategoriesId>withColumnPair(categoryId(), CategoriesFields::categoryId);
  }

  public ForeignKey<ProductsFields, ProductsRow> fkProducts() {
    return ForeignKey.<ProductsFields, ProductsRow>of("fk_pc_product")
        .<ProductsId>withColumnPair(productId(), ProductsFields::productId);
  }

  public SqlExpr<Boolean> compositeIdIs(ProductCategoriesId compositeId) {
    return SqlExpr.all(
        productId().isEqual(compositeId.productId()),
        categoryId().isEqual(compositeId.categoryId()));
  }

  public SqlExpr<Boolean> compositeIdIn(List<ProductCategoriesId> compositeIds) {
    return TupleExpr.of(productId(), categoryId()).among(compositeIds);
  }

  @Override
  public List<FieldLike<?, ProductCategoriesRow>> columns() {
    return java.util.List.of(
        this.productId(), this.categoryId(), this.isPrimary(), this.sortOrder());
  }

  @Override
  public RowParser<ProductCategoriesRow> rowParser() {
    return ProductCategoriesRow._rowParser;
  }

  @Override
  public RelationStructure<ProductCategoriesFields, ProductCategoriesRow> withPaths(
      List<Path> _path) {
    return new ProductCategoriesFields(_path);
  }

  @Override
  public SqlExpr<ProductsId> _1() {
    return productId();
  }

  @Override
  public SqlExpr<CategoriesId> _2() {
    return categoryId();
  }

  @Override
  public SqlExpr<Boolean> _3() {
    return isPrimary();
  }

  @Override
  public SqlExpr<Short> _4() {
    return sortOrder();
  }
}
