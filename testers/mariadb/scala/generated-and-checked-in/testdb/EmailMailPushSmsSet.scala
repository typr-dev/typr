/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb

import dev.typr.foundations.MariaType
import dev.typr.foundations.MariaTypes
import dev.typr.foundations.data.maria.MariaSet
import scala.collection.immutable.Set

/** MariaDB SET type with values: email, mail, push, sms */
case class EmailMailPushSmsSet(members: Set[EmailMailPushSmsSetMember]) {
  def contains(member: EmailMailPushSmsSetMember): Boolean = members.contains(member)

  def isEmpty: Boolean = members.isEmpty

  def size: Int = members.size

  def toCommaSeparated: String = members.map(_.value).mkString(",")

  override def toString: String = toCommaSeparated
}

object EmailMailPushSmsSet {
  def empty: EmailMailPushSmsSet = EmailMailPushSmsSet(Set.empty)

  def fromString(str: String): EmailMailPushSmsSet = {
    {
      if (str == null || str.isEmpty) EmailMailPushSmsSet(Set.empty)
      else EmailMailPushSmsSet(str.split(",").flatMap(v => EmailMailPushSmsSetMember.ByName.get(v.trim)).toSet)
    }
  }

  given mariaType: MariaType[EmailMailPushSmsSet] = MariaTypes.set.bimap((ms: MariaSet) => EmailMailPushSmsSet.fromString(ms.toCommaSeparated), (s: EmailMailPushSmsSet) => MariaSet.fromString(s.toCommaSeparated))

  def of(members: List[EmailMailPushSmsSetMember]): EmailMailPushSmsSet = EmailMailPushSmsSet(members.toSet)
}