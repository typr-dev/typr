/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.order_history

import com.fasterxml.jackson.annotation.JsonProperty
import dev.typr.foundations.MariaTypes
import dev.typr.foundations.Tuple.Tuple8
import dev.typr.foundations.data.Json
import dev.typr.foundations.scala.DbTypeOps
import dev.typr.foundations.scala.RowParser
import dev.typr.foundations.scala.RowParsers
import java.time.LocalDateTime
import testdb.customtypes.Defaulted
import testdb.orders.OrdersId

/** Table: order_history
 * Primary key: history_id
 */
case class OrderHistoryRow(
  /** 
   * AUTO_INCREMENT
   */
  @JsonProperty("history_id") historyId: OrderHistoryId,
  /** 
   * Points to [[testdb.orders.OrdersRow.orderId]]
   */
  @JsonProperty("order_id") orderId: OrdersId,
  /** 
   * Default: NULL
   */
  @JsonProperty("previous_status") previousStatus: Option[String],
  /**  */
  @JsonProperty("new_status") newStatus: String,
  /** 
   * Default: NULL
   */
  @JsonProperty("changed_by") changedBy: Option[String],
  /** 
   * Default: NULL
   */
  @JsonProperty("change_reason") changeReason: Option[String],
  /** 
   * Default: NULL
   */
  metadata: Option[Json],
  /** 
   * Default: current_timestamp(6)
   */
  @JsonProperty("created_at") createdAt: LocalDateTime
) extends Tuple8[OrderHistoryId, OrdersId, Option[String], String, Option[String], Option[String], Option[Json], LocalDateTime] {
  def id: OrderHistoryId = historyId

  def toUnsavedRow(
    previousStatus: Defaulted[Option[String]] = Defaulted.Provided(this.previousStatus),
    changedBy: Defaulted[Option[String]] = Defaulted.Provided(this.changedBy),
    changeReason: Defaulted[Option[String]] = Defaulted.Provided(this.changeReason),
    metadata: Defaulted[Option[Json]] = Defaulted.Provided(this.metadata),
    createdAt: Defaulted[LocalDateTime] = Defaulted.Provided(this.createdAt)
  ): OrderHistoryRowUnsaved = {
    new OrderHistoryRowUnsaved(
      orderId,
      newStatus,
      previousStatus,
      changedBy,
      changeReason,
      metadata,
      createdAt
    )
  }

  override def `_1`: OrderHistoryId = historyId

  override def `_2`: OrdersId = orderId

  override def `_3`: Option[String] = previousStatus

  override def `_4`: String = newStatus

  override def `_5`: Option[String] = changedBy

  override def `_6`: Option[String] = changeReason

  override def `_7`: Option[Json] = metadata

  override def `_8`: LocalDateTime = createdAt
}

object OrderHistoryRow {
  val `_rowParser`: RowParser[OrderHistoryRow] = RowParsers.of(OrderHistoryId.mariaType, OrdersId.mariaType, MariaTypes.text.nullable, MariaTypes.text, MariaTypes.varchar.nullable, MariaTypes.varchar.nullable, MariaTypes.json.nullable, MariaTypes.datetime)(OrderHistoryRow.apply)(row => Array[Any](row.historyId, row.orderId, row.previousStatus, row.newStatus, row.changedBy, row.changeReason, row.metadata, row.createdAt))
}