/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb

import dev.typr.foundations.MariaType
import dev.typr.foundations.MariaTypes
import dev.typr.foundations.data.maria.MariaSet
import scala.collection.immutable.Set

/** MariaDB SET type with values: x, y, z */
case class XYZSet(members: Set[XYZSetMember]) {
  def contains(member: XYZSetMember): Boolean = members.contains(member)

  def isEmpty: Boolean = members.isEmpty

  def size: Int = members.size

  def toCommaSeparated: String = members.map(_.value).mkString(",")

  override def toString: String = toCommaSeparated
}

object XYZSet {
  def empty: XYZSet = XYZSet(Set.empty)

  def fromString(str: String): XYZSet = {
    {
      if (str == null || str.isEmpty) XYZSet(Set.empty)
      else XYZSet(str.split(",").flatMap(v => XYZSetMember.ByName.get(v.trim)).toSet)
    }
  }

  given mariaType: MariaType[XYZSet] = MariaTypes.set.bimap((ms: MariaSet) => XYZSet.fromString(ms.toCommaSeparated), (s: XYZSet) => MariaSet.fromString(s.toCommaSeparated))

  def of(members: List[XYZSetMember]): XYZSet = XYZSet(members.toSet)
}