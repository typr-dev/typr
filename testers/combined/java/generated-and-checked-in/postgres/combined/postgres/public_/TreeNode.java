/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package combined.postgres.public_;

import dev.typr.foundations.PgRead;
import dev.typr.foundations.PgStruct;
import dev.typr.foundations.PgType;
import dev.typr.foundations.PgTypes;
import java.util.Optional;

/** PostgreSQL composite type: public.tree_node */
public record TreeNode(Optional<Integer> id, Optional<String> label, Optional<Integer> parentId) {
  public TreeNode withId(Optional<Integer> id) {
    return new TreeNode(id, label, parentId);
  }
  ;

  public TreeNode withLabel(Optional<String> label) {
    return new TreeNode(id, label, parentId);
  }
  ;

  public TreeNode withParentId(Optional<Integer> parentId) {
    return new TreeNode(id, label, parentId);
  }
  ;

  public static PgStruct<TreeNode> pgStruct =
      PgStruct.<TreeNode>builder("public.tree_node")
          .optField("id", PgTypes.int4, v -> v.id())
          .optField("label", PgTypes.text, v -> v.label())
          .optField("parentId", PgTypes.int4, v -> v.parentId())
          .build(
              arr ->
                  new TreeNode(
                      Optional.ofNullable((Integer) arr[0]),
                      Optional.ofNullable((String) arr[1]),
                      Optional.ofNullable((Integer) arr[2])));

  public static PgType<TreeNode> pgType = pgStruct.asType();

  public static PgType<TreeNode[]> pgTypeArray =
      pgType.array(
          PgRead.readCompositeArray(pgType.pgCompositeText(), TreeNode[]::new), TreeNode[]::new);
}
