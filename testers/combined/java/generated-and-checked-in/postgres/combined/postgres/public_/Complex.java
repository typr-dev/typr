/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package combined.postgres.public_;

import dev.typr.foundations.PgRead;
import dev.typr.foundations.PgStruct;
import dev.typr.foundations.PgType;
import dev.typr.foundations.PgTypes;
import java.util.Optional;

/** PostgreSQL composite type: public.complex */
public record Complex(Optional<Double> r, Optional<Double> i) {
  public Complex withR(Optional<Double> r) {
    return new Complex(r, i);
  }
  ;

  public Complex withI(Optional<Double> i) {
    return new Complex(r, i);
  }
  ;

  public static PgStruct<Complex> pgStruct =
      PgStruct.<Complex>builder("public.complex")
          .optField("r", PgTypes.float8, v -> v.r())
          .optField("i", PgTypes.float8, v -> v.i())
          .build(
              arr ->
                  new Complex(
                      Optional.ofNullable((Double) arr[0]), Optional.ofNullable((Double) arr[1])));

  public static PgType<Complex> pgType = pgStruct.asType();

  public static PgType<Complex[]> pgTypeArray =
      pgType.array(
          PgRead.readCompositeArray(pgType.pgCompositeText(), Complex[]::new), Complex[]::new);
}
