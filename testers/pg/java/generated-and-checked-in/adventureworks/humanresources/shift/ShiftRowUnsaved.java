/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.humanresources.shift;

import adventureworks.customtypes.Defaulted;
import adventureworks.customtypes.Defaulted.UseDefault;
import adventureworks.public_.Name;
import dev.typr.foundations.PgText;
import dev.typr.foundations.PgTypes;
import java.time.LocalDateTime;
import java.time.LocalTime;

/** This class corresponds to a row in table `humanresources.shift` which has not been persisted yet */
public record ShiftRowUnsaved(
  /** Shift description. */
  Name name,
  /** Shift start time. */
  LocalTime starttime,
  /** Shift end time. */
  LocalTime endtime,
  /** Default: nextval('humanresources.shift_shiftid_seq'::regclass)
    * Primary key for Shift records.
    */
  Defaulted<ShiftId> shiftid,
  /** Default: now() */
  Defaulted<LocalDateTime> modifieddate
) {
  public ShiftRowUnsaved(
    /** Shift description. */
    Name name,
    /** Shift start time. */
    LocalTime starttime,
    /** Shift end time. */
    LocalTime endtime
  ) {
    this(name, starttime, endtime, new UseDefault<>(), new UseDefault<>());
  };

  /** Shift description. */
  public ShiftRowUnsaved withName(Name name) {
    return new ShiftRowUnsaved(name, starttime, endtime, shiftid, modifieddate);
  };

  /** Shift start time. */
  public ShiftRowUnsaved withStarttime(LocalTime starttime) {
    return new ShiftRowUnsaved(name, starttime, endtime, shiftid, modifieddate);
  };

  /** Shift end time. */
  public ShiftRowUnsaved withEndtime(LocalTime endtime) {
    return new ShiftRowUnsaved(name, starttime, endtime, shiftid, modifieddate);
  };

  /** Default: nextval('humanresources.shift_shiftid_seq'::regclass)
    * Primary key for Shift records.
    */
  public ShiftRowUnsaved withShiftid(Defaulted<ShiftId> shiftid) {
    return new ShiftRowUnsaved(name, starttime, endtime, shiftid, modifieddate);
  };

  /** Default: now() */
  public ShiftRowUnsaved withModifieddate(Defaulted<LocalDateTime> modifieddate) {
    return new ShiftRowUnsaved(name, starttime, endtime, shiftid, modifieddate);
  };

  static public PgText<ShiftRowUnsaved> pgText =
    PgText.instance((row, sb) -> {
      Name.pgType.text().unsafeEncode(row.name, sb);
      sb.append(PgText.DELIMETER);
      PgTypes.time.text().unsafeEncode(row.starttime, sb);
      sb.append(PgText.DELIMETER);
      PgTypes.time.text().unsafeEncode(row.endtime, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(ShiftId.pgType.text()).unsafeEncode(row.shiftid, sb);
      sb.append(PgText.DELIMETER);
      Defaulted.pgText(PgTypes.timestamp.text()).unsafeEncode(row.modifieddate, sb);
    });

  public ShiftRow toRow(
    java.util.function.Supplier<ShiftId> shiftidDefault,
    java.util.function.Supplier<LocalDateTime> modifieddateDefault
  ) {
    return new ShiftRow(shiftid.getOrElse(shiftidDefault), name, starttime, endtime, modifieddate.getOrElse(modifieddateDefault));
  };
}