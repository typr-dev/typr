/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public_;

import dev.typr.foundations.PgRead;
import dev.typr.foundations.PgStruct;
import dev.typr.foundations.PgType;
import dev.typr.foundations.PgTypes;
import dev.typr.foundations.data.Jsonb;
import java.time.Instant;
import java.util.Optional;

/** PostgreSQL composite type: public.metadata_record */
public record MetadataRecord(
  Optional<String> key,
  Optional<Jsonb> value,
  Optional<Instant> createdAt
) {
  public MetadataRecord withKey(Optional<String> key) {
    return new MetadataRecord(key, value, createdAt);
  };

  public MetadataRecord withValue(Optional<Jsonb> value) {
    return new MetadataRecord(key, value, createdAt);
  };

  public MetadataRecord withCreatedAt(Optional<Instant> createdAt) {
    return new MetadataRecord(key, value, createdAt);
  };

  static public PgStruct<MetadataRecord> pgStruct =
    PgStruct.<MetadataRecord>builder("public.metadata_record").optField("key", PgTypes.text, v -> v.key()).optField("value", PgTypes.jsonb, v -> v.value()).optField("createdAt", PgTypes.timestamptz, v -> v.createdAt()).build(arr -> new MetadataRecord(Optional.ofNullable((String) arr[0]), Optional.ofNullable((Jsonb) arr[1]), Optional.ofNullable((Instant) arr[2])));

  static public PgType<MetadataRecord> pgType =
    pgStruct.asType();

  static public PgType<MetadataRecord[]> pgTypeArray =
    pgType.array(PgRead.readCompositeArray(pgType.pgCompositeText(), MetadataRecord[]::new), MetadataRecord[]::new);
}