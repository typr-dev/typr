/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public_;

import dev.typr.foundations.PgRead;
import dev.typr.foundations.PgStruct;
import dev.typr.foundations.PgType;
import dev.typr.foundations.PgTypes;
import java.util.Optional;

/** PostgreSQL composite type: public.point_2d */
public record Point2d(Optional<Double> x, Optional<Double> y) {
  public Point2d withX(Optional<Double> x) {
    return new Point2d(x, y);
  }
  ;

  public Point2d withY(Optional<Double> y) {
    return new Point2d(x, y);
  }
  ;

  public static PgStruct<Point2d> dbStruct =
      PgStruct.<Point2d>builder("public.point_2d")
          .optField("x", PgTypes.float8, v -> v.x())
          .optField("y", PgTypes.float8, v -> v.y())
          .build(
              arr ->
                  new Point2d(
                      Optional.ofNullable((Double) arr[0]), Optional.ofNullable((Double) arr[1])));

  public static PgType<Point2d> dbType = dbStruct.asType();

  public static PgType<Point2d[]> dbTypeArray =
      dbType.array(
          PgRead.readCompositeArray(dbType.pgCompositeText(), Point2d[]::new), Point2d[]::new);
}
