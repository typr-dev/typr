/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public_;

import dev.typr.foundations.PgRead;
import dev.typr.foundations.PgStruct;
import dev.typr.foundations.PgType;
import dev.typr.foundations.PgTypes;
import java.util.Optional;

/** PostgreSQL composite type: public.address */
public record Address(
    Optional<String> street,
    Optional<String> city,
    Optional<String> zip,
    Optional<String> country) {
  public Address withStreet(Optional<String> street) {
    return new Address(street, city, zip, country);
  }
  ;

  public Address withCity(Optional<String> city) {
    return new Address(street, city, zip, country);
  }
  ;

  public Address withZip(Optional<String> zip) {
    return new Address(street, city, zip, country);
  }
  ;

  public Address withCountry(Optional<String> country) {
    return new Address(street, city, zip, country);
  }
  ;

  public static PgStruct<Address> dbStruct =
      PgStruct.<Address>builder("public.address")
          .optField("street", PgTypes.text, v -> v.street())
          .optField("city", PgTypes.text, v -> v.city())
          .optField("zip", PgTypes.text, v -> v.zip())
          .optField("country", PgTypes.text, v -> v.country())
          .build(
              arr ->
                  new Address(
                      Optional.ofNullable((String) arr[0]),
                      Optional.ofNullable((String) arr[1]),
                      Optional.ofNullable((String) arr[2]),
                      Optional.ofNullable((String) arr[3])));

  public static PgType<Address> dbType = dbStruct.asType();

  public static PgType<Address[]> dbTypeArray =
      dbType.array(
          PgRead.readCompositeArray(dbType.pgCompositeText(), Address[]::new), Address[]::new);
}
