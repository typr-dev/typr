/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public_;

import dev.typr.foundations.PgRead;
import dev.typr.foundations.PgStruct;
import dev.typr.foundations.PgType;
import dev.typr.foundations.PgTypes;
import java.util.Optional;

/** PostgreSQL composite type: public.contact_info */
public record ContactInfo(
    Optional<String> email, Optional<String> phone, Optional<Address> address) {
  public ContactInfo withEmail(Optional<String> email) {
    return new ContactInfo(email, phone, address);
  }
  ;

  public ContactInfo withPhone(Optional<String> phone) {
    return new ContactInfo(email, phone, address);
  }
  ;

  public ContactInfo withAddress(Optional<Address> address) {
    return new ContactInfo(email, phone, address);
  }
  ;

  public static PgStruct<ContactInfo> dbStruct =
      PgStruct.<ContactInfo>builder("public.contact_info")
          .optField("email", PgTypes.text, v -> v.email())
          .optField("phone", PgTypes.text, v -> v.phone())
          .optField("address", Address.dbType, v -> v.address())
          .build(
              arr ->
                  new ContactInfo(
                      Optional.ofNullable((String) arr[0]),
                      Optional.ofNullable((String) arr[1]),
                      Optional.ofNullable((Address) arr[2])));

  public static PgType<ContactInfo> dbType = dbStruct.asType();

  public static PgType<ContactInfo[]> dbTypeArray =
      dbType.array(
          PgRead.readCompositeArray(dbType.pgCompositeText(), ContactInfo[]::new),
          ContactInfo[]::new);
}
