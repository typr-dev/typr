/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public_;

import dev.typr.foundations.PgRead;
import dev.typr.foundations.PgStruct;
import dev.typr.foundations.PgType;
import dev.typr.foundations.PgTypes;
import java.util.Optional;

/** PostgreSQL composite type: public.polygon_custom */
public record PolygonCustom(Optional<String> name, Optional<Point2d[]> vertices) {
  public PolygonCustom withName(Optional<String> name) {
    return new PolygonCustom(name, vertices);
  }
  ;

  public PolygonCustom withVertices(Optional<Point2d[]> vertices) {
    return new PolygonCustom(name, vertices);
  }
  ;

  public static PgStruct<PolygonCustom> dbStruct =
      PgStruct.<PolygonCustom>builder("public.polygon_custom")
          .optField("name", PgTypes.text, v -> v.name())
          .optField("vertices", Point2d.dbTypeArray, v -> v.vertices())
          .build(
              arr ->
                  new PolygonCustom(
                      Optional.ofNullable((String) arr[0]),
                      Optional.ofNullable((Point2d[]) arr[1])));

  public static PgType<PolygonCustom> dbType = dbStruct.asType();

  public static PgType<PolygonCustom[]> dbTypeArray =
      dbType.array(
          PgRead.readCompositeArray(dbType.pgCompositeText(), PolygonCustom[]::new),
          PolygonCustom[]::new);
}
