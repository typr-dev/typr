/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public_;

import dev.typr.foundations.PgRead;
import dev.typr.foundations.PgStruct;
import dev.typr.foundations.PgType;
import dev.typr.foundations.PgTypes;
import java.util.Optional;

/** PostgreSQL composite type: public.nullable_test */
public record NullableTest(
    Optional<String> alwaysPresent, Optional<String> oftenNull, Optional<String> emptyVsNull) {
  public NullableTest withAlwaysPresent(Optional<String> alwaysPresent) {
    return new NullableTest(alwaysPresent, oftenNull, emptyVsNull);
  }
  ;

  public NullableTest withOftenNull(Optional<String> oftenNull) {
    return new NullableTest(alwaysPresent, oftenNull, emptyVsNull);
  }
  ;

  public NullableTest withEmptyVsNull(Optional<String> emptyVsNull) {
    return new NullableTest(alwaysPresent, oftenNull, emptyVsNull);
  }
  ;

  public static PgStruct<NullableTest> dbStruct =
      PgStruct.<NullableTest>builder("public.nullable_test")
          .optField("alwaysPresent", PgTypes.text, v -> v.alwaysPresent())
          .optField("oftenNull", PgTypes.text, v -> v.oftenNull())
          .optField("emptyVsNull", PgTypes.text, v -> v.emptyVsNull())
          .build(
              arr ->
                  new NullableTest(
                      Optional.ofNullable((String) arr[0]),
                      Optional.ofNullable((String) arr[1]),
                      Optional.ofNullable((String) arr[2])));

  public static PgType<NullableTest> dbType = dbStruct.asType();

  public static PgType<NullableTest[]> dbTypeArray =
      dbType.array(
          PgRead.readCompositeArray(dbType.pgCompositeText(), NullableTest[]::new),
          NullableTest[]::new);
}
