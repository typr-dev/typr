/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public_.only_pk_columns;

import dev.typr.foundations.PgTypes;
import dev.typr.foundations.RowParser;
import dev.typr.foundations.dsl.FieldsBase;
import dev.typr.foundations.dsl.Path;
import dev.typr.foundations.dsl.RelationStructure;
import dev.typr.foundations.dsl.SqlExpr;
import dev.typr.foundations.dsl.SqlExpr.FieldLike;
import dev.typr.foundations.dsl.SqlExpr.IdField;
import dev.typr.foundations.dsl.TupleExpr;
import dev.typr.foundations.dsl.TupleExpr.TupleExpr2;
import java.util.List;
import java.util.Optional;

public class OnlyPkColumnsFields extends TupleExpr2<String, Integer>
    implements RelationStructure<OnlyPkColumnsFields, OnlyPkColumnsRow>,
        FieldsBase<OnlyPkColumnsRow> {
  List<Path> _path;

  public OnlyPkColumnsFields(List<Path> _path) {
    this._path = _path;
  }

  public static OnlyPkColumnsFields structure =
      new OnlyPkColumnsFields(java.util.Collections.emptyList());

  public IdField<String, OnlyPkColumnsRow> keyColumn1() {
    return new IdField<String, OnlyPkColumnsRow>(
        _path,
        "key_column_1",
        OnlyPkColumnsRow::keyColumn1,
        Optional.empty(),
        Optional.empty(),
        (row, value) -> row.withKeyColumn1(value),
        PgTypes.text);
  }

  public IdField<Integer, OnlyPkColumnsRow> keyColumn2() {
    return new IdField<Integer, OnlyPkColumnsRow>(
        _path,
        "key_column_2",
        OnlyPkColumnsRow::keyColumn2,
        Optional.empty(),
        Optional.of("int4"),
        (row, value) -> row.withKeyColumn2(value),
        PgTypes.int4);
  }

  @Override
  public List<Path> _path() {
    return _path;
  }

  public SqlExpr<Boolean> compositeIdIs(OnlyPkColumnsId compositeId) {
    return SqlExpr.all(
        keyColumn1().isEqual(compositeId.keyColumn1()),
        keyColumn2().isEqual(compositeId.keyColumn2()));
  }

  public SqlExpr<Boolean> compositeIdIn(List<OnlyPkColumnsId> compositeIds) {
    return TupleExpr.of(keyColumn1(), keyColumn2()).among(compositeIds);
  }

  @Override
  public List<FieldLike<?, OnlyPkColumnsRow>> columns() {
    return java.util.List.of(this.keyColumn1(), this.keyColumn2());
  }

  @Override
  public RowParser<OnlyPkColumnsRow> rowParser() {
    return OnlyPkColumnsRow._rowParser;
  }

  @Override
  public RelationStructure<OnlyPkColumnsFields, OnlyPkColumnsRow> withPaths(List<Path> _path) {
    return new OnlyPkColumnsFields(_path);
  }

  @Override
  public SqlExpr<String> _1() {
    return keyColumn1();
  }

  @Override
  public SqlExpr<Integer> _2() {
    return keyColumn2();
  }
}
