/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.precisetypes;

import com.fasterxml.jackson.annotation.JsonValue;
import dev.typr.foundations.PgType;
import dev.typr.foundations.PgTypes;
import dev.typr.foundations.data.precise.StringN;
import dev.typr.foundations.dsl.Bijection;
import dev.typr.foundations.internal.arrayMap;
import java.util.Optional;

public record String20(@JsonValue String value) implements StringN {
  @java.lang.Deprecated
  public String20 {}
  ;

  public String20 withValue(String value) {
    return new String20(value);
  }
  ;

  @Override
  public java.lang.String toString() {
    return value.toString();
  }
  ;

  public static Bijection<String20, String> bijection =
      Bijection.of(String20::value, String20::new);

  public static PgType<String20> dbType = PgTypes.text.bimap(String20::new, String20::value);

  public static PgType<String20[]> dbTypeArray =
      PgTypes.textArray.bimap(
          xs -> arrayMap.map(xs, String20::new, String20.class),
          xs -> arrayMap.map(xs, String20::value, String.class));

  public static Optional<String20> of(String value) {
    return (value.length() <= 20 ? Optional.of(new String20(value)) : Optional.empty());
  }
  ;

  public static String20 truncate(String value) {
    return new String20((value.length() <= 20 ? value : value.substring(0, 20)));
  }
  ;

  public static String20 unsafeForce(String value) {
    if (value.length() > 20) {
      throw new IllegalArgumentException("Value length ${value.length()} exceeds maximum 20");
    }
    ;
    return new String20(value);
  }
  ;

  @Override
  public boolean equals(Object obj) {
    if (this == obj) return true;
    if (!(obj instanceof StringN other)) return false;
    return value.equals(other.rawValue());
  }
  ;

  @Override
  public int hashCode() {
    return value.hashCode();
  }
  ;

  @Override
  public int maxLength() {
    return 20;
  }
  ;

  @Override
  public String rawValue() {
    return value;
  }
  ;

  @Override
  public boolean semanticEquals(StringN other) {
    return (other == null ? false : value.equals(other.rawValue()));
  }
  ;

  @Override
  public int semanticHashCode() {
    return value.hashCode();
  }
  ;
}
