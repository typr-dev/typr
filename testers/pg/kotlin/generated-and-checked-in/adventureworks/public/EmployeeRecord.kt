/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public

import dev.typr.foundations.PgRead
import dev.typr.foundations.PgStruct
import dev.typr.foundations.PgType
import dev.typr.foundations.PgTypes
import dev.typr.foundations.kotlin.KotlinDbTypes
import java.math.BigDecimal
import java.time.LocalDate
import java.util.Optional

/** PostgreSQL composite type: public.employee_record */
data class EmployeeRecord(
  val name: PersonName?,
  val contact: ContactInfo?,
  val employeeId: Int?,
  val salary: BigDecimal?,
  val hireDate: LocalDate?
) {
  companion object {
    val dbStruct: PgStruct<EmployeeRecord> =
      PgStruct.builder<EmployeeRecord>("public.employee_record").optField("name", PersonName.dbType, { v: EmployeeRecord -> Optional.ofNullable(v.name) }).optField("contact", ContactInfo.dbType, { v: EmployeeRecord -> Optional.ofNullable(v.contact) }).optField("employeeId", KotlinDbTypes.PgTypes.int4, { v: EmployeeRecord -> Optional.ofNullable(v.employeeId) }).optField("salary", PgTypes.numeric, { v: EmployeeRecord -> Optional.ofNullable(v.salary) }).optField("hireDate", PgTypes.date, { v: EmployeeRecord -> Optional.ofNullable(v.hireDate) }).build({ arr -> EmployeeRecord(arr[0] as? PersonName, arr[1] as? ContactInfo, arr[2] as? Int, arr[3] as? BigDecimal, arr[4] as? LocalDate) })

    val dbType: PgType<EmployeeRecord> =
      dbStruct.asType()

    val dbTypeArray: PgType<Array<EmployeeRecord>> =
      dbType.array(PgRead.readCompositeArray(dbType.pgCompositeText(), { n -> arrayOfNulls<EmployeeRecord>(n) }), { n -> arrayOfNulls<EmployeeRecord>(n) })
  }
}