/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public

import dev.typr.foundations.PgRead
import dev.typr.foundations.PgStruct
import dev.typr.foundations.PgType
import dev.typr.foundations.PgTypes
import java.util.Optional

/** PostgreSQL composite type: public.nullable_test */
data class NullableTest(
  val alwaysPresent: String?,
  val oftenNull: String?,
  val emptyVsNull: String?
) {
  companion object {
    val dbStruct: PgStruct<NullableTest> =
      PgStruct.builder<NullableTest>("public.nullable_test").optField("alwaysPresent", PgTypes.text, { v: NullableTest -> Optional.ofNullable(v.alwaysPresent) }).optField("oftenNull", PgTypes.text, { v: NullableTest -> Optional.ofNullable(v.oftenNull) }).optField("emptyVsNull", PgTypes.text, { v: NullableTest -> Optional.ofNullable(v.emptyVsNull) }).build({ arr -> NullableTest(arr[0] as? String, arr[1] as? String, arr[2] as? String) })

    val dbType: PgType<NullableTest> =
      dbStruct.asType()

    val dbTypeArray: PgType<Array<NullableTest>> =
      dbType.array(PgRead.readCompositeArray(dbType.pgCompositeText(), { n -> arrayOfNulls<NullableTest>(n) }), { n -> arrayOfNulls<NullableTest>(n) })
  }
}