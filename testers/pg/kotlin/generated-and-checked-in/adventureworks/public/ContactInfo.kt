/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public

import dev.typr.foundations.PgRead
import dev.typr.foundations.PgStruct
import dev.typr.foundations.PgType
import dev.typr.foundations.PgTypes
import java.util.Optional

/** PostgreSQL composite type: public.contact_info */
data class ContactInfo(
  val email: String?,
  val phone: String?,
  val address: Address?
) {
  companion object {
    val dbStruct: PgStruct<ContactInfo> =
      PgStruct.builder<ContactInfo>("public.contact_info").optField("email", PgTypes.text, { v: ContactInfo -> Optional.ofNullable(v.email) }).optField("phone", PgTypes.text, { v: ContactInfo -> Optional.ofNullable(v.phone) }).optField("address", Address.dbType, { v: ContactInfo -> Optional.ofNullable(v.address) }).build({ arr -> ContactInfo(arr[0] as? String, arr[1] as? String, arr[2] as? Address) })

    val dbType: PgType<ContactInfo> =
      dbStruct.asType()

    val dbTypeArray: PgType<Array<ContactInfo>> =
      dbType.array(PgRead.readCompositeArray(dbType.pgCompositeText(), { n -> arrayOfNulls<ContactInfo>(n) }), { n -> arrayOfNulls<ContactInfo>(n) })
  }
}