/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public

import dev.typr.foundations.PgRead
import dev.typr.foundations.PgStruct
import dev.typr.foundations.PgType
import dev.typr.foundations.PgTypes
import dev.typr.foundations.data.Jsonb
import java.time.Instant
import java.util.Optional

/** PostgreSQL composite type: public.metadata_record */
data class MetadataRecord(
  val key: String?,
  val value: Jsonb?,
  val createdAt: Instant?
) {
  companion object {
    val pgStruct: PgStruct<MetadataRecord> =
      PgStruct.builder<MetadataRecord>("public.metadata_record").optField("key", PgTypes.text, { v: MetadataRecord -> Optional.ofNullable(v.key) }).optField("value", PgTypes.jsonb, { v: MetadataRecord -> Optional.ofNullable(v.value) }).optField("createdAt", PgTypes.timestamptz, { v: MetadataRecord -> Optional.ofNullable(v.createdAt) }).build({ arr -> MetadataRecord(arr[0] as? String, arr[1] as? Jsonb, arr[2] as? Instant) })

    val pgType: PgType<MetadataRecord> =
      pgStruct.asType()

    val pgTypeArray: PgType<Array<MetadataRecord>> =
      pgType.array(PgRead.readCompositeArray(pgType.pgCompositeText(), { n -> arrayOfNulls<MetadataRecord>(n) }), { n -> arrayOfNulls<MetadataRecord>(n) })
  }
}