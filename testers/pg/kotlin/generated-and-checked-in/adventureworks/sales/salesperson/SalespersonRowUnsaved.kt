/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.sales.salesperson

import adventureworks.customtypes.Defaulted
import adventureworks.customtypes.Defaulted.UseDefault
import adventureworks.person.businessentity.BusinessentityId
import adventureworks.sales.salesterritory.SalesterritoryId
import dev.typr.foundations.PgText
import dev.typr.foundations.PgTypes
import dev.typr.foundations.kotlin.nullable
import java.math.BigDecimal
import java.time.LocalDateTime
import java.util.UUID

/** This class corresponds to a row in table `sales.salesperson` which has not been persisted yet */
data class SalespersonRowUnsaved(
  /** Primary key for SalesPerson records. Foreign key to Employee.BusinessEntityID
    * Points to [adventureworks.humanresources.employee.EmployeeRow.businessentityid]
    */
  val businessentityid: BusinessentityId,
  /** Territory currently assigned to. Foreign key to SalesTerritory.SalesTerritoryID.
    * Points to [adventureworks.sales.salesterritory.SalesterritoryRow.territoryid]
    */
  val territoryid: SalesterritoryId? = null,
  /** Projected yearly sales.
    * Constraint CK_SalesPerson_SalesQuota affecting columns salesquota:  ((salesquota > 0.00))
    */
  val salesquota: BigDecimal? = null,
  /** Default: 0.00
    * Bonus due if quota is met.
    * Constraint CK_SalesPerson_Bonus affecting columns bonus:  ((bonus >= 0.00))
    */
  val bonus: Defaulted<BigDecimal> = UseDefault(),
  /** Default: 0.00
    * Commision percent received per sale.
    * Constraint CK_SalesPerson_CommissionPct affecting columns commissionpct:  ((commissionpct >= 0.00))
    */
  val commissionpct: Defaulted<BigDecimal> = UseDefault(),
  /** Default: 0.00
    * Sales total year to date.
    * Constraint CK_SalesPerson_SalesYTD affecting columns salesytd:  ((salesytd >= 0.00))
    */
  val salesytd: Defaulted<BigDecimal> = UseDefault(),
  /** Default: 0.00
    * Sales total of previous year.
    * Constraint CK_SalesPerson_SalesLastYear affecting columns saleslastyear:  ((saleslastyear >= 0.00))
    */
  val saleslastyear: Defaulted<BigDecimal> = UseDefault(),
  /** Default: uuid_generate_v1() */
  val rowguid: Defaulted<UUID> = UseDefault(),
  /** Default: now() */
  val modifieddate: Defaulted<LocalDateTime> = UseDefault()
) {
  fun toRow(
    bonusDefault: () -> BigDecimal,
    commissionpctDefault: () -> BigDecimal,
    salesytdDefault: () -> BigDecimal,
    saleslastyearDefault: () -> BigDecimal,
    rowguidDefault: () -> UUID,
    modifieddateDefault: () -> LocalDateTime
  ): SalespersonRow = SalespersonRow(businessentityid = businessentityid, territoryid = territoryid, salesquota = salesquota, bonus = bonus.getOrElse(bonusDefault), commissionpct = commissionpct.getOrElse(commissionpctDefault), salesytd = salesytd.getOrElse(salesytdDefault), saleslastyear = saleslastyear.getOrElse(saleslastyearDefault), rowguid = rowguid.getOrElse(rowguidDefault), modifieddate = modifieddate.getOrElse(modifieddateDefault))

  companion object {
    val pgText: PgText<SalespersonRowUnsaved> =
      PgText.instance({ row, sb -> BusinessentityId.pgType.text().unsafeEncode(row.businessentityid, sb)
      sb.append(PgText.DELIMETER)
      SalesterritoryId.pgType.nullable().text().unsafeEncode(row.territoryid, sb)
      sb.append(PgText.DELIMETER)
      PgTypes.numeric.nullable().text().unsafeEncode(row.salesquota, sb)
      sb.append(PgText.DELIMETER)
      Defaulted.pgText(PgTypes.numeric.text()).unsafeEncode(row.bonus, sb)
      sb.append(PgText.DELIMETER)
      Defaulted.pgText(PgTypes.numeric.text()).unsafeEncode(row.commissionpct, sb)
      sb.append(PgText.DELIMETER)
      Defaulted.pgText(PgTypes.numeric.text()).unsafeEncode(row.salesytd, sb)
      sb.append(PgText.DELIMETER)
      Defaulted.pgText(PgTypes.numeric.text()).unsafeEncode(row.saleslastyear, sb)
      sb.append(PgText.DELIMETER)
      Defaulted.pgText(PgTypes.uuid.text()).unsafeEncode(row.rowguid, sb)
      sb.append(PgText.DELIMETER)
      Defaulted.pgText(PgTypes.timestamp.text()).unsafeEncode(row.modifieddate, sb) })
  }
}