/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public

import dev.typr.foundations.PgRead
import dev.typr.foundations.PgStruct
import dev.typr.foundations.PgType
import dev.typr.foundations.PgTypes
import java.util.Optional

/** PostgreSQL composite type: public.contact_info */
case class ContactInfo(
  email: Optional[String],
  phone: Optional[String],
  address: Optional[Address]
)

object ContactInfo {
  given dbStruct: PgStruct[ContactInfo] = PgStruct.builder[ContactInfo]("public.contact_info").optField("email", PgTypes.text, (v: ContactInfo) => v.email).optField("phone", PgTypes.text, (v: ContactInfo) => v.phone).optField("address", Address.dbType, (v: ContactInfo) => v.address).build(arr => ContactInfo(email = Optional.ofNullable(arr(0).asInstanceOf[String]), phone = Optional.ofNullable(arr(1).asInstanceOf[String]), address = Optional.ofNullable(arr(2).asInstanceOf[Address])))

  given dbType: PgType[ContactInfo] = dbStruct.asType()

  given dbTypeArray: PgType[Array[ContactInfo]] = dbType.array(PgRead.readCompositeArray(dbType.pgCompositeText(), n => new Array[ContactInfo](n)), n => new Array[ContactInfo](n))
}