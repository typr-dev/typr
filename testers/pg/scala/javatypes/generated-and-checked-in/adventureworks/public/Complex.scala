/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public

import dev.typr.foundations.PgRead
import dev.typr.foundations.PgStruct
import dev.typr.foundations.PgType
import dev.typr.foundations.PgTypes
import java.util.Optional

/** PostgreSQL composite type: public.complex */
case class Complex(
  r: Optional[java.lang.Double],
  i: Optional[java.lang.Double]
)

object Complex {
  given pgStruct: PgStruct[Complex] = PgStruct.builder[Complex]("public.complex").optField("r", PgTypes.float8, (v: Complex) => v.r).optField("i", PgTypes.float8, (v: Complex) => v.i).build(arr => Complex(r = Optional.ofNullable(arr(0).asInstanceOf[java.lang.Double]), i = Optional.ofNullable(arr(1).asInstanceOf[java.lang.Double])))

  given pgType: PgType[Complex] = pgStruct.asType()

  given pgTypeArray: PgType[Array[Complex]] = pgType.array(PgRead.readCompositeArray(pgType.pgCompositeText(), n => new Array[Complex](n)), n => new Array[Complex](n))
}