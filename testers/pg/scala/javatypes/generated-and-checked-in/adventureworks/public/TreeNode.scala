/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public

import dev.typr.foundations.PgRead
import dev.typr.foundations.PgStruct
import dev.typr.foundations.PgType
import dev.typr.foundations.PgTypes
import java.util.Optional

/** PostgreSQL composite type: public.tree_node */
case class TreeNode(
  id: Optional[Integer],
  label: Optional[String],
  parentId: Optional[Integer]
)

object TreeNode {
  given pgStruct: PgStruct[TreeNode] = PgStruct.builder[TreeNode]("public.tree_node").optField("id", PgTypes.int4, (v: TreeNode) => v.id).optField("label", PgTypes.text, (v: TreeNode) => v.label).optField("parentId", PgTypes.int4, (v: TreeNode) => v.parentId).build(arr => TreeNode(id = Optional.ofNullable(arr(0).asInstanceOf[Integer]), label = Optional.ofNullable(arr(1).asInstanceOf[String]), parentId = Optional.ofNullable(arr(2).asInstanceOf[Integer])))

  given pgType: PgType[TreeNode] = pgStruct.asType()

  given pgTypeArray: PgType[Array[TreeNode]] = pgType.array(PgRead.readCompositeArray(pgType.pgCompositeText(), n => new Array[TreeNode](n)), n => new Array[TreeNode](n))
}