/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public

import dev.typr.foundations.PgRead
import dev.typr.foundations.PgStruct
import dev.typr.foundations.PgType
import dev.typr.foundations.PgTypes
import dev.typr.foundations.data.Jsonb
import java.time.Instant
import java.util.Optional

/** PostgreSQL composite type: public.metadata_record */
case class MetadataRecord(
  key: Optional[String],
  value: Optional[Jsonb],
  createdAt: Optional[Instant]
)

object MetadataRecord {
  given pgStruct: PgStruct[MetadataRecord] = PgStruct.builder[MetadataRecord]("public.metadata_record").optField("key", PgTypes.text, (v: MetadataRecord) => v.key).optField("value", PgTypes.jsonb, (v: MetadataRecord) => v.value).optField("createdAt", PgTypes.timestamptz, (v: MetadataRecord) => v.createdAt).build(arr => MetadataRecord(key = Optional.ofNullable(arr(0).asInstanceOf[String]), value = Optional.ofNullable(arr(1).asInstanceOf[Jsonb]), createdAt = Optional.ofNullable(arr(2).asInstanceOf[Instant])))

  given pgType: PgType[MetadataRecord] = pgStruct.asType()

  given pgTypeArray: PgType[Array[MetadataRecord]] = pgType.array(PgRead.readCompositeArray(pgType.pgCompositeText(), n => new Array[MetadataRecord](n)), n => new Array[MetadataRecord](n))
}