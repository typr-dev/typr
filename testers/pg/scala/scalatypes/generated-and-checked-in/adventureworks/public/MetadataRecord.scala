/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public

import dev.typr.foundations.PgRead
import dev.typr.foundations.PgStruct
import dev.typr.foundations.PgType
import dev.typr.foundations.PgTypes
import dev.typr.foundations.data.Jsonb
import java.time.Instant
import scala.jdk.OptionConverters.RichOption

/** PostgreSQL composite type: public.metadata_record */
case class MetadataRecord(
  key: Option[String],
  value: Option[Jsonb],
  createdAt: Option[Instant]
)

object MetadataRecord {
  given pgStruct: PgStruct[MetadataRecord] = PgStruct.builder[MetadataRecord]("public.metadata_record").optField("key", PgTypes.text, (v: MetadataRecord) => v.key.asJava).optField("value", PgTypes.jsonb, (v: MetadataRecord) => v.value.asJava).optField("createdAt", PgTypes.timestamptz, (v: MetadataRecord) => v.createdAt.asJava).build(arr => MetadataRecord(key = Option(arr(0).asInstanceOf[String]), value = Option(arr(1).asInstanceOf[Jsonb]), createdAt = Option(arr(2).asInstanceOf[Instant])))

  given pgType: PgType[MetadataRecord] = pgStruct.asType()

  given pgTypeArray: PgType[Array[MetadataRecord]] = pgType.array(PgRead.readCompositeArray(pgType.pgCompositeText(), n => new Array[MetadataRecord](n)), n => new Array[MetadataRecord](n))
}