/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public

import dev.typr.foundations.PgRead
import dev.typr.foundations.PgStruct
import dev.typr.foundations.PgType
import dev.typr.foundations.PgTypes
import scala.jdk.OptionConverters.RichOption

/** PostgreSQL composite type: public.polygon_custom */
case class PolygonCustom(
  name: Option[String],
  vertices: Option[Array[Point2d]]
)

object PolygonCustom {
  given dbStruct: PgStruct[PolygonCustom] = PgStruct.builder[PolygonCustom]("public.polygon_custom").optField("name", PgTypes.text, (v: PolygonCustom) => v.name.asJava).optField("vertices", Point2d.dbTypeArray, (v: PolygonCustom) => v.vertices.asJava).build(arr => PolygonCustom(name = Option(arr(0).asInstanceOf[String]), vertices = Option(arr(1).asInstanceOf[Array[Point2d]])))

  given dbType: PgType[PolygonCustom] = dbStruct.asType()

  given dbTypeArray: PgType[Array[PolygonCustom]] = dbType.array(PgRead.readCompositeArray(dbType.pgCompositeText(), n => new Array[PolygonCustom](n)), n => new Array[PolygonCustom](n))
}