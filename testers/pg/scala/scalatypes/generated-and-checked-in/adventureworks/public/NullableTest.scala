/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public

import dev.typr.foundations.PgRead
import dev.typr.foundations.PgStruct
import dev.typr.foundations.PgType
import dev.typr.foundations.PgTypes
import scala.jdk.OptionConverters.RichOption

/** PostgreSQL composite type: public.nullable_test */
case class NullableTest(
  alwaysPresent: Option[String],
  oftenNull: Option[String],
  emptyVsNull: Option[String]
)

object NullableTest {
  given pgStruct: PgStruct[NullableTest] = PgStruct.builder[NullableTest]("public.nullable_test").optField("alwaysPresent", PgTypes.text, (v: NullableTest) => v.alwaysPresent.asJava).optField("oftenNull", PgTypes.text, (v: NullableTest) => v.oftenNull.asJava).optField("emptyVsNull", PgTypes.text, (v: NullableTest) => v.emptyVsNull.asJava).build(arr => NullableTest(alwaysPresent = Option(arr(0).asInstanceOf[String]), oftenNull = Option(arr(1).asInstanceOf[String]), emptyVsNull = Option(arr(2).asInstanceOf[String])))

  given pgType: PgType[NullableTest] = pgStruct.asType()

  given pgTypeArray: PgType[Array[NullableTest]] = pgType.array(PgRead.readCompositeArray(pgType.pgCompositeText(), n => new Array[NullableTest](n)), n => new Array[NullableTest](n))
}