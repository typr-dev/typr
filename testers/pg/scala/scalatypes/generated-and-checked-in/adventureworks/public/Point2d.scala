/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.public

import dev.typr.foundations.PgRead
import dev.typr.foundations.PgStruct
import dev.typr.foundations.PgType
import dev.typr.foundations.scala.ScalaDbTypes
import scala.jdk.OptionConverters.RichOption

/** PostgreSQL composite type: public.point_2d */
case class Point2d(
  x: Option[Double],
  y: Option[Double]
)

object Point2d {
  given pgStruct: PgStruct[Point2d] = PgStruct.builder[Point2d]("public.point_2d").optField("x", ScalaDbTypes.PgTypes.float8, (v: Point2d) => v.x.asJava).optField("y", ScalaDbTypes.PgTypes.float8, (v: Point2d) => v.y.asJava).build(arr => Point2d(x = Option(arr(0).asInstanceOf[Double]), y = Option(arr(1).asInstanceOf[Double])))

  given pgType: PgType[Point2d] = pgStruct.asType()

  given pgTypeArray: PgType[Array[Point2d]] = pgType.array(PgRead.readCompositeArray(pgType.pgCompositeText(), n => new Array[Point2d](n)), n => new Array[Point2d](n))
}