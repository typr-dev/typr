/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.orders

import com.fasterxml.jackson.annotation.JsonProperty
import dev.typr.foundations.Db2Types
import dev.typr.foundations.Tuple.Tuple5
import dev.typr.foundations.scala.DbTypeOps
import dev.typr.foundations.scala.RowParser
import dev.typr.foundations.scala.RowParsers
import dev.typr.foundations.scala.ScalaDbTypes
import java.time.LocalDate
import testdb.customers.CustomersId
import testdb.customtypes.Defaulted

/** Table: ORDERS
 * Order records for all customer purchases
 * Primary key: ORDER_ID
 */
case class OrdersRow(
  /** Unique order identifier
   * Identity ALWAYS
   */
  @JsonProperty("ORDER_ID") orderId: OrdersId,
  /** Points to [[testdb.customers.CustomersRow.customerId]] */
  @JsonProperty("CUSTOMER_ID") customerId: CustomersId,
  /** Default: CURRENT DATE */
  @JsonProperty("ORDER_DATE") orderDate: LocalDate,
  /** Total monetary value of the order */
  @JsonProperty("TOTAL_AMOUNT") totalAmount: Option[BigDecimal],
  /** Default: 'pending' */
  @JsonProperty("STATUS") status: Option[String]
) extends Tuple5[OrdersId, CustomersId, LocalDate, Option[BigDecimal], Option[String]] {
  def id: OrdersId = orderId

  def toUnsavedRow(
    orderDate: Defaulted[LocalDate] = Defaulted.Provided(this.orderDate),
    status: Defaulted[Option[String]] = Defaulted.Provided(this.status)
  ): OrdersRowUnsaved = {
    new OrdersRowUnsaved(
      customerId,
      totalAmount,
      orderDate,
      status
    )
  }

  override def `_1`: OrdersId = orderId

  override def `_2`: CustomersId = customerId

  override def `_3`: LocalDate = orderDate

  override def `_4`: Option[BigDecimal] = totalAmount

  override def `_5`: Option[String] = status
}

object OrdersRow {
  val `_rowParser`: RowParser[OrdersRow] = RowParsers.of(OrdersId.db2Type, CustomersId.db2Type, Db2Types.date, ScalaDbTypes.Db2Types.decimal.nullable, Db2Types.varchar.nullable)(OrdersRow.apply)(row => Array[Any](row.orderId, row.customerId, row.orderDate, row.totalAmount, row.status))
}