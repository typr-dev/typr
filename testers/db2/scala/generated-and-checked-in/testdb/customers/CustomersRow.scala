/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.customers

import com.fasterxml.jackson.annotation.JsonProperty
import dev.typr.foundations.Db2Types
import dev.typr.foundations.Tuple.Tuple4
import dev.typr.foundations.scala.DbTypeOps
import dev.typr.foundations.scala.RowParser
import dev.typr.foundations.scala.RowParsers
import java.time.LocalDateTime
import testdb.customtypes.Defaulted

/** Table: CUSTOMERS
 * Customer master table containing all customer information
 * Primary key: CUSTOMER_ID
 */
case class CustomersRow(
  /** Unique identifier for the customer
   * Identity BY DEFAULT
   */
  @JsonProperty("CUSTOMER_ID") customerId: CustomersId,
  /** Full name of the customer */
  @JsonProperty("NAME") name: String,
  /** Email address used for contact and login */
  @JsonProperty("EMAIL") email: String,
  /** Default: CURRENT TIMESTAMP */
  @JsonProperty("CREATED_AT") createdAt: Option[LocalDateTime]
) extends Tuple4[CustomersId, String, String, Option[LocalDateTime]] {
  def id: CustomersId = customerId

  def toUnsavedRow(
    customerId: Defaulted[CustomersId],
    createdAt: Defaulted[Option[LocalDateTime]] = Defaulted.Provided(this.createdAt)
  ): CustomersRowUnsaved = {
    new CustomersRowUnsaved(
      name,
      email,
      customerId,
      createdAt
    )
  }

  override def `_1`: CustomersId = customerId

  override def `_2`: String = name

  override def `_3`: String = email

  override def `_4`: Option[LocalDateTime] = createdAt
}

object CustomersRow {
  val `_rowParser`: RowParser[CustomersRow] = RowParsers.of(CustomersId.db2Type, Db2Types.varchar, Db2Types.varchar, Db2Types.timestamp.nullable)(CustomersRow.apply)(row => Array[Any](row.customerId, row.name, row.email, row.createdAt))
}