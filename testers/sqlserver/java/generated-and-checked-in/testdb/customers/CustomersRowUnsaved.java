/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.customers;

import com.fasterxml.jackson.annotation.JsonProperty;
import java.time.LocalDateTime;
import java.util.Optional;
import testdb.customtypes.Defaulted;
import testdb.customtypes.Defaulted.UseDefault;
import testdb.userdefined.Email;

/** This class corresponds to a row in table `customers` which has not been persisted yet */
public record CustomersRowUnsaved(
    String name,
    /* user-picked */ Email email,
    /** Default: (getdate()) */
    @JsonProperty("created_at") Defaulted<Optional<LocalDateTime>> createdAt) {
  public CustomersRowUnsaved(String name, /* user-picked */ Email email) {
    this(name, email, new UseDefault<>());
  }
  ;

  public CustomersRowUnsaved withName(String name) {
    return new CustomersRowUnsaved(name, email, createdAt);
  }
  ;

  public CustomersRowUnsaved withEmail(/* user-picked */ Email email) {
    return new CustomersRowUnsaved(name, email, createdAt);
  }
  ;

  /** Default: (getdate()) */
  public CustomersRowUnsaved withCreatedAt(Defaulted<Optional<LocalDateTime>> createdAt) {
    return new CustomersRowUnsaved(name, email, createdAt);
  }
  ;

  public CustomersRow toRow(
      java.util.function.Supplier<Optional<LocalDateTime>> createdAtDefault,
      java.util.function.Supplier<CustomersId> customerIdDefault) {
    return new CustomersRow(
        customerIdDefault.get(), name, email, createdAt.getOrElse(createdAtDefault));
  }
  ;
}
