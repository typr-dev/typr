/**
 * File has been automatically generated by `typo`.
 *
 * <p>IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.precisetypes;

import com.fasterxml.jackson.annotation.JsonValue;
import dev.typr.foundations.SqlServerType;
import dev.typr.foundations.SqlServerTypes;
import dev.typr.foundations.data.precise.DecimalN;
import dev.typr.foundations.dsl.Bijection;
import java.math.BigDecimal;
import java.math.RoundingMode;
import java.util.Optional;

public record Decimal12_4(@JsonValue BigDecimal value) implements DecimalN {
  @java.lang.Deprecated
  public Decimal12_4 {}
  ;

  public Decimal12_4 withValue(BigDecimal value) {
    return new Decimal12_4(value);
  }
  ;

  @Override
  public java.lang.String toString() {
    return value.toString();
  }
  ;

  public static Decimal12_4 Zero = new Decimal12_4(BigDecimal.ZERO);

  public static Bijection<Decimal12_4, BigDecimal> bijection =
      Bijection.of(Decimal12_4::value, Decimal12_4::new);

  public static Optional<Decimal12_4> of(BigDecimal value) {
    BigDecimal scaled = value.setScale(4, RoundingMode.HALF_UP);
    return scaled.precision() <= 12 ? Optional.of(new Decimal12_4(scaled)) : Optional.empty();
  }
  ;

  public static Decimal12_4 of(Integer value) {
    return new Decimal12_4(BigDecimal.valueOf((long) (value)));
  }
  ;

  public static Optional<Decimal12_4> of(Long value) {
    return Decimal12_4.of(BigDecimal.valueOf(value));
  }
  ;

  public static Optional<Decimal12_4> of(Double value) {
    return Decimal12_4.of(BigDecimal.valueOf(value));
  }
  ;

  public static SqlServerType<Decimal12_4> sqlServerType =
      SqlServerTypes.decimal.bimap(Decimal12_4::new, Decimal12_4::value);

  public static Decimal12_4 unsafeForce(BigDecimal value) {
    BigDecimal scaled = value.setScale(4, RoundingMode.HALF_UP);
    if (scaled.precision() > 12) {
      throw new IllegalArgumentException("Value exceeds precision(12, 4)");
    }
    ;
    return new Decimal12_4(scaled);
  }
  ;

  @Override
  public BigDecimal decimalValue() {
    return value;
  }
  ;

  @Override
  public boolean equals(Object obj) {
    if (this == obj) return true;
    if (!(obj instanceof DecimalN other)) return false;
    return decimalValue().compareTo(other.decimalValue()) == 0;
  }
  ;

  @Override
  public int hashCode() {
    return decimalValue().stripTrailingZeros().hashCode();
  }
  ;

  @Override
  public int precision() {
    return 12;
  }
  ;

  @Override
  public int scale() {
    return 4;
  }
  ;

  @Override
  public boolean semanticEquals(DecimalN other) {
    return (other == null ? false : decimalValue().compareTo(other.decimalValue()) == 0);
  }
  ;

  @Override
  public int semanticHashCode() {
    return decimalValue().stripTrailingZeros().hashCode();
  }
  ;
}
