/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.update_customer_email

import dev.typr.foundations.SqlServerTypes
import dev.typr.foundations.scala.Fragment
import dev.typr.foundations.scala.ScalaDbTypes
import java.sql.Connection
import dev.typr.foundations.scala.Fragment.sql

class UpdateCustomerEmailSqlRepoImpl extends UpdateCustomerEmailSqlRepo {
  override def apply(
    newEmail: String,
    customerId: Int
  )(using c: Connection): Int = {
    sql"""-- Update customer email
    UPDATE customers
    SET email = ${Fragment.encode(SqlServerTypes.nvarchar, newEmail)}
    WHERE customer_id = ${Fragment.encode(ScalaDbTypes.SqlServerTypes.int_, customerId)}
    """.update().runUnchecked(c)
  }
}