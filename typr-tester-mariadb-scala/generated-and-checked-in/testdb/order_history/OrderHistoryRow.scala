/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.order_history

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDateTime
import testdb.customtypes.Defaulted
import testdb.orders.OrdersId
import typr.runtime.MariaTypes
import typr.scaladsl.MariaTypeOps
import typr.scaladsl.RowParser
import typr.scaladsl.RowParsers

/** Table: order_history
 * Primary key: history_id
 */
case class OrderHistoryRow(
  /** 
   * AUTO_INCREMENT
   */
  @JsonProperty("history_id") historyId: OrderHistoryId,
  /** 
   * Points to [[testdb.orders.OrdersRow.orderId]]
   */
  @JsonProperty("order_id") orderId: OrdersId,
  /** 
   * Default: NULL
   */
  @JsonProperty("previous_status") previousStatus: Option[String],
  /**  */
  @JsonProperty("new_status") newStatus: String,
  /** 
   * Default: NULL
   */
  @JsonProperty("changed_by") changedBy: Option[String],
  /** 
   * Default: NULL
   */
  @JsonProperty("change_reason") changeReason: Option[String],
  /** 
   * Default: NULL
   */
  metadata: Option[String],
  /** 
   * Default: current_timestamp(6)
   */
  @JsonProperty("created_at") createdAt: LocalDateTime
) {
  def id: OrderHistoryId = historyId

  def toUnsavedRow(
    previousStatus: Defaulted[Option[String]] = Defaulted.Provided(this.previousStatus),
    changedBy: Defaulted[Option[String]] = Defaulted.Provided(this.changedBy),
    changeReason: Defaulted[Option[String]] = Defaulted.Provided(this.changeReason),
    metadata: Defaulted[Option[String]] = Defaulted.Provided(this.metadata),
    createdAt: Defaulted[LocalDateTime] = Defaulted.Provided(this.createdAt)
  ): OrderHistoryRowUnsaved = {
    new OrderHistoryRowUnsaved(
      orderId,
      newStatus,
      previousStatus,
      changedBy,
      changeReason,
      metadata,
      createdAt
    )
  }
}

object OrderHistoryRow {
  val `_rowParser`: RowParser[OrderHistoryRow] = RowParsers.of(OrderHistoryId.pgType, OrdersId.pgType, MariaTypes.text.nullable, MariaTypes.text, MariaTypes.varchar.nullable, MariaTypes.varchar.nullable, MariaTypes.longtext.nullable, MariaTypes.datetime)(OrderHistoryRow.apply)(row => Array[Any](row.historyId, row.orderId, row.previousStatus, row.newStatus, row.changedBy, row.changeReason, row.metadata, row.createdAt))
}