/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.audit_log

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDateTime
import testdb.customtypes.Defaulted
import typr.data.maria.Inet6
import typr.runtime.MariaTypes
import typr.scaladsl.MariaTypeOps
import typr.scaladsl.RowParser
import typr.scaladsl.RowParsers

/** Table: audit_log
 * Primary key: log_id
 */
case class AuditLogRow(
  /** 
   * AUTO_INCREMENT
   */
  @JsonProperty("log_id") logId: AuditLogId,
  /**  */
  @JsonProperty("table_name") tableName: String,
  /**  */
  @JsonProperty("record_id") recordId: String,
  /**  */
  action: String,
  /** 
   * Default: NULL
   */
  @JsonProperty("old_values") oldValues: Option[String],
  /** 
   * Default: NULL
   */
  @JsonProperty("new_values") newValues: Option[String],
  /** 
   * Default: NULL
   */
  @JsonProperty("changed_by") changedBy: Option[String],
  /** 
   * Default: current_timestamp(6)
   */
  @JsonProperty("changed_at") changedAt: LocalDateTime,
  /** 
   * Default: NULL
   */
  @JsonProperty("client_ip") clientIp: Option[Inet6],
  /** 
   * Default: NULL
   */
  @JsonProperty("session_id") sessionId: Option[Array[Byte]]
) {
  def id: AuditLogId = logId

  def toUnsavedRow(
    oldValues: Defaulted[Option[String]] = Defaulted.Provided(this.oldValues),
    newValues: Defaulted[Option[String]] = Defaulted.Provided(this.newValues),
    changedBy: Defaulted[Option[String]] = Defaulted.Provided(this.changedBy),
    changedAt: Defaulted[LocalDateTime] = Defaulted.Provided(this.changedAt),
    clientIp: Defaulted[Option[Inet6]] = Defaulted.Provided(this.clientIp),
    sessionId: Defaulted[Option[Array[Byte]]] = Defaulted.Provided(this.sessionId)
  ): AuditLogRowUnsaved = {
    new AuditLogRowUnsaved(
      tableName,
      recordId,
      action,
      oldValues,
      newValues,
      changedBy,
      changedAt,
      clientIp,
      sessionId
    )
  }
}

object AuditLogRow {
  val `_rowParser`: RowParser[AuditLogRow] = RowParsers.of(AuditLogId.pgType, MariaTypes.varchar, MariaTypes.varchar, MariaTypes.text, MariaTypes.longtext.nullable, MariaTypes.longtext.nullable, MariaTypes.varchar.nullable, MariaTypes.datetime, MariaTypes.inet6.nullable, MariaTypes.varbinary.nullable)(AuditLogRow.apply)(row => Array[Any](row.logId, row.tableName, row.recordId, row.action, row.oldValues, row.newValues, row.changedBy, row.changedAt, row.clientIp, row.sessionId))
}