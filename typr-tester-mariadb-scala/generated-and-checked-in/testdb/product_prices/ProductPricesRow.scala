/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.product_prices

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDate
import testdb.customtypes.Defaulted
import testdb.price_tiers.PriceTiersId
import testdb.products.ProductsId
import typr.runtime.MariaTypes
import typr.scaladsl.MariaTypeOps
import typr.scaladsl.RowParser
import typr.scaladsl.RowParsers
import typr.scaladsl.ScalaDbTypes

/** Table: product_prices
 * Primary key: price_id
 */
case class ProductPricesRow(
  /** 
   * AUTO_INCREMENT
   */
  @JsonProperty("price_id") priceId: ProductPricesId,
  /** 
   * Points to [[testdb.products.ProductsRow.productId]]
   */
  @JsonProperty("product_id") productId: ProductsId,
  /** 
   * Default: NULL
   * Points to [[testdb.price_tiers.PriceTiersRow.tierId]]
   */
  @JsonProperty("tier_id") tierId: Option[PriceTiersId],
  /**  */
  price: BigDecimal,
  /** 
   * Default: 'USD'
   */
  @JsonProperty("currency_code") currencyCode: String,
  /**  */
  @JsonProperty("valid_from") validFrom: LocalDate,
  /** 
   * Default: NULL
   */
  @JsonProperty("valid_to") validTo: Option[LocalDate]
) {
  def id: ProductPricesId = priceId

  def toUnsavedRow(
    tierId: Defaulted[Option[PriceTiersId]] = Defaulted.Provided(this.tierId),
    currencyCode: Defaulted[String] = Defaulted.Provided(this.currencyCode),
    validTo: Defaulted[Option[LocalDate]] = Defaulted.Provided(this.validTo)
  ): ProductPricesRowUnsaved = {
    new ProductPricesRowUnsaved(
      productId,
      price,
      validFrom,
      tierId,
      currencyCode,
      validTo
    )
  }
}

object ProductPricesRow {
  val `_rowParser`: RowParser[ProductPricesRow] = RowParsers.of(ProductPricesId.pgType, ProductsId.pgType, PriceTiersId.pgType.nullable, ScalaDbTypes.MariaTypes.numeric, MariaTypes.char_, MariaTypes.date, MariaTypes.date.nullable)(ProductPricesRow.apply)(row => Array[Any](row.priceId, row.productId, row.tierId, row.price, row.currencyCode, row.validFrom, row.validTo))
}