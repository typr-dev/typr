/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.price_tiers

import com.fasterxml.jackson.annotation.JsonProperty
import testdb.customtypes.Defaulted
import typo.runtime.MariaText
import typo.runtime.MariaTypes
import typo.scaladsl.RowParser
import typo.scaladsl.RowParsers
import typo.scaladsl.ScalaDbTypes

/** Table: price_tiers
 * Primary key: tier_id
 */
case class PriceTiersRow(
  /** 
   * AUTO_INCREMENT
   */
  @JsonProperty("tier_id") tierId: PriceTiersId,
  /**  */
  name: String,
  /** 
   * Default: 1
   */
  @JsonProperty("min_quantity") minQuantity: Long,
  /**  */
  @JsonProperty("discount_type") discountType: String,
  /**  */
  @JsonProperty("discount_value") discountValue: BigDecimal
) {
  def id: PriceTiersId = tierId

  def toUnsavedRow(minQuantity: Defaulted[Long] = Defaulted.Provided(this.minQuantity)): PriceTiersRowUnsaved = {
    new PriceTiersRowUnsaved(
      name,
      discountType,
      discountValue,
      minQuantity
    )
  }
}

object PriceTiersRow {
  val `_rowParser`: RowParser[PriceTiersRow] = {
    RowParsers.of(PriceTiersId.pgType, MariaTypes.varchar, ScalaDbTypes.MariaTypes.intUnsigned, MariaTypes.text, ScalaDbTypes.MariaTypes.numeric)((t0, t1, t2, t3, t4) => new PriceTiersRow(
      t0,
      t1,
      t2,
      t3,
      t4
    ))(row => Array[Any](row.tierId, row.name, row.minQuantity, row.discountType, row.discountValue))
  }

  given mariaText: MariaText[PriceTiersRow] = MariaText.from(`_rowParser`.underlying)
}