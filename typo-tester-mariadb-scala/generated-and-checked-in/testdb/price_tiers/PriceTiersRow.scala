/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.price_tiers

import com.fasterxml.jackson.annotation.JsonProperty
import testdb.customtypes.Defaulted
import typo.runtime.MariaText
import typo.runtime.MariaTypes
import typo.runtime.RowParser
import typo.runtime.RowParsers

/** Table: price_tiers
 * Primary key: tier_id
 */
case class PriceTiersRow(
  /** 
   * AUTO_INCREMENT
   */
  @JsonProperty("tier_id") tierId: PriceTiersId,
  /**  */
  name: String,
  /** 
   * Default: 1
   */
  @JsonProperty("min_quantity") minQuantity: java.lang.Long,
  /**  */
  @JsonProperty("discount_type") discountType: String,
  /**  */
  @JsonProperty("discount_value") discountValue: java.math.BigDecimal
) {
  def id: PriceTiersId = tierId

  def toUnsavedRow(minQuantity: Defaulted[java.lang.Long] = Defaulted.Provided(this.minQuantity)): PriceTiersRowUnsaved = {
    new PriceTiersRowUnsaved(
      name,
      discountType,
      discountValue,
      minQuantity
    )
  }
}

object PriceTiersRow {
  val `_rowParser`: RowParser[PriceTiersRow] = RowParsers.of(PriceTiersId.pgType, MariaTypes.varchar, MariaTypes.intUnsigned, MariaTypes.text, MariaTypes.decimal, PriceTiersRow.apply, row => Array(row.tierId, row.name, row.minQuantity, row.discountType, row.discountValue))

  given mariaText: MariaText[PriceTiersRow] = MariaText.from(`_rowParser`)
}