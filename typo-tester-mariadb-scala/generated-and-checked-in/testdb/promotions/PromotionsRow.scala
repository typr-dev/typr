/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.promotions

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDateTime
import java.util.Optional
import testdb.customtypes.Defaulted
import typo.data.maria.MariaSet
import typo.runtime.MariaText
import typo.runtime.MariaTypes
import typo.runtime.RowParser
import typo.runtime.RowParsers

/** Table: promotions
 * Primary key: promotion_id
 */
case class PromotionsRow(
  /** 
   * AUTO_INCREMENT
   */
  @JsonProperty("promotion_id") promotionId: PromotionsId,
  /**  */
  code: String,
  /**  */
  name: String,
  /** 
   * Default: NULL
   */
  description: Optional[String],
  /**  */
  @JsonProperty("discount_type") discountType: String,
  /**  */
  @JsonProperty("discount_value") discountValue: java.math.BigDecimal,
  /** 
   * Default: NULL
   */
  @JsonProperty("min_order_amount") minOrderAmount: Optional[java.math.BigDecimal],
  /** 
   * Default: NULL
   */
  @JsonProperty("max_uses") maxUses: Optional[java.lang.Long],
  /** 
   * Default: 0
   */
  @JsonProperty("uses_count") usesCount: java.lang.Long,
  /** 
   * Default: NULL
   */
  @JsonProperty("max_uses_per_customer") maxUsesPerCustomer: Optional[java.lang.Short],
  /** 
   * Default: NULL
   */
  @JsonProperty("applicable_to") applicableTo: Optional[MariaSet],
  /** Complex eligibility rules
   * Default: NULL
   */
  @JsonProperty("rules_json") rulesJson: Optional[String],
  /**  */
  @JsonProperty("valid_from") validFrom: LocalDateTime,
  /**  */
  @JsonProperty("valid_to") validTo: LocalDateTime,
  /** 
   * Default: 1
   */
  @JsonProperty("is_active") isActive: java.lang.Boolean,
  /** 
   * Default: current_timestamp()
   */
  @JsonProperty("created_at") createdAt: LocalDateTime
) {
  def id: PromotionsId = promotionId

  def toUnsavedRow(
    description: Defaulted[Optional[String]] = Defaulted.Provided(this.description),
    minOrderAmount: Defaulted[Optional[java.math.BigDecimal]] = Defaulted.Provided(this.minOrderAmount),
    maxUses: Defaulted[Optional[java.lang.Long]] = Defaulted.Provided(this.maxUses),
    usesCount: Defaulted[java.lang.Long] = Defaulted.Provided(this.usesCount),
    maxUsesPerCustomer: Defaulted[Optional[java.lang.Short]] = Defaulted.Provided(this.maxUsesPerCustomer),
    applicableTo: Defaulted[Optional[MariaSet]] = Defaulted.Provided(this.applicableTo),
    rulesJson: Defaulted[Optional[String]] = Defaulted.Provided(this.rulesJson),
    isActive: Defaulted[java.lang.Boolean] = Defaulted.Provided(this.isActive),
    createdAt: Defaulted[LocalDateTime] = Defaulted.Provided(this.createdAt)
  ): PromotionsRowUnsaved = {
    new PromotionsRowUnsaved(
      code,
      name,
      discountType,
      discountValue,
      validFrom,
      validTo,
      description,
      minOrderAmount,
      maxUses,
      usesCount,
      maxUsesPerCustomer,
      applicableTo,
      rulesJson,
      isActive,
      createdAt
    )
  }
}

object PromotionsRow {
  val `_rowParser`: RowParser[PromotionsRow] = RowParsers.of(PromotionsId.pgType, MariaTypes.varchar, MariaTypes.varchar, MariaTypes.text.opt(), MariaTypes.text, MariaTypes.decimal, MariaTypes.decimal.opt(), MariaTypes.intUnsigned.opt(), MariaTypes.intUnsigned, MariaTypes.tinyintUnsigned.opt(), MariaTypes.set.opt(), MariaTypes.longtext.opt(), MariaTypes.datetime, MariaTypes.datetime, MariaTypes.bool, MariaTypes.datetime, PromotionsRow.apply, row => Array(row.promotionId, row.code, row.name, row.description, row.discountType, row.discountValue, row.minOrderAmount, row.maxUses, row.usesCount, row.maxUsesPerCustomer, row.applicableTo, row.rulesJson, row.validFrom, row.validTo, row.isActive, row.createdAt))

  given mariaText: MariaText[PromotionsRow] = MariaText.from(`_rowParser`)
}