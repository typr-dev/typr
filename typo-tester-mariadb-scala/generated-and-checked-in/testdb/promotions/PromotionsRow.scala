/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.promotions

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDateTime
import testdb.customtypes.Defaulted
import typo.data.maria.MariaSet
import typo.runtime.MariaText
import typo.runtime.MariaTypes
import typo.scaladsl.MariaTypeOps
import typo.scaladsl.RowParser
import typo.scaladsl.RowParsers
import typo.scaladsl.ScalaDbTypes

/** Table: promotions
 * Primary key: promotion_id
 */
case class PromotionsRow(
  /** 
   * AUTO_INCREMENT
   */
  @JsonProperty("promotion_id") promotionId: PromotionsId,
  /**  */
  code: String,
  /**  */
  name: String,
  /** 
   * Default: NULL
   */
  description: Option[String],
  /**  */
  @JsonProperty("discount_type") discountType: String,
  /**  */
  @JsonProperty("discount_value") discountValue: BigDecimal,
  /** 
   * Default: NULL
   */
  @JsonProperty("min_order_amount") minOrderAmount: Option[BigDecimal],
  /** 
   * Default: NULL
   */
  @JsonProperty("max_uses") maxUses: Option[Long],
  /** 
   * Default: 0
   */
  @JsonProperty("uses_count") usesCount: Long,
  /** 
   * Default: NULL
   */
  @JsonProperty("max_uses_per_customer") maxUsesPerCustomer: Option[Short],
  /** 
   * Default: NULL
   */
  @JsonProperty("applicable_to") applicableTo: Option[MariaSet],
  /** Complex eligibility rules
   * Default: NULL
   */
  @JsonProperty("rules_json") rulesJson: Option[String],
  /**  */
  @JsonProperty("valid_from") validFrom: LocalDateTime,
  /**  */
  @JsonProperty("valid_to") validTo: LocalDateTime,
  /** 
   * Default: 1
   */
  @JsonProperty("is_active") isActive: Boolean,
  /** 
   * Default: current_timestamp()
   */
  @JsonProperty("created_at") createdAt: LocalDateTime
) {
  def id: PromotionsId = promotionId

  def toUnsavedRow(
    description: Defaulted[Option[String]] = Defaulted.Provided(this.description),
    minOrderAmount: Defaulted[Option[BigDecimal]] = Defaulted.Provided(this.minOrderAmount),
    maxUses: Defaulted[Option[Long]] = Defaulted.Provided(this.maxUses),
    usesCount: Defaulted[Long] = Defaulted.Provided(this.usesCount),
    maxUsesPerCustomer: Defaulted[Option[Short]] = Defaulted.Provided(this.maxUsesPerCustomer),
    applicableTo: Defaulted[Option[MariaSet]] = Defaulted.Provided(this.applicableTo),
    rulesJson: Defaulted[Option[String]] = Defaulted.Provided(this.rulesJson),
    isActive: Defaulted[Boolean] = Defaulted.Provided(this.isActive),
    createdAt: Defaulted[LocalDateTime] = Defaulted.Provided(this.createdAt)
  ): PromotionsRowUnsaved = {
    new PromotionsRowUnsaved(
      code,
      name,
      discountType,
      discountValue,
      validFrom,
      validTo,
      description,
      minOrderAmount,
      maxUses,
      usesCount,
      maxUsesPerCustomer,
      applicableTo,
      rulesJson,
      isActive,
      createdAt
    )
  }
}

object PromotionsRow {
  val `_rowParser`: RowParser[PromotionsRow] = {
    RowParsers.of(PromotionsId.pgType, MariaTypes.varchar, MariaTypes.varchar, MariaTypes.text.nullable, MariaTypes.text, ScalaDbTypes.MariaTypes.numeric, ScalaDbTypes.MariaTypes.numeric.nullable, ScalaDbTypes.MariaTypes.intUnsigned.nullable, ScalaDbTypes.MariaTypes.intUnsigned, ScalaDbTypes.MariaTypes.tinyintUnsigned.nullable, MariaTypes.set.nullable, MariaTypes.longtext.nullable, MariaTypes.datetime, MariaTypes.datetime, ScalaDbTypes.MariaTypes.bool, MariaTypes.datetime)((t0, t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12, t13, t14, t15) => new PromotionsRow(
      t0,
      t1,
      t2,
      t3,
      t4,
      t5,
      t6,
      t7,
      t8,
      t9,
      t10,
      t11,
      t12,
      t13,
      t14,
      t15
    ))(row => Array[Any](row.promotionId, row.code, row.name, row.description, row.discountType, row.discountValue, row.minOrderAmount, row.maxUses, row.usesCount, row.maxUsesPerCustomer, row.applicableTo, row.rulesJson, row.validFrom, row.validTo, row.isActive, row.createdAt))
  }

  given mariaText: MariaText[PromotionsRow] = MariaText.from(`_rowParser`.underlying)
}