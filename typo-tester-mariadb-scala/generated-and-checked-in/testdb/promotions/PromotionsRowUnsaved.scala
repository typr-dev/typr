/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.promotions

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDateTime
import java.util.Optional
import testdb.customtypes.Defaulted
import testdb.customtypes.Defaulted.UseDefault
import typo.data.maria.MariaSet
import typo.runtime.MariaText
import typo.runtime.MariaTypes

/** This class corresponds to a row in table `promotions` which has not been persisted yet */
case class PromotionsRowUnsaved(
  /**  */
  code: String,
  /**  */
  name: String,
  /**  */
  @JsonProperty("discount_type") discountType: String,
  /**  */
  @JsonProperty("discount_value") discountValue: java.math.BigDecimal,
  /**  */
  @JsonProperty("valid_from") validFrom: LocalDateTime,
  /**  */
  @JsonProperty("valid_to") validTo: LocalDateTime,
  /** Default: NULL

   */
  description: Defaulted[Optional[String]] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("min_order_amount") minOrderAmount: Defaulted[Optional[java.math.BigDecimal]] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("max_uses") maxUses: Defaulted[Optional[java.lang.Long]] = new UseDefault(),
  /** Default: 0

   */
  @JsonProperty("uses_count") usesCount: Defaulted[java.lang.Long] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("max_uses_per_customer") maxUsesPerCustomer: Defaulted[Optional[java.lang.Short]] = new UseDefault(),
  /** Default: NULL

   */
  @JsonProperty("applicable_to") applicableTo: Defaulted[Optional[MariaSet]] = new UseDefault(),
  /** Default: NULL
   * Complex eligibility rules
   */
  @JsonProperty("rules_json") rulesJson: Defaulted[Optional[String]] = new UseDefault(),
  /** Default: 1

   */
  @JsonProperty("is_active") isActive: Defaulted[java.lang.Boolean] = new UseDefault(),
  /** Default: current_timestamp()

   */
  @JsonProperty("created_at") createdAt: Defaulted[LocalDateTime] = new UseDefault()
) {
  def toRow(
    descriptionDefault: => Optional[String],
    minOrderAmountDefault: => Optional[java.math.BigDecimal],
    maxUsesDefault: => Optional[java.lang.Long],
    usesCountDefault: => java.lang.Long,
    maxUsesPerCustomerDefault: => Optional[java.lang.Short],
    applicableToDefault: => Optional[MariaSet],
    rulesJsonDefault: => Optional[String],
    isActiveDefault: => java.lang.Boolean,
    createdAtDefault: => LocalDateTime,
    promotionIdDefault: => PromotionsId
  ): PromotionsRow = {
    new PromotionsRow(
      promotionId = promotionIdDefault,
      code = code,
      name = name,
      description = description.getOrElse(descriptionDefault),
      discountType = discountType,
      discountValue = discountValue,
      minOrderAmount = minOrderAmount.getOrElse(minOrderAmountDefault),
      maxUses = maxUses.getOrElse(maxUsesDefault),
      usesCount = usesCount.getOrElse(usesCountDefault),
      maxUsesPerCustomer = maxUsesPerCustomer.getOrElse(maxUsesPerCustomerDefault),
      applicableTo = applicableTo.getOrElse(applicableToDefault),
      rulesJson = rulesJson.getOrElse(rulesJsonDefault),
      validFrom = validFrom,
      validTo = validTo,
      isActive = isActive.getOrElse(isActiveDefault),
      createdAt = createdAt.getOrElse(createdAtDefault)
    )
  }
}

object PromotionsRowUnsaved {
  given mariaText: MariaText[PromotionsRowUnsaved] = MariaText.instance((row, sb) => { MariaTypes.varchar.mariaText.unsafeEncode(row.code, sb); sb.append(MariaText.DELIMETER); MariaTypes.varchar.mariaText.unsafeEncode(row.name, sb); sb.append(MariaText.DELIMETER); MariaTypes.text.mariaText.unsafeEncode(row.discountType, sb); sb.append(MariaText.DELIMETER); MariaTypes.decimal.mariaText.unsafeEncode(row.discountValue, sb); sb.append(MariaText.DELIMETER); MariaTypes.datetime.mariaText.unsafeEncode(row.validFrom, sb); sb.append(MariaText.DELIMETER); MariaTypes.datetime.mariaText.unsafeEncode(row.validTo, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.text.opt().mariaText).unsafeEncode(row.description, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.decimal.opt().mariaText).unsafeEncode(row.minOrderAmount, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.intUnsigned.opt().mariaText).unsafeEncode(row.maxUses, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.intUnsigned.mariaText).unsafeEncode(row.usesCount, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.tinyintUnsigned.opt().mariaText).unsafeEncode(row.maxUsesPerCustomer, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.set.opt().mariaText).unsafeEncode(row.applicableTo, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.longtext.opt().mariaText).unsafeEncode(row.rulesJson, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.bool.mariaText).unsafeEncode(row.isActive, sb); sb.append(MariaText.DELIMETER); Defaulted.mariaText(using MariaTypes.datetime.mariaText).unsafeEncode(row.createdAt, sb) })
}