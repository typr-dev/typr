/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.simple_customer_lookup

import java.sql.Connection
import typo.runtime.MariaTypes
import typo.runtime.FragmentInterpolator.interpolate

class SimpleCustomerLookupSqlRepoImpl extends SimpleCustomerLookupSqlRepo {
  override def apply(email: String)(using c: Connection): java.util.List[SimpleCustomerLookupSqlRow] = {
    interpolate"""-- Simple customer lookup by email
    SELECT customer_id,
           email,
           first_name,
           last_name,
           tier,
           status,
           created_at
    FROM customers
    WHERE email = ${MariaTypes.text.encode(email)}
    """.query(SimpleCustomerLookupSqlRow.`_rowParser`.all()).runUnchecked(c)
  }
}