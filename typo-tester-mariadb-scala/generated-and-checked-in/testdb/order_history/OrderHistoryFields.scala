/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.order_history

import java.time.LocalDateTime
import java.util.Optional
import testdb.orders.OrdersFields
import testdb.orders.OrdersId
import testdb.orders.OrdersRow
import typo.dsl.ForeignKey
import typo.dsl.Path
import typo.dsl.SqlExpr.Field
import typo.dsl.SqlExpr.FieldLike
import typo.dsl.SqlExpr.IdField
import typo.dsl.SqlExpr.OptField
import typo.dsl.Structure.Relation
import typo.runtime.MariaTypes

trait OrderHistoryFields {
  def historyId: IdField[OrderHistoryId, OrderHistoryRow]

  def orderId: Field[OrdersId, OrderHistoryRow]

  def previousStatus: OptField[String, OrderHistoryRow]

  def newStatus: Field[String, OrderHistoryRow]

  def changedBy: OptField[String, OrderHistoryRow]

  def changeReason: OptField[String, OrderHistoryRow]

  def metadata: OptField[String, OrderHistoryRow]

  def createdAt: Field[LocalDateTime, OrderHistoryRow]

  def fkOrders: ForeignKey[OrdersFields, OrdersRow] = ForeignKey.of[OrdersFields, OrdersRow]("fk_oh_order").withColumnPair(orderId, _.orderId)
}

object OrderHistoryFields {
  private final class Impl(path: java.util.List[Path]) extends Relation[OrderHistoryFields, OrderHistoryRow](path) {

    override lazy val fields: OrderHistoryFields = {
      new OrderHistoryFields {
        override def historyId: IdField[OrderHistoryId, OrderHistoryRow] = {
          new IdField[OrderHistoryId, OrderHistoryRow](
            _path,
            "history_id",
            _.historyId,
            Optional.empty(),
            Optional.empty(),
            (row, value) => row.copy(historyId = value),
            OrderHistoryId.pgType
          )
        }
        override def orderId: Field[OrdersId, OrderHistoryRow] = {
          new Field[OrdersId, OrderHistoryRow](
            _path,
            "order_id",
            _.orderId,
            Optional.empty(),
            Optional.empty(),
            (row, value) => row.copy(orderId = value),
            OrdersId.pgType
          )
        }
        override def previousStatus: OptField[String, OrderHistoryRow] = {
          new OptField[String, OrderHistoryRow](
            _path,
            "previous_status",
            _.previousStatus,
            Optional.empty(),
            Optional.empty(),
            (row, value) => row.copy(previousStatus = value),
            MariaTypes.text
          )
        }
        override def newStatus: Field[String, OrderHistoryRow] = {
          new Field[String, OrderHistoryRow](
            _path,
            "new_status",
            _.newStatus,
            Optional.empty(),
            Optional.empty(),
            (row, value) => row.copy(newStatus = value),
            MariaTypes.text
          )
        }
        override def changedBy: OptField[String, OrderHistoryRow] = {
          new OptField[String, OrderHistoryRow](
            _path,
            "changed_by",
            _.changedBy,
            Optional.empty(),
            Optional.empty(),
            (row, value) => row.copy(changedBy = value),
            MariaTypes.varchar
          )
        }
        override def changeReason: OptField[String, OrderHistoryRow] = {
          new OptField[String, OrderHistoryRow](
            _path,
            "change_reason",
            _.changeReason,
            Optional.empty(),
            Optional.empty(),
            (row, value) => row.copy(changeReason = value),
            MariaTypes.varchar
          )
        }
        override def metadata: OptField[String, OrderHistoryRow] = {
          new OptField[String, OrderHistoryRow](
            _path,
            "metadata",
            _.metadata,
            Optional.empty(),
            Optional.empty(),
            (row, value) => row.copy(metadata = value),
            MariaTypes.longtext
          )
        }
        override def createdAt: Field[LocalDateTime, OrderHistoryRow] = {
          new Field[LocalDateTime, OrderHistoryRow](
            _path,
            "created_at",
            _.createdAt,
            Optional.empty(),
            Optional.empty(),
            (row, value) => row.copy(createdAt = value),
            MariaTypes.datetime
          )
        }
      }
    }

    override lazy val columns: java.util.List[FieldLike[?, OrderHistoryRow]] = java.util.List.of(this.fields.historyId, this.fields.orderId, this.fields.previousStatus, this.fields.newStatus, this.fields.changedBy, this.fields.changeReason, this.fields.metadata, this.fields.createdAt)

    override def copy(path: java.util.List[Path]): Impl = new Impl(path)
  }

  lazy val structure: Relation[OrderHistoryFields, OrderHistoryRow] = new Impl(java.util.List.of())
}