/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package testdb.payments

import com.fasterxml.jackson.annotation.JsonProperty
import java.time.LocalDateTime
import java.util.Optional
import testdb.customtypes.Defaulted
import testdb.orders.OrdersId
import testdb.payment_methods.PaymentMethodsId
import typo.data.maria.Inet6
import typo.runtime.MariaText
import typo.runtime.MariaTypes
import typo.runtime.RowParser
import typo.runtime.RowParsers

/** Table: payments
 * Primary key: payment_id
 */
case class PaymentsRow(
  /** 
   * AUTO_INCREMENT
   */
  @JsonProperty("payment_id") paymentId: PaymentsId,
  /** 
   * Points to [[testdb.orders.OrdersRow.orderId]]
   */
  @JsonProperty("order_id") orderId: OrdersId,
  /** 
   * Points to [[testdb.payment_methods.PaymentMethodsRow.methodId]]
   */
  @JsonProperty("method_id") methodId: PaymentMethodsId,
  /** 
   * Default: NULL
   */
  @JsonProperty("transaction_id") transactionId: Optional[String],
  /**  */
  amount: java.math.BigDecimal,
  /** 
   * Default: 'USD'
   */
  @JsonProperty("currency_code") currencyCode: String,
  /** 
   * Default: 'pending'
   */
  status: String,
  /** 
   * Default: NULL
   */
  @JsonProperty("processor_response") processorResponse: Optional[String],
  /** 
   * Default: NULL
   */
  @JsonProperty("error_message") errorMessage: Optional[String],
  /** 
   * Default: NULL
   */
  @JsonProperty("ip_address") ipAddress: Optional[Inet6],
  /** 
   * Default: current_timestamp(6)
   */
  @JsonProperty("created_at") createdAt: LocalDateTime,
  /** 
   * Default: NULL
   */
  @JsonProperty("processed_at") processedAt: Optional[LocalDateTime]
) {
  def id: PaymentsId = paymentId

  def toUnsavedRow(
    transactionId: Defaulted[Optional[String]] = Defaulted.Provided(this.transactionId),
    currencyCode: Defaulted[String] = Defaulted.Provided(this.currencyCode),
    status: Defaulted[String] = Defaulted.Provided(this.status),
    processorResponse: Defaulted[Optional[String]] = Defaulted.Provided(this.processorResponse),
    errorMessage: Defaulted[Optional[String]] = Defaulted.Provided(this.errorMessage),
    ipAddress: Defaulted[Optional[Inet6]] = Defaulted.Provided(this.ipAddress),
    createdAt: Defaulted[LocalDateTime] = Defaulted.Provided(this.createdAt),
    processedAt: Defaulted[Optional[LocalDateTime]] = Defaulted.Provided(this.processedAt)
  ): PaymentsRowUnsaved = {
    new PaymentsRowUnsaved(
      orderId,
      methodId,
      amount,
      transactionId,
      currencyCode,
      status,
      processorResponse,
      errorMessage,
      ipAddress,
      createdAt,
      processedAt
    )
  }
}

object PaymentsRow {
  val `_rowParser`: RowParser[PaymentsRow] = RowParsers.of(PaymentsId.pgType, OrdersId.pgType, PaymentMethodsId.pgType, MariaTypes.varchar.opt(), MariaTypes.decimal, MariaTypes.char_, MariaTypes.text, MariaTypes.longtext.opt(), MariaTypes.varchar.opt(), MariaTypes.inet6.opt(), MariaTypes.datetime, MariaTypes.datetime.opt(), PaymentsRow.apply, row => Array(row.paymentId, row.orderId, row.methodId, row.transactionId, row.amount, row.currencyCode, row.status, row.processorResponse, row.errorMessage, row.ipAddress, row.createdAt, row.processedAt))

  given mariaText: MariaText[PaymentsRow] = MariaText.from(`_rowParser`)
}